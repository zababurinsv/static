import Login from"/static/html/components/component_modules/login/login.mjs";customElements.define("telegram-search",class extends HTMLElement{static get observedAttributes(){return["feed"]}constructor(){super();let t=[],e=[],l=[],o=[];function s(t,e,l){return new Promise(function(e,l){t["template-shadow"]=[],t["template-light"]=[];let o=[];o.swap=!1,o.blog=!1,o.external=!1,o.light=!1,o.slider=!1,o.one=!1,o.sliderText=!1,o.text=!1;for(let e=0;e<t.type.length;e++){if(-1!==t.type[e].indexOf("slider")&&t.type[e].split("-").length>1){o.slider=!0;for(let l in t.type[e].split("-"))switch(t.type[e].split("-")[l]){case"one":o.one=!0}}if(t.type[e].length)if(t.type[e].split("-").length>1)switch(t.type[e].split("-")[0]){case"blog":o.blog=!0;break;default:console.log("типы не отслеживаются",t.type[e])}else switch(t.type[e]){case"swap":o.swap=!0;break;case"external":o.external=!0;break;case"light":o.light=!0;break;case"slider":o.slider=!0;break;case"sliderText":o.sliderText=!0;break;case"text":o.text=!0}}if(!0===o.swap){for(let e=0;e<t.this.children.length;e++)1===t.this.children[e].tagName.split("-").length?("view"===t.this.children[e].slot&&(t.this.children[e].className="wall"),t["template-light"].push(t.this.children[e])):!0===t.getAttribute(t.this.children[e],"light","template")?(t.this.children[e].setAttribute("type",`${t.this.children[e].getAttribute("type")}-external`),r(t.this.children[e],t),t["template-light"].push(t.this.children[e])):(t.this.children[e].setAttribute("type",`${t.this.children[e].getAttribute("type")}-external`),r(t.this.children[e],t),t["template-shadow"].push(t.this.children[e]));for(let e=0;e<t.template.children.length;e++)1===t.template.children[e].tagName.split("-").length?("view"===t.template.children[e].slot&&(t.template.children[e].className="wall"),t["template-light"].push(t.template.children[e])):!0===t.getAttribute(t.template.children[e],"light","template")?(t.template.children[e].setAttribute("type",`${t.template.children[e].getAttribute("type")}-external`),r(t.template.children[e],t),t["template-light"].push(t.template.children[e])):(t.template.children[e].setAttribute("type",`${t.template.children[e].getAttribute("type")}-external`),r(t.template.children[e],t),t["template-shadow"].push(t.template.children[e]))}else{for(let e=0;e<t.this.children.length;e++)1===t.this.children[e].tagName.split("-").length?("view"===t.this.children[e].slot&&(t.this.children[e].className="wall"),t["template-shadow"].push(t.this.children[e])):!0===t.getAttribute(t.this.children[e],"light","template")?(r(t.this.children[e],t),t["template-shadow"].push(t.this.children[e])):(r(t.this.children[e],t),t["template-light"].push(t.this.children[e]));for(let e=0;e<t.template.children.length;e++)1===t.template.children[e].tagName.split("-").length?("view"===t.template.children[e].slot&&(t.template.children[e].className="wall"),t["template-shadow"].push(t.template.children[e])):!0===t.getAttribute(t.template.children[e],"light","template")?(r(t.template.children[e],t),t["template-shadow"].push(t.template.children[e])):(r(t.template.children[e],t),t["template-light"].push(t.template.children[e]))}for(let e in o)t.verify[e]=o[e];!0===t.verify.slider?function(t){return new Promise(function(e,l){fetch(`/static/html/components/varan-slider/template/${t.slot}.html`).then(function(t){if(t.ok)return t.text()}).then(function(l){let o=new DOMParser,s=o.parseFromString(l,"text/html");t.slider=s.getElementsByTagName("template")[0].content.cloneNode(!0);let n=document.createElement("section");n.className="slider",n.slot="view",n.appendChild(t.slider),t.slider=n,t["slider-template"]=n;for(let e=0;e<t.type.length;e++)"slider-one-text"===t.type[e]&&(t.verify.sliderText=!0);matcher.database.request.functions.getObject(t).then(t=>{t.get?(pagination.init(t),pagination.action(t).then(t=>{e(t)})):e(t)})}).catch(t=>t)})}(t).then(t=>{t["template-light"].push(t.slider),t.this.appendChild(t.slider),function(t,e){return new Promise(function(l,o){if(e){switch(e){case"slider":(function(t,e){return new Promise(function(l,o){for(let o=0;o<t.state.length;o++)for(let s=0;s<t[`template-${t.state[o]}`].length;s++)0===t[`template-${t.state[o]}`][s].getElementsByClassName(e).length||(t.slider=t[`template-${t.state[o]}`][s].getElementsByClassName(e)[0],l(t[`template-${t.state[o]}`][s].getElementsByClassName(e)[0]))})})(t,"peppermint").then(e=>{(function(t){return new Promise(function(e,l){e(Peppermint(t,{dots:!1,slideshow:!1,speed:500,slideshowInterval:5e3,stopSlideshowAfterInteraction:!0,onSetup:function(t){}}))})})(e).then(e=>{t.slider=e,l(t)})})}l(t)}else l(t)})}(t,"slider").then(t=>{if(!0===t.verify.one)for(let l=0;l<t.state.length;l++)for(let o=0;o<t[`template-${t.state[l]}`].length;o++)"wall"===t[`template-${t.state[l]}`][o].className&&(t[`template-${t.state[l]}`].splice(o,1),e(t));else e(t)})}):e(t)})}function n(e,l){return new Promise(function(l,o){e.verify=[];let n={};n=e.slot?e.slot:e.parent,e.this.hasAttribute("preset")?0===e.this.getAttribute("preset").length?(e["path-template"]=`/static/html/components/${e.component}/template/${n}.html`,e.preset="default",e.verify.preset=!0):(e["path-template"]=`/static/html/components/${e.component}/template/${e.this.getAttribute("preset")}/${e.component}-${e.this.getAttribute("preset")}.html`,e.preset=`${e.this.getAttribute("preset")}`,e.verify.preset=!0):(e["path-template"]=`/static/html/components/${e.component}/${e.component}.html`,e.verify.preset=!1),fetch(e["path-template"]).then(function(t){if(t.ok)return t.text()}).then(function(o){let n=(new DOMParser).parseFromString(o,"text/html");e.template=n.getElementsByTagName("template")[0].content.cloneNode(!0),function(e){return new Promise(function(l,o){e["path-external"]=`/static/html/components/${e.component}/external/${e.component}-external.html`,fetch(e["path-external"]).then(function(t){return!1===t.ok?t.ok:t.text()}).then(function(o){if(!1===o);else{let s=new DOMParser,n=s.parseFromString(o,"text/html");e.external=n.querySelectorAll("section"),function(e){return new Promise(function(l,o){e["external-property"]=t["external-property"];let s=[],n=[],r=[];for(let t=0;t<e.external.length;t++){for(let l=0;l<e.external[t].children.length;l++)switch(e.external[t].children[l].tagName){case"SCRIPT":e.external[t].getAttribute("id")&&(n.script=e.external[t].children[l]);break;case"COMPONENT-ID":n.id=e.external[t].children[l].innerText;break;case"COMPONENT-ACTION":for(let o=0;o<e.external[t].children[l].children.length;o++)r.push(e.external[t].children[l].children[o].innerText);n.actions=r}s.push(n),n=[]}e["external-property"]=s,l(e)}).catch(t=>{})}(e).then(t=>{0===t["external-property"].length?l(t):function(t){return new Promise(function(e,l){t["words-action"]=[];let o=[];for(let l=0;l<t["external-property"].length;l++){for(let e=0;e<t["external-property"][l].actions.length;e++)for(let s=0;s<t.words.length;s++)-1!==t["external-property"][l].actions[e].indexOf(t.words[s])&&("shadowRoot"!==t.words[s]&&"shadow"!==t.words[e]||(o.shadow=!0),"light"!==t.words[s]&&"лайт"!==t.words[e]||(o.light=!0),"editor"===t.words[s]&&(o.editor=!0),"слайдер"===t.words[s]&&(o["editor-slider"]=!0),"swap"===t.words[s]&&(o.swap=!0));t["words-action"]=o;for(let e in t["external-property"])for(let l in t["external-property"][e])switch(l){case"id":let o=document.createElement(t["external-property"][e][l]);o.setAttribute("type","external"),t.this.appendChild(o)}e(t)}})}(t).then(t=>{l(t)})})}}).catch(t=>{throw t})})}(e).then(t=>{s(t,t["type-swap"],t["type-external"]).then(t=>{let e={};for(let l=0;l<t["template-light"].length;l++)"VARAN-MENU"===t["template-light"][l].tagName&&(e=t["template-light"].splice(l,1),t["template-light"].push(e[0]));if(!0===t.verify.swap){if(0!==t["template-shadow"].length){t.this.attachShadow({mode:"open"}),t.shadowRoot=!0;for(let e=0;e<t["template-shadow"].length;e++)t.this.shadowRoot.appendChild(t["template-shadow"][e])}if(0!==t["template-light"].length)for(let e=0;e<t["template-light"].length;e++)t.this.appendChild(t["template-light"][e])}else{if(0!==t["template-shadow"].length){t.this.attachShadow({mode:"open"}),t.shadowRoot=!0;for(let e in t["template-shadow"])t.this.shadowRoot.appendChild(t["template-shadow"][e])}if(0!==t["template-light"].length)for(let e in t["template-light"])t.this.appendChild(t["template-light"][e])}l(t)})})}).catch(t=>t)})}function r(t,e){return new Promise(function(l,o){let s=!1;for(let e=0;e<document.querySelectorAll("script").length;e++)-1!==document.querySelectorAll("script")[e].src.indexOf(t.tagName.toLowerCase())&&(s=!0);if(!0===s)console.log("модуль загружен");else{const s=document.createElement("script");s.type="module",s.src=`/static/html/components/${t.tagName.toLowerCase()}/${t.tagName.toLowerCase()}.mjs`,s.setAttribute("async",""),s.onload=l,s.onerror=o,e.this.appendChild(s)}})}var i;e.push("component-id"),e.push("script"),e.push("component-action"),l.push("h1"),l.push("innerText"),o.push("shadowRoot"),o.push("head"),o.push("shadow"),o.push("light"),o.push("lightDom"),o.push("editor"),o.push("слайдер"),o.push("swap"),t.this=this,t["type-supported"]=l,(i=this,new Promise(function(t,e){let l=[];l.staticProperty=[],l.staticProperty.c=0,l.state=[],l.state.push("shadow"),l.state.push("light"),l.words=o,l["type-swap"]=!1,l["type-external"]=!1,l["document-offsetWidth"]=document.body.offsetWidth;let s=!1;if(l.getAttribute=((t,e,l)=>{if("template"===l){if(!t.getAttribute("type"))return t.setAttribute("type","default"),!1;for(let l=0;l<t.getAttribute("type").split("-").length;l++)t.getAttribute("type").split("-")[l]===e&&(s=!0);return s}if(t[`verify-${e}`]=!1,0===t.this.getAttribute("type").split("-").length)return!1;for(let l=0;l<t.this.getAttribute("type").split("-").length;l++)t.this.getAttribute("type").split("-")[l]===e?t[`verify-${e}`]=!0:t[`verify-${e}`]=!1;return console.assert(!1,t),t[`verify-${e}`]}),i.tagName.toLowerCase()&&(l.component=i.tagName.toLowerCase()),"object"!=typeof i);else{if(i.getAttribute("type")){l.type=i.getAttribute("type").split("-");for(let t=0;t<l.type.length;t++)l.type[t]=l.type[t].replace(/:/g,"-");for(let t in l.type)switch(l.type[t]){case"swap":l["type-swap"]=!0;break;case"external":l["type-external"]=!0}}else l.type=["default"],i.setAttribute("type","default");if(i.slot?l.slot=i.slot:(i.slot=i.tagName.toLowerCase(),l.slot=i.slot),i.getAttribute("type")){let t=!1;for(let e in i.getAttribute("type").split("-"))-1!==i.getAttribute("type").split("-")[e].indexOf("style:")&&(t=!0);l["style-custom"]=!0===t?"not-default":"default"}}l.shadowRoot=!1,l.this=i,t(l)})).then(t=>{n(t).then(t=>{(function(t){return new Promise(function(e,l){let o=document.createElement("style"),s=document.createElement("style"),n={};(n=t.slot?t.slot:t.parent)||console.assert(!1,"не установленны ни слот ни парент");for(let e=0;e<t.type.length;e++)"swap"===t.type[e]?"scoped"===t.type[e]&&o.setAttribute("scoped",""):"scoped"===t.type[e]&&s.setAttribute("scoped","");for(let l=0;l<t.state.length;l++){switch(t[`path-style-${t.state[l]}`]=`@import '/static/html/components/${t.component}/${t.state[l]}/${t.component}.css'; @import '/static/html/components/${t.component}/${t.state[l]}/${t.component}-custom.css';`,t.state[l]){case"shadow":!0===t.verify.preset&&(t[`path-style-${t.state[l]}-preset`]=`@import '/static/html/components/${t.component}/template/${n}.css';`),o.innerText=t[`path-style-${t.state[l]}`]+t[`path-style-${t.state[l]}-preset`];break;case"light":!0===t.verify.preset&&(t[`path-style-${t.state[l]}-preset`]=`@import '/static/html/components/${t.component}/template/${n}.css';`),s.innerText=t[`path-style-${t.state[l]}`]+t[`path-style-${t.state[l]}-preset`]}"swap"===t.state[l]?!0===t.shadowRoot?(t.this.shadowRoot.appendChild(s),t.this.appendChild(o),e(t)):t.this.appendChild(o):!0===t.shadowRoot?(t.this.shadowRoot.appendChild(o),t.this.appendChild(s),e(t)):t.this.appendChild(s)}e(t)})})(t).then(t=>{!async function(t){let e=new((await Login({name:"telegram-login"})).class);t.this.shadowRoot.querySelector(".dropdown").insertAdjacentElement("beforeend",e.template),t.this.shadowRoot.querySelectorAll(".country").forEach(e=>{e.addEventListener("click",async e=>{t.this.shadowRoot.querySelector(".dropbtn").id="set";let l={};l="country"===e.target.className?e.target:e.target.parentNode,t.this.shadowRoot.querySelector(".dropbtn").style.cursor="pointer",t.this.shadowRoot.querySelector(".dropbtn").type="button",t.this.shadowRoot.querySelector(".dropbtn").value=l.querySelector(".name").innerText,t.this.shadowRoot.querySelector(".down").src="/static/html/components/telegram-search/images/down_svg.svg";let o=new CustomEvent("telegram-login",{detail:{code:l.querySelector(".code").innerText,type:"login"}});document.dispatchEvent(o),t.this.shadowRoot.querySelector("#myDropdown").classList="dropdown-content"})}),t.this.shadowRoot.querySelector(".dropdown").addEventListener("click",async function(e){if("set"===t.this.shadowRoot.querySelector(".dropbtn").id)t.this.shadowRoot.querySelector(".dropbtn").id="";else{let e,l;t.this.shadowRoot.querySelector(".dropbtn").style.cursor="text",t.this.shadowRoot.querySelector(".dropbtn").value="",t.this.shadowRoot.querySelector(".dropbtn").type="text",t.this.shadowRoot.querySelector(".down").src="/static/html/components/telegram-search/images/up_svg.svg",t.this.shadowRoot.querySelector("#myDropdown").classList.toggle("show"),1===t.this.shadowRoot.querySelector("#myDropdown").classList.length&&(t.this.shadowRoot.querySelector(".dropbtn").type="button",t.this.shadowRoot.querySelector(".dropbtn").value="Country",t.this.shadowRoot.querySelector(".down").src="/static/html/components/telegram-search/images/down_svg.svg",t.this.shadowRoot.querySelector(".dropbtn").style.cursor="pointer"),t.this.shadowRoot.querySelector(".dropbtn").addEventListener("input",async o=>{e=o.target.value.toUpperCase();let s=t.this.shadowRoot.querySelector("#myDropdown");for(l=0;l<s.children.length;l++)s.children[l].querySelector(".name").innerHTML.toUpperCase().indexOf(e)>-1?s.children[l].style.display="flex":s.children[l].style.display="none"})}})}(t)})})})}connectedCallback(){}disconnectedCallback(){console.log("disconnected callback")}componentWillMount(){console.log("component will mount")}componentDidMount(){console.log("component did mount")}componentWillUnmount(){console.log("component will unmount")}componentDidUnmount(){console.log("component did unmount")}});