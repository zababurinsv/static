const axios=require("axios"),varanNews={read:async function(n,t,e){return await axios.get(n,{params:{start:t,stop:e},responseType:"json"}).then(function(n){return console.log("read.news DONE"),n.data}).catch(function(n){console.log("read.news = ERROR")})},get:async function(){return await axios.get("https://newsapi.org/v2/top-headlines",{params:{country:"us",apiKey:"30203461553e4974acfbe54da1846857"}}).then(function(n){return console.log("news.get = DONE"),n.data.articles}).catch(function(n){console.log("news.get = ERROR")})},isDuplicate:async function(n,t){const e=new Promise(function(e,a){n.find(t).toArray(function(n,t){e(t)})});return(await e).length>0?(console.log("isDuplicate: TRUE"),!0):(console.log("isDuplicate: FALSE"),!1)},writeNews:async function(n,t){for(let e=0;e<t.length;e++)!1===await this.isDuplicate(n,{title:t[e].title})&&n.insertOne(t[e],function(n,t){null!=n&&console.log("writeNews ERROR")})},readRange:async function(n,t,e){const a=e-t,o=new Promise(function(e,o){n.find({}).sort({$natural:-1}).skip(t).limit(a).toArray(function(n,t){e(t)})});return await o.then()},listen:async function(n){setInterval(async()=>{console.log("get news");const t=await this.get();await this.writeNews(n,t)},1e4)}};export{varanNews};