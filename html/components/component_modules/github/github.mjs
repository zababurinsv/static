import isEmpty from"/static/html/components/component_modules/isEmpty/isEmpty.mjs";let octokit=[];octokit.staticProperty=[],octokit.staticProperty.octokit=void 0,octokit.staticProperty.owner=void 0,octokit.staticProperty.repo=void 0,octokit.staticProperty.file=void 0,octokit.staticProperty.commits=void 0;let script=async t=>new Promise(async function(e,o){let i=document.createElement("script");i.src="/static/html/components/component_modules/github/Octokit.mjs",i.setAttribute("defer",""),document.body.appendChild(i),i.onload=(async o=>{octokit.staticProperty.octokit=new((await github.default()).Octokit)({auth:t}),e(octokit.staticProperty.octokit)})}),loader=(t,e)=>new Promise(function(o,i){let a=document.createElement("script");a.src=t,document.body.appendChild(a),a.onload=(t=>{o(window[e])})});async function b64EncodeUnicode(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)}))}async function b64DecodeUnicode(t){return decodeURIComponent(atob(t).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}export default(t={_:"default",obj:void 0})=>new Promise(async(e,o)=>{let i=t=>{e(t)};if(isEmpty(t._))console.assert(!1,"нет идентификатора _");else for(let e in t)switch(t._){case"init":if(t._===e){await script(t[e]);try{const{data:o}=await octokit.staticProperty.octokit.request("/user");octokit.staticProperty.owner=o.login,localStorage.setItem("github",t[e]),localStorage.setItem("login",o.login),localStorage.setItem("avatar_url",o.avatar_url),localStorage.setItem("name",o.name),localStorage.setItem("html_url",o.html_url),i(o)}catch(t){localStorage.removeItem("github"),i({error:t,status:void 0})}}else console.warn("условие не проходит",t._,"!==",e);break;case"get":t[e]===t._&&(isEmpty(octokit.staticProperty.octokit)?console.assert(!1,"нужно авторизоваться"):(octokit.staticProperty.repo=await fetch("https://api.github.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer 469ef2375fb227724168f49cc182aedfa5dafe31"},body:JSON.stringify({query:`\n{\n    repository(name: "${t.repo}", owner: "zababurinsv") {\n    id\n    descriptionHTML\n    name\n    openGraphImageUrl\n    isPrivate\n    }\n}\n                                    `})}),octokit.staticProperty.repo=await octokit.staticProperty.repo.json(),i(octokit.staticProperty.repo)));break;case"create":t[e]===t._&&(isEmpty(octokit.staticProperty.octokit)?console.assert(!1,"нужно авторизоваться"):(octokit.staticProperty.repo=await fetch("https://api.github.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer 469ef2375fb227724168f49cc182aedfa5dafe31"},body:JSON.stringify({query:`\nmutation create {\n  __typename\n  createRepository(input: {name: "${t.create}", visibility: PRIVATE, description: "${t.create}", template: false, hasIssuesEnabled: true, hasWikiEnabled: true}) {\n    clientMutationId\n    repository {\n      descriptionHTML\n      homepageUrl\n      id\n      owner {\n        id\n      }\n      createdAt\n      name\n    }\n  }\n}\n                                    `})}),octokit.staticProperty.repo=await octokit.staticProperty.repo.json(),i(octokit.staticProperty.repo)));break;case"file":t[e]===t._&&(isEmpty(octokit.staticProperty.octokit)?console.assert(!1,"нужно авторизоваться"):(octokit.staticProperty.file=await fetch(`https://api.github.com/repos/zababurinsv/${t.repo}/contents/${t.file}.mjs`,{method:"PUT",headers:{"Content-Type":"application/json",authorization:"Bearer 469ef2375fb227724168f49cc182aedfa5dafe31"},body:JSON.stringify({message:"update",committer:{name:"Zababurin Sergey",email:"s.zababurin.v@gmail.com"},content:"bXkgbmV3IGZpbGUgY29udGVudHM="})}),octokit.staticProperty.file=await octokit.staticProperty.file.json(),i(octokit.staticProperty.file)));break;case"getfile":t[e]===t._&&(isEmpty(octokit.staticProperty.octokit)?console.assert(!1,"нужно авторизоваться"):(octokit.staticProperty.file=await fetch(`https://api.github.com/repos/zababurinsv/${t.repo}/contents/${t.getfile}.mjs`,{method:"GET",headers:{"Content-Type":"application/json",authorization:"Bearer 469ef2375fb227724168f49cc182aedfa5dafe31"}}),octokit.staticProperty.file=await octokit.staticProperty.file.json(),i(octokit.staticProperty.file)));break;case"save":t[e]===t._&&(isEmpty(octokit.staticProperty.octokit)?console.assert(!1,"нужно авторизоваться"):(octokit.staticProperty.file=await fetch(`https://api.github.com/repos/zababurinsv/${t.repo}/contents/${t.file}.mjs`,{method:"PUT",headers:{"Content-Type":"application/json",authorization:"Bearer 469ef2375fb227724168f49cc182aedfa5dafe31"},body:JSON.stringify({message:"update",committer:{name:"Zababurin Sergey",email:"s.zababurin.v@gmail.com"},content:`${t.save}`,sha:t.sha})}),octokit.staticProperty.file=await octokit.staticProperty.file.json(),i(octokit.staticProperty.file)));break;case"commits":t[e]===t._&&(isEmpty(octokit.staticProperty.octokit)?console.assert(!1,"нужно авторизоваться"):(octokit.staticProperty.commits=await fetch("https://api.github.com/repos/zababurinsv/images/commits/master",{method:"GET",headers:{"Content-Type":"application/json",authorization:"Bearer 469ef2375fb227724168f49cc182aedfa5dafe31"}}),octokit.staticProperty.commits=await octokit.staticProperty.commits.json(),i(octokit.staticProperty.commits)));break;case"decoder":t[e]===t._&&i(await b64DecodeUnicode(t.decoder));break;case"encoder":t[e]===t._&&i(await b64EncodeUnicode(t.encoder));break;default:console.warn(!1,"неизвестный идентификатор _ ---\x3e",t._)}});