!function(t,n){"use strict";function e(t){return document.createElement(t)}function o(t,n){for(var e in n)try{t.style[e]=n[e]}catch(t){}return t}function a(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof t}function i(t,n){if("array"!==a(n))return-1;if(n.indexOf)return n.indexOf(t);for(var e=0,o=n.length;e<o;e++)if(n[e]===t)return e;return-1}function r(){var t=arguments;for(var n in t[1])if(t[1].hasOwnProperty(n))switch(a(t[1][n])){case"object":t[0][n]=r({},t[0][n],t[1][n]);break;case"array":t[0][n]=t[1][n].slice(0);break;default:t[0][n]=t[1][n]}return t.length>2?r.apply(null,[t[0]].concat(Array.prototype.slice.call(t,2))):t[0]}function h(t){return 1===(t=Math.round(255*t).toString(16)).length?"0"+t:t}function l(t,n,e,o){t.addEventListener?t[o?"removeEventListener":"addEventListener"](n,e,!1):t.attachEvent&&t[o?"detachEvent":"attachEvent"]("on"+n,e)}var s;!function(){var n=t.performance;if(n&&(n.now||n.webkitNow)){var e=n.now?"now":"webkitNow";s=n[e].bind(n)}else s=function(){return+new Date}}();var u=t.cancelAnimationFrame||t.cancelRequestAnimationFrame,c=t.requestAnimationFrame;!function(){for(var n=["moz","webkit","o"],e=0,o=0,a=n.length;o<a&&!u;++o)u=t[n[o]+"CancelAnimationFrame"]||t[n[o]+"CancelRequestAnimationFrame"],c=u&&t[n[o]+"RequestAnimationFrame"];u||(c=function(n){var o=s(),a=Math.max(0,16-(o-e));return e=o+a,t.setTimeout(function(){n(o+a)},a)},u=function(t){clearTimeout(t)})}();var p="string"===a(document.createElement("div").textContent)?"textContent":"innerText";function d(t,m){"object"===a(t)&&t.nodeType===n&&(m=t,t=document.body),t||(t=document.body);var x,b,v,w,y,k,O,S,F,C=this,M=r({},d.defaults,m||{}),z={},A=[],E=100,P=[],H=M.threshold,T=0,j=s()-H,I=[],q=[],D="fps"===M.show;function L(t,n,e,o){return b[0|t][Math.round(Math.min((n-e)/(o-e)*E,E))]}function R(){z.legend.fps!==D&&(z.legend.fps=D,z.legend[p]=D?"FPS":"ms"),O=D?C.fps:C.duration,z.count[p]=O>999?"999+":O.toFixed(O>99?0:M.decimals)}function B(){if(v=s(),j<v-M.threshold&&(C.fps-=C.fps/Math.max(1,60*M.smoothing/M.interval),C.duration=1e3/C.fps),function(){for(S=M.history;S--;)I[S]=0===S?C.fps:I[S-1],q[S]=0===S?C.duration:q[S-1]}(),R(),M.heat){if(P.length)for(S=P.length;S--;)P[S].el.style[x[P[S].name].heatOn]=D?L(x[P[S].name].heatmap,C.fps,0,M.maxFps):L(x[P[S].name].heatmap,C.duration,M.threshold,0);if(z.graph&&x.column.heatOn)for(S=A.length;S--;)A[S].style[x.column.heatOn]=D?L(x.column.heatmap,I[S],0,M.maxFps):L(x.column.heatmap,q[S],M.threshold,0)}if(z.graph)for(F=0;F<M.history;F++)A[F].style.height=(D?I[F]?Math.round(k/M.maxFps*Math.min(I[F],M.maxFps)):0:q[F]?Math.round(k/M.threshold*Math.min(q[F],M.threshold)):0)+"px"}function N(){M.interval<20?(w=c(N),B()):(w=setTimeout(N,M.interval),y=c(B))}function V(t){(t=t||window.event).preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0),C.toggle()}function W(){M.toggleOn&&l(z.container,M.toggleOn,V,1),t.removeChild(z.container)}function G(){for(var n in z.container&&W(),function(){if(x=d.theme[M.theme],!(b=x.compiledHeatmaps||[]).length&&x.heatmaps.length){for(F=0;F<x.heatmaps.length;F++)for(b[F]=[],S=0;S<=E;S++)b[F][S]=(t=.33/E*S,n=x.heatmaps[F].saturation,e=x.heatmaps[F].lightness,o=void 0,a=void 0,i=void 0,r=void 0,l=void 0,s=void 0,u=void 0,0==(r=e<=.5?e*(1+n):e+n-e*n)?"#000":(u=r*((r-(l=2*e-r))/r)*((t*=6)-(s=Math.floor(t))),0===s||6===s?(o=r,a=l+u,i=l):1===s?(o=r-u,a=r,i=l):2===s?(o=l,a=r,i=l+u):3===s?(o=l,a=r-u,i=r):4===s?(o=l+u,a=l,i=r):(o=r,a=l,i=r-u),"#"+h(o)+h(a)+h(i)));x.compiledHeatmaps=b}var t,n,e,o,a,i,r,l,s,u}(),z.container=o(e("div"),x.container),z.count=z.container.appendChild(o(e("div"),x.count)),z.legend=z.container.appendChild(o(e("div"),x.legend)),z.graph=M.graph?z.container.appendChild(o(e("div"),x.graph)):0,P.length=0,z)z[n]&&x[n].heatOn&&P.push({name:n,el:z[n]});if(A.length=0,z.graph)for(z.graph.style.width=M.history*x.column.width+(M.history-1)*x.column.spacing+"px",S=0;S<M.history;S++)A[S]=z.graph.appendChild(o(e("div"),x.column)),A[S].style.position="absolute",A[S].style.bottom=0,A[S].style.right=S*x.column.width+S*x.column.spacing+"px",A[S].style.width=x.column.width+"px",A[S].style.height="0px";J(),R(),t.appendChild(z.container),z.graph&&(k=z.graph.clientHeight),M.toggleOn&&("click"===M.toggleOn&&(z.container.style.cursor="pointer"),l(z.container,M.toggleOn,V))}function J(){o(z.container,M)}C.options=M,C.fps=0,C.duration=0,C.isPaused=0,C.tickStart=function(){T=s()},C.tick=function(){v=s(),H+=(v-j-H)/M.smoothing,C.fps=1e3/H,C.duration=T<j?H:v-T,j=v},C.pause=function(){return w&&(C.isPaused=1,clearTimeout(w),u(w),u(y),w=y=0),C},C.resume=function(){return w||(C.isPaused=0,N()),C},C.set=function(t,n){return M[t]=n,D="fps"===M.show,-1!==i(t,g)&&G(),-1!==i(t,f)&&J(),C},C.showDuration=function(){return C.set("show","ms"),C},C.showFps=function(){return C.set("show","fps"),C},C.toggle=function(){return C.set("show",D?"ms":"fps"),C},C.hide=function(){return C.pause(),z.container.style.display="none",C},C.show=function(){return C.resume(),z.container.style.display="block",C},C.destroy=function(){C.pause(),W(),C.tick=C.tickStart=function(){}},G(),N()}d.extend=r,window.FPSMeter=d,d.defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20};var g=["toggleOn","theme","heat","graph","history"],f=["position","zIndex","left","top","right","bottom","margin"]}(window),function(t,n,e){"use strict";n.theme={};var o=n.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};n.theme.dark=n.extend({},o,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"#222",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),n.theme.light=n.extend({},o,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),n.theme.colorful=n.extend({},o,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),n.theme.transparent=n.extend({},o,{heatmaps:[{saturation:.8,lightness:.5}],container:{padding:0,color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.5)"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},legend:{padding:"0 5px",height:"40px",lineHeight:"42px"},graph:{height:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})}(window,FPSMeter);