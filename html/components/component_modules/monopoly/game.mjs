import monopoly from"./monopoly.mjs";import mInterface from"./interface.mjs";import square from"./square.mjs";import classicedition from"./classicedition.mjs";import gameplay from"./gameplay.mjs";import ai from"./ai.mjs";export default{get:async(e,t,...r)=>new Promise(async(t,r)=>{function n(e){t(e)}switch(e.type){case"resetTrade":(async(e,t,r)=>{let a,l,o,i,d,c,s,p;t.currentSquare={},t.currentTableRow={},t.currentTableCell={},t.currentTableCellCheckbox={},t.nameSelect={},t.currentOption={},t.allGroupUninproved={},t.currentName={};let y=function(e){t.this.querySelector("#proposetradebutton").style.display="flex",t.this.querySelector("#canceltradebutton").style.display="flex",t.this.querySelector("#accepttradebutton").style.display="none",t.this.querySelector("#rejecttradebutton").style.display="none"},u=function(e){let r=e.target.parentNode;r=r.querySelector("input"),t.checkboxElement=r,t.checkboxElement!==e.srcElement&&(t.checkboxElement.checked=!t.checkboxElement.checked),t.this.querySelector("#proposetradebutton").style.display="flex",t.this.querySelector("#canceltradebutton").style.display="flex",t.this.querySelector("#accepttradebutton").style.display="none",t.this.querySelector("#rejecttradebutton").style.display="none"},m=t.this.getElementById("trade-leftp-property"),g=t.this.getElementById("trade-rightp-property");for(t.tradeObj.currentInitiator=t.tradeObj.initiator,t.tradeObj.currentRecipient=t.tradeObj.recipient;m.lastChild;)m.removeChild(m.lastChild);for(;g.lastChild;)g.removeChild(g.lastChild);let h=document.createElement("table"),b=document.createElement("table");for(let r=0;r<40;r++){if((a=t.square[r]).house>0||0===a.groupNumber)continue;s=!0;let n=a.group.length;for(let e=0;e<n;e++)if(t.square[a.group[e]].house>0){s=!1;break}s&&(a.owner===e.initiator.index?((l=h.appendChild(document.createElement("tr"))).addEventListener("click",u),(o=l.appendChild(document.createElement("td"))).className="propertycellcheckbox",(i=o.appendChild(document.createElement("input"))).type="checkbox",i.id="tradeleftcheckbox"+r,i.title="Check this box to include "+a.name+" in the trade.",(o=l.appendChild(document.createElement("td"))).className="propertycellcolor",o.setAttribute("show",r),o.style.backgroundColor=a.color,1==a.groupNumber||2==a.groupNumber?o.style.borderColor="grey":o.style.borderColor=a.color,o.propertyIndex=r,o.onmouseover=async function(e){console.assert(!1,e.target.getAttribute("show")),await mInterface.get({type:"showdeed",property:e.target.getAttribute("show")},t)},o.onmouseout=function(e){t.this.querySelector("#deed").style.display="none"},(o=l.appendChild(document.createElement("td"))).className="propertycellname",a.mortgage&&(o.title="Mortgaged",o.style.color="grey"),o.textContent=a.name):a.owner===t.tradeObj.recipient.index&&((l=b.appendChild(document.createElement("tr"))).addEventListener("click",u),(o=l.appendChild(document.createElement("td"))).className="propertycellcheckbox",(i=o.appendChild(document.createElement("input"))).type="checkbox",i.id="traderightcheckbox"+r,i.title="Check this box to include "+a.name+" in the trade.",(o=l.appendChild(document.createElement("td"))).className="propertycellcolor",o.setAttribute("show",r),o.style.backgroundColor=a.color,1==a.groupNumber||2==a.groupNumber?o.style.borderColor="grey":o.style.borderColor=a.color,o.propertyIndex=r,o.onmouseover=async function(e){console.assert(!1),await mInterface.get({type:"showdeed",property:e.target.getAttribute("show")},t)},o.onmouseout=function(){t.this.querySelector("#deed").style.display="none"},(o=l.appendChild(document.createElement("td"))).className="propertycellname",a.mortgage&&(o.title="Mortgaged",o.style.color="grey"),o.textContent=a.name))}if(t.tradeObj.initiator.communityChestJailCard?((l=h.appendChild(document.createElement("tr"))).addEventListener("click",u),(o=l.appendChild(document.createElement("td"))).className="propertycellcheckbox",(i=o.appendChild(document.createElement("input"))).type="checkbox",i.id="tradeleftcheckbox40",i.title="Check this box to include this Get Out of Jail Free Card in the trade.",(o=l.appendChild(document.createElement("td"))).className="propertycellcolor",o.style.backgroundColor="white",o.style.borderColor="grey",(o=l.appendChild(document.createElement("td"))).className="propertycellname",o.textContent="Get Out of Jail Free Card"):t.tradeObj.recipient.communityChestJailCard&&((l=b.appendChild(document.createElement("tr"))).addEventListener("click",u),(o=l.appendChild(document.createElement("td"))).className="propertycellcheckbox",(i=o.appendChild(document.createElement("input"))).type="checkbox",i.id="traderightcheckbox40",i.title="Check this box to include this Get Out of Jail Free Card in the trade.",(o=l.appendChild(document.createElement("td"))).className="propertycellcolor",o.style.backgroundColor="white",o.style.borderColor="grey",(o=l.appendChild(document.createElement("td"))).className="propertycellname",o.textContent="Get Out of Jail Free Card"),t.tradeObj.initiator.chanceJailCard?((l=h.appendChild(document.createElement("tr"))).addEventListener("click",u),(o=l.appendChild(document.createElement("td"))).className="propertycellcheckbox",(i=o.appendChild(document.createElement("input"))).type="checkbox",i.id="tradeleftcheckbox41",i.title="Check this box to include this Get Out of Jail Free Card in the trade.",(o=l.appendChild(document.createElement("td"))).className="propertycellcolor",o.style.backgroundColor="white",o.style.borderColor="grey",(o=l.appendChild(document.createElement("td"))).className="propertycellname",o.textContent="Get Out of Jail Free Card"):t.tradeObj.recipient.chanceJailCard&&((l=b.appendChild(document.createElement("tr"))).addEventListener("click",u),(o=l.appendChild(document.createElement("td"))).className="propertycellcheckbox",(i=o.appendChild(document.createElement("input"))).type="checkbox",i.id="traderightcheckbox41",i.title="Check this box to include this Get Out of Jail Free Card in the trade.",(o=l.appendChild(document.createElement("td"))).className="propertycellcolor",o.style.backgroundColor="white",o.style.borderColor="grey",(o=l.appendChild(document.createElement("td"))).className="propertycellname",o.textContent="Get Out of Jail Free Card"),h.lastChild?m.appendChild(h):m.textContent=t.tradeObj.initiator.name+" has no properties to trade.",b.lastChild?g.appendChild(b):g.textContent=t.tradeObj.recipient.name+" has no properties to trade.",t.this.getElementById("trade-leftp-name").textContent=t.tradeObj.initiator.name,p=t.this.getElementById("trade-rightp-name"),e.allowRecipientToBeChanged&&t.pcount>2){for(;p.lastChild;)p.removeChild(p.lastChild);d=p.appendChild(document.createElement("select"));for(let e=1;e<=t.pcount;e++)e!==t.tradeObj.initiator.index&&((c=d.appendChild(document.createElement("option"))).value=e+"",c.style.color=t.player[e].color,c.textContent=t.player[e].name,e===t.tradeObj.recipient.index&&(c.selected="selected"));d.onchange=async function(e){let r=parseInt(e.target.value,10);await mInterface.get({type:"getTrade"},t),t.tradeObj.recipient=t.player[r],t.tradeObj.currentRecipient=t.player[r],await gameplay.get({type:"resetTrade",initiator:t.tradeObj.currentInitiator,recipient:t.player[r],allowRecipientToBeChanged:!0},t)},d.title="Select a player to trade with."}else p.textContent=t.tradeObj.recipient.name;t.this.getElementById("trade-leftp-money").value="0",t.this.getElementById("trade-leftp-money").addEventListener("input",y),t.this.getElementById("trade-rightp-money").value="0",t.this.getElementById("trade-rightp-money").addEventListener("input",y),n(!0)})(e,t);break;case"monopoly":let t={tradeObj:{},die1:null,die2:null,areDiceRolled:!1,auctionQueue:[],highestbidder:null,highestbid:0,currentbidder:1,auctionproperty:null,game:null};t.tradeObj.currentInitiator=null,t.tradeObj.currentRecipient=null,t.tradeObj.initiator=null,t.tradeObj.recipient=null,t.player=[],t.communityChestCards=[],t.chanceCards=[],t.square=[],t.pcount=null,t.turn=0,t.doublecount=0,t.bid=null,t.this=e.this.shadowRoot,t.checkedproperty=-1;let r=e.this.shadowRoot;r.querySelector("#trade-leftp-money").onkeydown=d,r.querySelector("#trade-rightp-money").onkeydown=d,r.querySelector("#trade-leftp-money").onfocus=i,r.querySelector("#trade-rightp-money").onfocus=i,r.querySelector("#trade-leftp-money").onchange=o,r.querySelector("#trade-rightp-money").onchange=o;for(let e=0;e<=8;e++)t.player[e]=await mInterface.get({type:"player",color:""}),t.player[e].index=e;t.groupPropertyArray=[],t.groupNumber={},t=await square.get({type:"classic"},t);for(var a=0;a<40;a++)t.groupNumber=t.square[a].groupNumber,t.groupNumber>0&&(t.groupPropertyArray[t.groupNumber]||(t.groupPropertyArray[t.groupNumber]=[]),t.groupPropertyArray[t.groupNumber].push(a));for(let e=0;e<40;e++)t.groupNumber=t.square[e].groupNumber,t.groupNumber>0&&(t.square[e].group=t.groupPropertyArray[t.groupNumber]),t.square[e].index=e;t.player[1].human=!0,t.player[0].name="the bank",t.communityChestCards.index=0,t.chanceCards.index=0,t.communityChestCards.deck=[],t.chanceCards.deck=[];for(a=0;a<16;a++)t.chanceCards.deck[a]=a,t.communityChestCards.deck[a]=a;async function l(e){e.pcount=parseInt(r.querySelector("#playernumber").value,10);let t=r.querySelectorAll(".player-input");for(let r=0;r<t.length;r++)e.pcount>r?t[r].style.display="flex":t[r].style.display="none"}t.communityChestCards.deck.sort(function(){return Math.random()-.5}),t.chanceCards.deck.sort(function(){return Math.random()-.5}),r.querySelector("#playernumber").addEventListener("change",l),l(t),r.querySelector("#nextbutton").addEventListener("click",async e=>{mInterface.get({type:"next",player:t.player[t.turn]},t)});r.querySelector("#setup"),r.querySelector("#noF5");let c=r.appendChild(document.createElement("div"));c.id="enlarge-wrap";let s,p,y,u,m,g,h,b,f,w,v,C="";for(let e=0;e<40;e++)C+="<div id='enlarge"+e+"' class='enlarge'>",C+="<div id='enlarge"+e+"color' class='enlarge-color'></div><br /><div id='enlarge"+e+"name' class='enlarge-name'></div>",C+="<br /><div id='enlarge"+e+"price' class='enlarge-price'></div>",C+="<br /><div id='enlarge"+e+"token' class='enlarge-token'></div></div>";c.innerHTML=C;for(a=0;a<40;a++){let e=t.square[a];(p=(s=r.getElementById("cell"+a)).appendChild(document.createElement("div"))).id="cell"+a+"anchor",p.className="cell-anchor",(y=p.appendChild(document.createElement("div"))).id="cell"+a+"positionholder",y.className="cell-position-holder",y.enlargeId="enlarge"+a,(u=p.appendChild(document.createElement("div"))).id="cell"+a+"name",u.className="cell-name",u.textContent=e.name,t.square[a].groupNumber&&((m=p.appendChild(document.createElement("div"))).id="cell"+a+"owner",m.className="cell-owner"),r.getElementById("enlarge"+a+"color").style.backgroundColor=e.color,r.getElementById("enlarge"+a+"name").textContent=e.name,r.getElementById("enlarge"+a+"price").textContent=e.pricetext}r.getElementById("enlarge0token").innerHTML+='<img src="./static/html/components/main-manager/images/arrow_icon.png" width="50%" alt="" />',r.getElementById("enlarge20price").innerHTML+="<img src='./static/html/components/main-manager/images/free_parking_icon.png'  width='50%' alt='' style='position: relative; top: -1.953vw;' />",r.getElementById("enlarge38token").innerHTML+='<img src="./static/html/components/main-manager/images/tax_icon.png"  width="50%" alt="" style="position: relative; top: -1.953vw;" />',await classicedition.get({type:"corrections"},t),r.querySelector("#jailpositionholder"),r.querySelector("#jail"),r.querySelector("#jail").insertAdjacentHTML("afterbegin",'<div id="jailpositionholder"></div><span>Jail</span>'),r.getElementById("jail").enlargeId="enlarge40",r.getElementById("enlarge-wrap").innerHTML+="<div id='enlarge40' class='enlarge'><div id='enlarge40color' class='enlarge-color'></div><br /><div id='enlarge40name' class='enlarge-name'>Jail</div><br /><div id='enlarge40price' class='enlarge-price'><img src='./static/html/components/main-manager/images/jake_icon.png' width='50%' alt='' style='position: relative; top: -1.953vw;' /></div><br /><div id='enlarge40token' class='enlarge-token'></div></div>",r.getElementById("enlarge40name").innerHTML="Jail";let E=r.querySelectorAll(".cell-position-holder"),x=r.querySelectorAll("#jail");for(let e=0;e<x.length;e++)x[e].addEventListener("mouseover",async e=>{void 0===e.target.enlargeId||(r.querySelector(`#${e.target.enlargeId}`).style.display="flex")}),x[e].addEventListener("mousemove",async e=>{if(void 0===e.target.enlargeId);else{let t=r.querySelector(`#${e.target.enlargeId}`);e.clientY+20>window.innerHeight-204?t.style.top=window.innerHeight-204+"px":t.style.top=e.clientY+20+"px",t.style.left=e.clientX+10+"px"}}),x[e].addEventListener("mouseout",async e=>{void 0===e.target.enlargeId||(r.querySelector(`#${e.target.enlargeId}`).style.display="none")});for(let e=0;e<E.length;e++)E[e].addEventListener("mouseover",async e=>{console.log("33333333333333",e.target.enlargeId),void 0===e.target.enlargeId||(r.querySelector(`#${e.target.enlargeId}`).style.display="flex")}),E[e].addEventListener("mousemove",async e=>{if(void 0===e.target.enlargeId);else{let t=r.querySelector(`#${e.target.enlargeId}`);e.clientY+20>window.innerHeight-204?t.style.top=window.innerHeight-204+"px":t.style.top=e.clientY+20+"px",t.style.left=e.clientX+10+"px"}}),E[e].addEventListener("mouseout",async e=>{void 0===e.target.enlargeId||(r.querySelector(`#${e.target.enlargeId}`).style.display="none")});r.querySelector("#main-manager").addEventListener("mousemove",async e=>{let t;e.target?t=e.target:window.event&&window.event.srcElement&&(t=window.event.srcElement),t.classList.contains("propertycellcolor")||t.classList.contains("statscellcolor")?(e.clientY+20>window.innerHeight-279?r.getElementById("deed").style.top=window.innerHeight-279+"px":r.getElementById("deed").style.top=e.clientY+20+"px",r.getElementById("deed").style.left=e.clientX+10+"px"):g&&(e?(f.style.left=v+e.clientX-h+"px",f.style.top=w+e.clientY-b+"px"):window.event&&(f.style.left=v+window.event.clientX-h+"px",f.style.top=w+window.event.clientY-b+"px"))}),document.querySelector("body").addEventListener("mouseup",e=>{g=!1}),r.querySelector("#playGame").addEventListener("click",async e=>{let n;t.this.querySelector("#moneybarwrap").style.display="flex",t.pcount=parseInt(r.getElementById("playernumber").value,10),t.playerArray=new Array(t.pcount),(async e=>{let t,r=e.playerArray.length,n=[];for(let e=0;e<r;e++)n[e]=e;e.indexArray=[];for(let a=0;a<r;a++)t=Math.floor(Math.random()*n.length),e.indexArray[a]=n[t]+1,n.splice(t,1)})(t),t.playerArray=t.indexArray;for(let e=1;e<=t.pcount;e++)(n=t.player[t.playerArray[e-1]]).color=r.querySelector(`#player${e}color`).value.toLowerCase(),"0"===r.getElementById("player"+e+"ai").value?(n.name=r.getElementById("player"+e+"name").value,n.human=!0):"1"===r.getElementById("player"+e+"ai").value&&(n.human=!1,await ai.get({type:"AITest",player:n},t));r.querySelector("#board").style.display="flex",r.querySelector("#moneybar").style.display="flex",r.querySelector("#setup").style.display="none",2===t.pcount?r.getElementById("stats").style.width="454px":3===t.pcount&&(r.getElementById("stats").style.width="686px"),r.getElementById("stats").style.top="0",r.getElementById("stats").style.left="0",(async e=>{e.turn++,e.turn>e.pcount&&(e.turn-=e.pcount);let t=e.player[e.turn];if(e=await monopoly.get({type:"resetDice"},e),r.getElementById("pname").innerHTML=t.name,await mInterface.get({type:"addAlert",value:`It is ${t.name} 's turn`},e),t.pay(0,t.creditor,e),r.querySelector("#landed").style.display="none",r.querySelector("#option").style.display="none",r.querySelector("#manage").style.display="none",r.querySelector("#board").style.display="flex",r.querySelector("#control").style.display="flex",r.querySelector("#moneybar").style.display="flex",r.querySelector("#viewstats").style.display="flex",r.querySelector("#buy").style.display="flex",e.doublecount=0,t.human&&r.getElementById("nextbutton").focus(),r.getElementById("nextbutton").value="Roll Dice",r.getElementById("nextbutton").title="Roll the dice and move your token accordingly.",r.querySelector("#die0").style.display="none",r.querySelector("#die1").style.display="none",t.jail){r.querySelector("#landed").style.display="flex";r.getElementById("landed").innerHTML="You are in jail.<input id='landedItemJail' type='button' title='Pay $50 fine to get out of jail immediately.' value='Pay $50 fine' />",r.querySelector("landedItemJail").addEventListener("click",async()=>{await mInterface.get({type:"payFifty"},e)}),(t.communityChestJailCard||t.chanceJailCard)&&(r.getElementById("landed").innerHTML+="<input type='button' id='gojfbutton' title='Use &quot;Get Out of Jail Free&quot; card.' value='Use Card' />",r.querySelector("gojfbutton").addEventListener("click",async()=>{await mInterface.get({type:"useJailCard"},e)})),r.getElementById("nextbutton").title="Roll the dice. If you throw doubles, you will get out of jail.",0===t.jailroll?await mInterface.get({type:"addAlert",value:`This is ${t.name} 's first turn in jail.`},e):1===t.jailroll?await mInterface.get({type:"addAlert",value:`This is ${t.name} 's second turn in jail.`},e):2===t.jailroll&&(r.getElementById("landed").innerHTML+="<div>NOTE: If you do not throw doubles after this roll, you <i>must</i> pay the $50 fine.</div>",await mInterface.get({type:"addAlert",value:`This is ${t.name} 's third turn in jail.`},e)),!t.human&&t.AI.postBail()&&(t.communityChestJailCard||t.chanceJailCard?await mInterface.get({type:"useJailCard"},e):await mInterface.get({type:"payFifty"},e))}await gameplay.get({type:"updateMoney"},e),await gameplay.get({type:"updatePosition"},e),await gameplay.get({type:"updateOwned"},e);let n=r.querySelectorAll(".money-bar-arrow");for(let t=0;t<n.length;t++)e.currentbidder===t||(n[t].style.display="none");t.human||await ai.get({type:"beforeTurn",player:t},e)||await mInterface.get({type:"next",player:t},e)})(t)}),r.getElementById("statsdrag").onmousedown=async function(e){(f=r.getElementById("stats")).style.position="relative",w=parseInt(f.style.top,10)||0,v=parseInt(f.style.left,10)||0,window.event?(h=window.event.clientX,b=window.event.clientY):e&&(h=e.clientX,b=e.clientY),g=!0},r.getElementById("popupdrag").onmousedown=async function(e){(f=r.getElementById("popup")).style.position="relative",w=parseInt(f.style.top,10)||0,v=parseInt(f.style.left,10)||0,window.event?(h=window.event.clientX,b=window.event.clientY):e&&(h=e.clientX,b=e.clientY),g=!0},r.querySelector("#mortgagebutton").addEventListener("click",async e=>{let r=await mInterface.get({type:"getCheckedProperty"},t),n=t.square[r];n.mortgage?t.player[n.owner].money<Math.round(.6*n.price)?await mInterface.get({type:"popup",HTML:`<p>You need $ ${Math.round(.6*n.price)-t.player[n.owner].money}  more to unmortgage ${n.name} .</p>`},t):await mInterface.get({type:"popup",HTML:`<p>${t.player[n.owner].name}  are you sure you want to unmortgage ${n.name} for $ ${Math.round(.6*n.price)} ? .</p>`,action:async(e,t)=>{await mInterface.get({type:"unmortgage",index:r},t)},option:"Yes/No"},t):await mInterface.get({type:"popup",HTML:`<p>${t.player[n.owner].name}  are you sure you want to unmortgage ${n.name} for $ ${Math.round(.5*n.price)} ? .</p>`,action:async(e,t)=>{await mInterface.get({type:"mortgage",index:r},t)},option:"Yes/No"},t)}),r.querySelector("#buyhousebutton").addEventListener("click",async e=>{let a=(()=>{for(let e=0;e<42;e++)if(r.getElementById("propertycheckbox"+e)&&r.getElementById("propertycheckbox"+e).checked)return e;return-1})(),l=t.square[a],o=0,i=0;t.player[l.owner].money<l.houseprice&&(4===l.house?(popup("<p>You need $"+(l.houseprice-player[l.owner].money)+" more to buy a hotel for "+l.name+".</p>"),await mInterface.get({type:"popup",HTML:"<p>You need $"+(l.houseprice-t.player[l.owner].money)+" more to buy a hotel for "+l.name+".</p>"},t),n(t)):(await mInterface.get({type:"popup",HTML:"<p>You need $"+(l.houseprice-t.player[l.owner].money)+" more to buy a house for "+l.name+".</p>"},t),n(t)));for(let e=0;e<40;e++)1===t.square[e].hotel?i++:o+=t.square[e].house;l.house<4&&o>=32?(await mInterface.get({type:"popup",HTML:"<p>All 32 houses are owned. You must wait until one becomes available.</p>"},t),n(t)):4===l.house&&i>=12&&(await mInterface.get({type:"popup",HTML:"<p>All 12 hotels are owned. You must wait until one becomes available.</p>"},t),n(t)),await monopoly.get({type:"buyHouse",index:a},t)}),r.querySelector("#statsclose").addEventListener("click",async e=>{t.this.querySelector("#statswrap").style.display="none",t.this.querySelector("#statsbackground").style.display="none"}),r.querySelector("#statsbackground").addEventListener("click",async e=>{t.this.querySelector("#statswrap").style.display="none",t.this.querySelector("#statsbackground").style.display="none"}),r.querySelector("#buy-menu-item").addEventListener("click",async e=>{r.querySelector("#buy").style.display="flex",r.querySelector("#manage").style.display="none"}),r.querySelector("#manage-menu-item").addEventListener("click",async e=>{r.querySelector("#buy").style.display="none",r.querySelector("#manage").style.display="flex"}),r.querySelector("#sellhousebutton").addEventListener("click",async e=>{let n=(()=>{for(let e=0;e<42;e++)if(r.getElementById("propertycheckbox"+e)&&r.getElementById("propertycheckbox"+e).checked)return e;return-1})();await monopoly.get({type:"sellHouse",index:n},t)}),r.querySelector("#viewstats").addEventListener("click",async e=>{gameplay.get({type:"showStats"},t)}),r.querySelector("#trade-menu-item").addEventListener("click",async e=>{await gameplay.get({type:"trade",tradeObj:null},t)});var o=function(e){console.log("~~~~~~~tradeMoneyOnChange~~~~~~~"),t.this.querySelector("#proposetradebutton").style.display="flex",t.this.querySelector("#canceltradebutton").style.display="flex",t.this.querySelector("#accepttradebutton").style.display="none",t.this.querySelector("#rejecttradebutton").style.display="none";var r=this.value;return isNaN(r)?(this.value="This value must be a number.",this.style.color="red",!1):(r=Math.round(r)||0,this.value=r,!(r<0)||(this.value="This value must be greater than 0.",this.style.color="red",!1))},i=function(){console.log("~~~~~~~tradeMoneyOnFocus~~~~~~~"),this.style.color="black",(isNaN(this.value)||"0"===this.value)&&(this.value="")},d=function(e){console.log("~~~~~~~tradeMoneyOnKeyDown~~~~~~~");var t=0,r=!1,n=!1;return window.event?(t=window.event.keyCode,r=window.event.ctrlKey,n=window.event.shiftKey):e&&(t=e.keyCode,r=e.ctrlKey,n=e.shiftKey),!!isNaN(t)||13!==t&&(!!(8===t||9===t||46===t||t>=35&&t<=40||r)||!n&&(t>=48&&t<=57||t>=96&&t<=105))};n(t)}})};