import monopoly from"/static/html/components/component_modules/monopoly/monopoly.mjs";import mInterface from"/static/html/components/component_modules/monopoly/interface.mjs";import square from"/static/html/components/component_modules/monopoly/square.mjs";import classicedition from"/static/html/components/component_modules/monopoly/classicedition.mjs";import gameplay from"/static/html/components/component_modules/monopoly/gameplay.mjs";import ai from"/static/html/components/component_modules/monopoly/ai.mjs";export default{get:async(e,t,...r)=>new Promise(async(t,r)=>{function o(e){t(e)}switch(e.type){case"resetTrade":(async(e,t,r)=>{let n,l,a,c,d,i,p,s;t.currentSquare={},t.currentTableRow={},t.currentTableCell={},t.currentTableCellCheckbox={},t.nameSelect={},t.currentOption={},t.allGroupUninproved={},t.currentName={};let m=function(e){t.this.querySelector("#proposetradebutton").style.display="flex",t.this.querySelector("#canceltradebutton").style.display="flex",t.this.querySelector("#accepttradebutton").style.display="none",t.this.querySelector("#rejecttradebutton").style.display="none"},u=function(e){let r=e.target.parentNode;r=r.querySelector("input"),t.checkboxElement=r,t.checkboxElement!==e.srcElement&&(t.checkboxElement.checked=!t.checkboxElement.checked),t.this.querySelector("#proposetradebutton").style.display="flex",t.this.querySelector("#canceltradebutton").style.display="flex",t.this.querySelector("#accepttradebutton").style.display="none",t.this.querySelector("#rejecttradebutton").style.display="none"},h=t.this.getElementById("trade-leftp-property"),y=t.this.getElementById("trade-rightp-property");for(t.tradeObj.currentInitiator=t.tradeObj.initiator,t.tradeObj.currentRecipient=t.tradeObj.recipient;h.lastChild;)h.removeChild(h.lastChild);for(;y.lastChild;)y.removeChild(y.lastChild);let C=document.createElement("table"),b=document.createElement("table");for(let r=0;r<40;r++){if((n=t.square[r]).house>0||0===n.groupNumber)continue;p=!0;let o=n.group.length;for(let e=0;e<o;e++)if(t.square[n.group[e]].house>0){p=!1;break}p&&(n.owner===e.initiator.index?((l=C.appendChild(document.createElement("tr"))).addEventListener("click",u),(a=l.appendChild(document.createElement("td"))).className="propertycellcheckbox",(c=a.appendChild(document.createElement("input"))).type="checkbox",c.id="tradeleftcheckbox"+r,c.title="Check this box to include "+n.name+" in the trade.",(a=l.appendChild(document.createElement("td"))).className="propertycellcolor",a.setAttribute("show",r),a.style.backgroundColor=n.color,1==n.groupNumber||2==n.groupNumber?a.style.borderColor="grey":a.style.borderColor=n.color,a.propertyIndex=r,a.onmouseover=async function(e){console.assert(!1,e.target.getAttribute("show")),await mInterface.get({type:"showdeed",property:e.target.getAttribute("show")},t)},a.onmouseout=function(e){t.this.querySelector("#deed").style.display="none"},(a=l.appendChild(document.createElement("td"))).className="propertycellname",n.mortgage&&(a.title="Mortgaged",a.style.color="grey"),a.textContent=n.name):n.owner===t.tradeObj.recipient.index&&((l=b.appendChild(document.createElement("tr"))).addEventListener("click",u),(a=l.appendChild(document.createElement("td"))).className="propertycellcheckbox",(c=a.appendChild(document.createElement("input"))).type="checkbox",c.id="traderightcheckbox"+r,c.title="Check this box to include "+n.name+" in the trade.",(a=l.appendChild(document.createElement("td"))).className="propertycellcolor",a.setAttribute("show",r),a.style.backgroundColor=n.color,1==n.groupNumber||2==n.groupNumber?a.style.borderColor="grey":a.style.borderColor=n.color,a.propertyIndex=r,a.onmouseover=async function(e){console.assert(!1),await mInterface.get({type:"showdeed",property:e.target.getAttribute("show")},t)},a.onmouseout=function(){t.this.querySelector("#deed").style.display="none"},(a=l.appendChild(document.createElement("td"))).className="propertycellname",n.mortgage&&(a.title="Mortgaged",a.style.color="grey"),a.textContent=n.name))}if(t.tradeObj.initiator.communityChestJailCard?((l=C.appendChild(document.createElement("tr"))).addEventListener("click",u),(a=l.appendChild(document.createElement("td"))).className="propertycellcheckbox",(c=a.appendChild(document.createElement("input"))).type="checkbox",c.id="tradeleftcheckbox40",c.title="Check this box to include this Get Out of Jail Free Card in the trade.",(a=l.appendChild(document.createElement("td"))).className="propertycellcolor",a.style.backgroundColor="white",a.style.borderColor="grey",(a=l.appendChild(document.createElement("td"))).className="propertycellname",a.textContent="Get Out of Jail Free Card"):t.tradeObj.recipient.communityChestJailCard&&((l=b.appendChild(document.createElement("tr"))).addEventListener("click",u),(a=l.appendChild(document.createElement("td"))).className="propertycellcheckbox",(c=a.appendChild(document.createElement("input"))).type="checkbox",c.id="traderightcheckbox40",c.title="Check this box to include this Get Out of Jail Free Card in the trade.",(a=l.appendChild(document.createElement("td"))).className="propertycellcolor",a.style.backgroundColor="white",a.style.borderColor="grey",(a=l.appendChild(document.createElement("td"))).className="propertycellname",a.textContent="Get Out of Jail Free Card"),t.tradeObj.initiator.chanceJailCard?((l=C.appendChild(document.createElement("tr"))).addEventListener("click",u),(a=l.appendChild(document.createElement("td"))).className="propertycellcheckbox",(c=a.appendChild(document.createElement("input"))).type="checkbox",c.id="tradeleftcheckbox41",c.title="Check this box to include this Get Out of Jail Free Card in the trade.",(a=l.appendChild(document.createElement("td"))).className="propertycellcolor",a.style.backgroundColor="white",a.style.borderColor="grey",(a=l.appendChild(document.createElement("td"))).className="propertycellname",a.textContent="Get Out of Jail Free Card"):t.tradeObj.recipient.chanceJailCard&&((l=b.appendChild(document.createElement("tr"))).addEventListener("click",u),(a=l.appendChild(document.createElement("td"))).className="propertycellcheckbox",(c=a.appendChild(document.createElement("input"))).type="checkbox",c.id="traderightcheckbox41",c.title="Check this box to include this Get Out of Jail Free Card in the trade.",(a=l.appendChild(document.createElement("td"))).className="propertycellcolor",a.style.backgroundColor="white",a.style.borderColor="grey",(a=l.appendChild(document.createElement("td"))).className="propertycellname",a.textContent="Get Out of Jail Free Card"),C.lastChild?h.appendChild(C):h.textContent=t.tradeObj.initiator.name+" has no properties to trade.",b.lastChild?y.appendChild(b):y.textContent=t.tradeObj.recipient.name+" has no properties to trade.",t.this.getElementById("trade-leftp-name").textContent=t.tradeObj.initiator.name,s=t.this.getElementById("trade-rightp-name"),e.allowRecipientToBeChanged&&t.pcount>2){for(;s.lastChild;)s.removeChild(s.lastChild);d=s.appendChild(document.createElement("select"));for(let e=1;e<=t.pcount;e++)e!==t.tradeObj.initiator.index&&((i=d.appendChild(document.createElement("option"))).value=e+"",i.style.color=t.player[e].color,i.textContent=t.player[e].name,e===t.tradeObj.recipient.index&&(i.selected="selected"));d.onchange=async function(e){let r=parseInt(e.target.value,10);await mInterface.get({type:"getTrade"},t),t.tradeObj.recipient=t.player[r],t.tradeObj.currentRecipient=t.player[r],await gameplay.get({type:"resetTrade",initiator:t.tradeObj.currentInitiator,recipient:t.player[r],allowRecipientToBeChanged:!0},t)},d.title="Select a player to trade with."}else s.textContent=t.tradeObj.recipient.name;t.this.getElementById("trade-leftp-money").value="0",t.this.getElementById("trade-leftp-money").addEventListener("input",m),t.this.getElementById("trade-rightp-money").value="0",t.this.getElementById("trade-rightp-money").addEventListener("input",m),o(!0)})(e,t);break;case"monopoly":let t={tradeObj:{},die1:null,die2:null,areDiceRolled:!1,auctionQueue:[],highestbidder:null,highestbid:0,currentbidder:1,auctionproperty:null,game:null};t.tradeObj.currentInitiator=null,t.tradeObj.currentRecipient=null,t.tradeObj.initiator=null,t.tradeObj.recipient=null,t.player=[],t.communityChestCards=[],t.chanceCards=[],t.square=[],t.pcount=null,t.turn=0,t.doublecount=0,t.bid=null,t.this=e.this.shadowRoot,t.checkedproperty=-1,o(t)}})};