import monopoly from"/static/html/components/component_modules/monopoly/monopoly.mjs";import mInterface from"/static/html/components/component_modules/monopoly/interface.mjs";import square from"/static/html/components/component_modules/monopoly/square.mjs";import classicedition from"/static/html/components/component_modules/monopoly/classicedition.mjs";import gameplay from"/static/html/components/component_modules/monopoly/gameplay.mjs";import ai from"/static/html/components/component_modules/monopoly/ai.mjs";export default{get:async(t,o,...r)=>new Promise(async(o,r)=>{function n(e){o(e)}switch(t.type){case"resetTrade":(async(e,t,o)=>{let r,a,l,d,i,c,p,s;t.currentSquare={},t.currentTableRow={},t.currentTableCell={},t.currentTableCellCheckbox={},t.nameSelect={},t.currentOption={},t.allGroupUninproved={},t.currentName={},console.assert(!1,t.this);let m=t.this.getElementById("trade-leftp-property"),u=t.this.getElementById("trade-rightp-property");for(t.tradeObj.currentInitiator=t.tradeObj.initiator,t.tradeObj.currentRecipient=t.tradeObj.recipient;m.lastChild;)m.removeChild(m.lastChild);for(;u.lastChild;)u.removeChild(u.lastChild);let h=document.createElement("table"),y=document.createElement("table");for(let o=0;o<40;o++){if((r=t.square[o]).house>0||0===r.groupNumber)continue;p=!0;let n=r.group.length;for(let e=0;e<n;e++)if(t.square[r.group[e]].house>0){p=!1;break}p&&(r.owner===e.initiator.index?((a=h.appendChild(document.createElement("tr"))).addEventListener("click",tableRowOnClick),(l=a.appendChild(document.createElement("td"))).className="propertycellcheckbox",(d=l.appendChild(document.createElement("input"))).type="checkbox",d.id="tradeleftcheckbox"+o,d.title="Check this box to include "+r.name+" in the trade.",(l=a.appendChild(document.createElement("td"))).className="propertycellcolor",l.setAttribute("show",o),l.style.backgroundColor=r.color,1==r.groupNumber||2==r.groupNumber?l.style.borderColor="grey":l.style.borderColor=r.color,l.propertyIndex=o,l.onmouseover=async function(e){console.assert(!1,e.target.getAttribute("show")),await mInterface.get({type:"showdeed",property:e.target.getAttribute("show")},t)},l.onmouseout=function(e){t.this.querySelector("#deed").style.display="none"},(l=a.appendChild(document.createElement("td"))).className="propertycellname",r.mortgage&&(l.title="Mortgaged",l.style.color="grey"),l.textContent=r.name):r.owner===t.tradeObj.recipient.index&&((a=y.appendChild(document.createElement("tr"))).addEventListener("click",tableRowOnClick),(l=a.appendChild(document.createElement("td"))).className="propertycellcheckbox",(d=l.appendChild(document.createElement("input"))).type="checkbox",d.id="traderightcheckbox"+o,d.title="Check this box to include "+r.name+" in the trade.",(l=a.appendChild(document.createElement("td"))).className="propertycellcolor",l.setAttribute("show",o),l.style.backgroundColor=r.color,1==r.groupNumber||2==r.groupNumber?l.style.borderColor="grey":l.style.borderColor=r.color,l.propertyIndex=o,l.onmouseover=async function(e){console.assert(!1),await mInterface.get({type:"showdeed",property:e.target.getAttribute("show")},t)},l.onmouseout=function(){t.this.querySelector("#deed").style.display="none"},(l=a.appendChild(document.createElement("td"))).className="propertycellname",r.mortgage&&(l.title="Mortgaged",l.style.color="grey"),l.textContent=r.name))}if(t.tradeObj.initiator.communityChestJailCard?((a=h.appendChild(document.createElement("tr"))).addEventListener("click",tableRowOnClick),(l=a.appendChild(document.createElement("td"))).className="propertycellcheckbox",(d=l.appendChild(document.createElement("input"))).type="checkbox",d.id="tradeleftcheckbox40",d.title="Check this box to include this Get Out of Jail Free Card in the trade.",(l=a.appendChild(document.createElement("td"))).className="propertycellcolor",l.style.backgroundColor="white",l.style.borderColor="grey",(l=a.appendChild(document.createElement("td"))).className="propertycellname",l.textContent="Get Out of Jail Free Card"):t.tradeObj.recipient.communityChestJailCard&&((a=y.appendChild(document.createElement("tr"))).addEventListener("click",tableRowOnClick),(l=a.appendChild(document.createElement("td"))).className="propertycellcheckbox",(d=l.appendChild(document.createElement("input"))).type="checkbox",d.id="traderightcheckbox40",d.title="Check this box to include this Get Out of Jail Free Card in the trade.",(l=a.appendChild(document.createElement("td"))).className="propertycellcolor",l.style.backgroundColor="white",l.style.borderColor="grey",(l=a.appendChild(document.createElement("td"))).className="propertycellname",l.textContent="Get Out of Jail Free Card"),t.tradeObj.initiator.chanceJailCard?((a=h.appendChild(document.createElement("tr"))).addEventListener("click",tableRowOnClick),(l=a.appendChild(document.createElement("td"))).className="propertycellcheckbox",(d=l.appendChild(document.createElement("input"))).type="checkbox",d.id="tradeleftcheckbox41",d.title="Check this box to include this Get Out of Jail Free Card in the trade.",(l=a.appendChild(document.createElement("td"))).className="propertycellcolor",l.style.backgroundColor="white",l.style.borderColor="grey",(l=a.appendChild(document.createElement("td"))).className="propertycellname",l.textContent="Get Out of Jail Free Card"):t.tradeObj.recipient.chanceJailCard&&((a=y.appendChild(document.createElement("tr"))).addEventListener("click",tableRowOnClick),(l=a.appendChild(document.createElement("td"))).className="propertycellcheckbox",(d=l.appendChild(document.createElement("input"))).type="checkbox",d.id="traderightcheckbox41",d.title="Check this box to include this Get Out of Jail Free Card in the trade.",(l=a.appendChild(document.createElement("td"))).className="propertycellcolor",l.style.backgroundColor="white",l.style.borderColor="grey",(l=a.appendChild(document.createElement("td"))).className="propertycellname",l.textContent="Get Out of Jail Free Card"),h.lastChild?m.appendChild(h):m.textContent=t.tradeObj.initiator.name+" has no properties to trade.",y.lastChild?u.appendChild(y):u.textContent=t.tradeObj.recipient.name+" has no properties to trade.",t.this.getElementById("trade-leftp-name").textContent=t.tradeObj.initiator.name,s=t.this.getElementById("trade-rightp-name"),e.allowRecipientToBeChanged&&t.pcount>2){for(;s.lastChild;)s.removeChild(s.lastChild);i=s.appendChild(document.createElement("select"));for(let e=1;e<=t.pcount;e++)e!==t.tradeObj.initiator.index&&((c=i.appendChild(document.createElement("option"))).value=e+"",c.style.color=t.player[e].color,c.textContent=t.player[e].name,e===t.tradeObj.recipient.index&&(c.selected="selected"));i.onchange=async function(e){let o=parseInt(e.target.value,10);await mInterface.get({type:"getTrade"},t),t.tradeObj.recipient=t.player[o],t.tradeObj.currentRecipient=t.player[o],await gameplay.get({type:"resetTrade",initiator:t.tradeObj.currentInitiator,recipient:t.player[o],allowRecipientToBeChanged:!0},t)},i.title="Select a player to trade with."}else s.textContent=t.tradeObj.recipient.name;t.this.getElementById("trade-leftp-money").value="0",t.this.getElementById("trade-leftp-money").addEventListener("input",tableRowOnClickLeftp),t.this.getElementById("trade-rightp-money").value="0",t.this.getElementById("trade-rightp-money").addEventListener("input",tableRowOnClickLeftp),n(!0)})(t,r);break;case"monopoly":let o={},r={tradeObj:{},die1:null,die2:null,areDiceRolled:!1,auctionQueue:[],highestbidder:null,highestbid:0,currentbidder:1,auctionproperty:null,game:null};r.tradeObj.currentInitiator=null,r.tradeObj.currentRecipient=null,r.tradeObj.initiator=null,r.tradeObj.recipient=null,r.player=[],r.communityChestCards=[],r.chanceCards=[],r.square=[],r.pcount=null,r.turn=0,r.doublecount=0,r.bid=null,r.this=t.this.shadowRoot,r.checkedproperty=-1,o.cards={_:"cards",type:"default",communityChestCards:[],chanceCards:void 0},o.auction={_:"auction",type:"default",auctionQueue:[],highestbidder:void 0,highestbid:0,currentbidder:1,auctionproperty:void 0},o.trade={_:"trade",type:"default",currentInitiator:[],currentRecipient:void 0,initiator:void 0,recipient:void 0},o.button={_:"button",type:"default",items:["trade-leftp-money","trade-rightp-money"],methods:["onkeydown","onfocus","onchange"],actions:["tradeMoneyOnKeyDown","tradeMoneyOnFocus","tradeMoneyOnChange"],onkeydown:{_:"onkeydown","trade-leftp-money":void 0,"trade-rightp-money":void 0},onfocus:{_:"onfocus","trade-leftp-money":void 0,"trade-rightp-money":void 0},onchange:{_:"onfocus","trade-leftp-money":void 0,"trade-rightp-money":void 0},tradeMoneyOnKeyDown:async()=>{console.log("~~~~~~~ tradeMoneyOnKeyDown ~~~~ menu-game.mjs ~~~");let t=0,o=!1,r=!1;return window.Event?(t=window.Event.keyCode,o=window.Event.ctrlKey,r=window.Event.shiftKey):e&&(t=e.keyCode,o=e.ctrlKey,r=e.shiftKey),!!Number.isNaN(t)||13!==t&&(!!(8===t||9===t||46===t||t>=35&&t<=40||o)||!r&&(t>=48&&t<=57||t>=96&&t<=105))},tradeMoneyOnFocus:async()=>{console.log("~~~~~~~ tradeMoneyOnFocus ~~ menu-game.mjs ~~~~~"),this.style.color="black",(Number.isNaN(this.value)||"0"===this.value)&&(this.value="")},tradeMoneyOnChange:async e=>{console.log("~~~~~~~tradeMoneyOnChange~~~ menu-game.mjs ~~~~"),console.assert(!1,e),r.this.querySelector("#proposetradebutton").style.display="flex",r.this.querySelector("#canceltradebutton").style.display="flex",r.this.querySelector("#accepttradebutton").style.display="none",r.this.querySelector("#rejecttradebutton").style.display="none";let t=this.value;return Number.isNaN(t)?(this.value="This value must be a number.",this.style.color="red",!1):(t=Math.round(t)||0,this.value=t,!(t<0)||(this.value="This value must be greater than 0.",this.style.color="red",!1))}},o.property={_:"property",type:"default",die1:void 0,die2:void 0,areDiceRolled:!1,turn:void 0,doublecount:0,groupPropertyArray:[],groupNumber:{}},o.player={_:"player",player:[],items:["bank","player 1","player 2","player 3","player 4","player 5","player 6","player 7","player 8"],methods:["onkeydown","onfocus","onchange"],actions:["playernumber_onchange","tradeMoneyOnFocus","tradeMoneyOnChange"],addEventListener:["playernumber_onchange"],name:"the bank",type:"default",pcount:void 0,currentCell:0,currentCellAnchor:0,currentCellPositionHolder:0,currentCellName:0,currentCellOwner:0,jail:!1,cell:0},n(o)}})};