let object={component:{},element:t=>(object.dom={},object.dom.visualizer={},object.dom.control={},object.dom.playBtnEl=t.this.shadowRoot.getElementById("playButton"),object.dom.playEl=t.this.shadowRoot.querySelector(".svg-audio-btn__play"),object.dom.pauseEl=t.this.shadowRoot.querySelector(".svg-audio-btn__pauseGrp"),object.dom.visualizer.this=t.this.shadowRoot.querySelector("#visualizer"),object.dom.visualizer.vCtx=object.dom.visualizer.this.getContext("2d"),object.dom.control.waveCtrl1El=t.this.shadowRoot.getElementById("wave1Control"),object.dom.volumeControl=t.this.shadowRoot.getElementById("volumeControl"),t),ToggleButton:class{constructor(t={}){this.on=t.on||"⏸",this.off=t.off||"▶️",t.startOn?this.current="on":this.current="off"}toggle(){return"on"===this.current?this.current="off":this.current="on",this[this.current]}},AudioPlayer:{}};object.AudioPlayer.class=class{constructor(t){return this.ctx=t.ctx,this.gainNode1=this.ctx.createGain(),this.f1Analyzer=this.ctx.createAnalyser({fftSize:256}),t.f1=130.81,this.mF1=t.f1||130.81,this.mPlaying=!1,this.mVolume=t.volume||.5,this.mVolume=.33*this.mVolume,this.gainNode1.gain.value=this.mVolume,this.gainNode1.connect(this.ctx.destination),this}_startOscillators(){console.log("starting oscillators"),this.oscNode1=this.ctx.createOscillator(),this.oscNode1.type="sine",this.oscNode1.frequency.value=this.mF1,this.oscNode1.connect(this.gainNode1),this.oscNode1.connect(this.f1Analyzer),this.oscNode1.start(),this.mPlaying=!0}_stopOscillators(){console.log("stopping oscillators"),this.oscNode1.stop(),this.mPlaying=!1}changeGain(t){this.mVolume=.33*t,this.gainNode1.gain.value=this.mVolume}changeFrequency(t,e){switch(t){case 1:this.oscNode1.frequency.value=this.mF1+e}}getAnalyzerBinCount(t){switch(t){case 1:return this.f1Analyzer.frequencyBinCount;default:return 0}}getAnalyzerFFTSize(t){switch(t){case 1:return this.f1Analyzer.fftSize;default:return 0}}getAnalyzerTimeBytes(t,e){switch(t){case 1:this.f1Analyzer.getByteTimeDomainData(e)}}togglePlay(){this.mPlaying?this._stopOscillators():this._startOscillators()}},object.component.left=(t=>'  \n    <div class="panel">\n                <button>line</button>\n                <button>hilbert</button>\n                <button>IO</button>\n    </div>\n'),object.component.right=(t=>'  \n    <div class="panel">\n                <button>video settings</button>\n                <button>audio setting</button>\n                <button>exit</button>\n    </div>\n'),object.component.busUp=(t=>'  \n        <progress value="52" max="100"></progress>\n         <div class="bus">\n                <button>1</button>\n                <button>2</button>\n                <button>3</button>\n                <button>4</button>\n                <button>5</button>\n                <button>6</button>\n                <button>7</button>\n                <button>8</button>\n        </div>\n        <progress value="2" max="100"></progress>\n'),object.component.busDown=(t=>'  \n        <progress value="32" max="100"></progress>\n        <div class="bus">\n                <button>1</button>\n                <button>2</button>\n                <button>3</button>\n                <button>4</button>\n                <button>5</button>\n                <button>6</button>\n                <button>7</button>\n                <button>8</button>\n        </div>\n        <progress value="12" max="100"></progress>\n'),object.component.head=(t=>`  \n            <div class="name">\n                <h1>${t.name}</h1>\n            </div>\n`),object.component.graph=(t=>'\n         <canvas id="visualizer" />\n'),object.component.synth=(t=>'\n    <svg\n        id="playButton"\n        height="200"\n        width="200"\n        viewBox="0 0 200 200"\n        preserveAspectRatio="xMidYMid meet"\n        xmlns="http://www.w3.org/2000/svg"\n        xmlns:svg="http://www.w3.org/2000/svg">\n        \x3c!-- .svg-audio-btn main group --\x3e\n        <g class="svg-audio-btn">\n            \x3c!-- bg --\x3e\n            <circle\n                cx="50%"\n                cy="50%"\n                r="47.5%"\n                fill="transparent"\n                stroke-width="5%"/>\n            \x3c!-- play triangle --\x3e\n            <path\n                class="svg-audio-btn__play"\n                d="M 80 50\n                 L 80 150\n                 L 133.33 100"/>\n            \x3c!-- pause group --\x3e\n            <g class="svg-audio-btn__pauseGrp hidden">\n                <rect\n                    class="svg-audio-btn__pause"\n                    height="50%"\n                    width="5%"\n                    x="40%"\n                    y="25%"/>\n                <rect\n                    class="svg-audio-btn__pause"\n                    height="50%"\n                    width="5%"\n                    x="55%"\n                    y="25%"/>\n            </g>\n        </g>\n    </svg>\n'),object.component.freqOsc=(t=>'\n           <div class="s12">\n                    <input\n                            data-f="3"\n                            id="wave3Control"\n                            name="wave3Control"\n                            type="range"\n                            min="-100.0"\n                            max="100.0"\n                            step="0.1"\n                            value="0.0"/>\n                </div>\n    '),object.component.control=(t=>'\n                <div class="waveControl">\n                    <input\n                            data-f="1"\n                            id="wave1Control"\n                            name="wave1Control"\n                            type="range"\n                            min="-100.0"\n                            max="100.0"\n                            step="0.1"\n                            value="0.0"/>\n                </div>\n                <div class="globalControl">\n                     <input\n                            id="volumeControl"\n                            name="volumeControl"\n                            type="range"\n                            min="0.0"\n                            max="1.0"\n                            step="0.1"\n                            value="0.5"/>\n                </div>\n'),object.AudioPlayer.ctx=new(window.AudioContext||window.webkitAudioContext),object.AudioPlayer.playBtnStates=new object.ToggleButton({on:"pause",off:"play"}),object.AudioPlayer.dF=0,object.AudioPlayer.volume=.5,object.AudioPlayer.opts={ctx:object.AudioPlayer.ctx,volume:object.AudioPlayer.volume,f1:{}},object.AudioPlayer.player=new object.AudioPlayer.class(object.AudioPlayer.opts),object.AudioPlayer.data={},object.AudioPlayer.drawBoard=(()=>{for(let t=0;t<=bw;t+=40)context.moveTo(.5+t+p,p),context.lineTo(.5+t+p,bh+p);for(let t=0;t<=bh;t+=40)context.moveTo(p,.5+t+p),context.lineTo(bw+p,.5+t+p);context.strokeStyle="black",context.stroke()}),object.draw=(()=>{let t=object.dom.visualizer.this.width,e=object.dom.visualizer.this.height;window.requestAnimationFrame(object.draw),object.AudioPlayer.player.getAnalyzerTimeBytes(1,object.AudioPlayer.data.f1visualData),object.dom.visualizer.vCtx.fillStyle="transparent",object.dom.visualizer.vCtx.fillRect(0,0,t,e),object.dom.visualizer.vCtx.lineWidth=2,function(o,n,a){object.dom.visualizer.vCtx.clearRect(0,0,t,e),object.dom.visualizer.vCtx.beginPath(),object.dom.visualizer.vCtx.strokeStyle=n;let i=.75*t/o,s=0;a.forEach(t=>{let o=a[t]/256*e;0===t?object.dom.visualizer.vCtx.moveTo(s,o):object.dom.visualizer.vCtx.lineTo(s,o),s+=i}),object.dom.visualizer.vCtx.lineTo(t,e/2),object.dom.visualizer.vCtx.stroke()}(object.AudioPlayer.player.getAnalyzerFFTSize(1),"#26a69a",object.AudioPlayer.data.f1visualData)});export default async t=>new Promise((t,e)=>{object.class=class{constructor(t){t.this.shadowRoot.querySelector("#player").insertAdjacentHTML("afterbegin",object.component.synth({name:"Rington"})),t.this.shadowRoot.querySelector("#left").insertAdjacentHTML("afterbegin",object.component.left({name:"Rington"})),t.this.shadowRoot.querySelector("#manifest").insertAdjacentHTML("afterbegin",object.component.head({name:"Rington"})),t.this.shadowRoot.querySelector("#busUp").insertAdjacentHTML("afterbegin",object.component.busUp({name:"Rington"})),t.this.shadowRoot.querySelector("#graph").insertAdjacentHTML("afterbegin",object.component.graph({name:"Rington"})),t.this.shadowRoot.querySelector("#control").insertAdjacentHTML("afterbegin",object.component.control({name:"Rington"})),t.this.shadowRoot.querySelector("#busDown").insertAdjacentHTML("afterbegin",object.component.busDown({name:"Rington"})),t.this.shadowRoot.querySelector("#right").insertAdjacentHTML("afterbegin",object.component.right({name:"Rington"})),object.element(t),this.init=this.init.bind(this)}init(t){if(object.AudioPlayer.data.f1visualData=new Uint8Array(object.AudioPlayer.player.getAnalyzerFFTSize(1)),object.dom.control.waveCtrl1El.value=object.AudioPlayer.dF,object.dom.volumeControl.value=object.AudioPlayer.volume,"suspended"===object.AudioPlayer.ctx.state&&"ontouchstart"in window){const t=t=>{object.AudioPlayer.ctx.resume()};document.body.addEventListener("touchstart",t,!1),document.body.addEventListener("touchend",t,!1)}object.dom.playBtnEl.addEventListener("click",function(){"pause"===object.AudioPlayer.playBtnStates.toggle()?(object.dom.control.waveCtrl1El.value=object.AudioPlayer.dF,object.dom.volumeControl.value=object.AudioPlayer.volume,object.dom.playEl.classList.add("hidden"),object.dom.pauseEl.classList.remove("hidden")):(object.dom.control.waveCtrl1El.value=object.AudioPlayer.dF,object.dom.volumeControl.value=object.AudioPlayer.volume,object.dom.playEl.classList.remove("hidden"),object.dom.pauseEl.classList.add("hidden")),object.AudioPlayer.player.togglePlay()}),[object.dom.control.waveCtrl1El,object.dom.control.waveCtrl2El,object.dom.control.waveCtrl3El].forEach(t=>{void 0===t||t.addEventListener("input",function(t){"on"===object.AudioPlayer.playBtnStates.current&&object.AudioPlayer.player.changeFrequency(Number(this.dataset.f),Number(this.value))})}),object.dom.volumeControl.addEventListener("input",function(t){"on"===object.AudioPlayer.playBtnStates.current&&object.AudioPlayer.player.changeGain(Number(this.value))}),object.draw()}get self(){return object}},t(object)});