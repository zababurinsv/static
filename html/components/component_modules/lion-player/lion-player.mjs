!function(){var e,t,n,r,a,o,i,c=document.getElementById("theCanvas"),u=c.getContext("2d"),d="getByteTimeDomainData",l=document.getElementById("slider"),s=!0,m=c.width,y=c.height;var f,g,v,B="client_id=3b2585ef4a5eff04935abe84aad5f3f3",E="https://soundcloud.com/the-outsider/the-outsider-death-by-melody";function h(){var e,t,n;e="https://api.soundcloud.com/resolve.json?url="+E+"&"+B,t=function(e){var t=JSON.parse(e);l.max=t.duration/1e3,document.getElementById("totalTime").innerHTML=k(t.duration),document.getElementById("artistUrl").href=t.user.permalink_url,document.getElementById("artistAvatar").src=t.user.avatar_url,document.getElementById("artistName").innerHTML=t.user.username,document.getElementById("trackUrl").href=t.permalink_url,t.artwork_url?document.getElementById("trackArt").src=t.artwork_url:document.getElementById("trackArt").src="",document.getElementById("trackName").innerHTML=t.title,i=t.stream_url+"?"+B},(n=new XMLHttpRequest).onreadystatechange=function(){4===n.readyState&&200===n.status&&t(n.responseText)},n.open("GET",e,!0),n.send(null)}function I(){s=!1,a.fftSize=2048;var e=a.frequencyBinCount;console.log(e),o=new Uint8Array(e),u.lineWidth=1,u.strokeStyle="rgba(0, 0, 0, 1)",function t(){u.clearRect(0,0,m,y),requestAnimationFrame(t),a[d](o);for(var n=0;n<e;n++)u.beginPath(),u.moveTo(n,255),u.lineTo(n,255-o[n]),u.closePath(),u.stroke()}()}function k(e){var t=new Date(null);return t.setMilliseconds(e),t.toISOString().substr(11,8)}l.addEventListener("change",function(){!function(e){if(!t.readyState)return!1;t.currentTime=e}(this.value)}),document.getElementById("playButton").addEventListener("click",function(){t.src=i,t.play(),l.value=0,setInterval(function(){l.value=t.currentTime},4e3);var e=document.getElementById("currentTime");setInterval(function(){e.innerHTML=k(1e3*t.currentTime)},1e3),I()}),document.getElementById("oscilloscopeButton").addEventListener("click",function(){d="getByteTimeDomainData",I()}),document.getElementById("frequencyBarsButton").addEventListener("click",function(){d="getByteFrequencyData",I()}),document.getElementById("findButton").addEventListener("click",function(){E=document.getElementById("trackUrlSearch").value,h()}),f=100,g=0,v=!1,function e(){u.clearRect(0,0,m,y),s&&requestAnimationFrame(e),u.beginPath();for(var t=0;t<m;t++)u.lineTo(t,Math.sin((t+g)/50)*f+120);u.stroke(),g++,f>100?v=!1:f<1&&(v=!0),v?f++:f--}(),h(),e=window.AudioContext||window.webkitAudioContext,(t=new Audio).crossOrigin="anonymous",n=new e,(r=n.createMediaElementSource(t)).connect(n.destination),a=n.createAnalyser(),r.connect(a)}();