export default async(e,t)=>{if("string"!=typeof e)throw new TypeError("shorten-url: url must be a string");if("number"!=typeof t)throw new TypeError("shorten-url: maxLength must be a number");if(e.length<t)return e;var l=/\w+:\/\//.exec(e);l&&(l=l[0],e=e.slice(l.length));var n,r,i=e.indexOf("/");-1===i?(n=e,e=""):(n=e.slice(0,i),e=e.slice(i+1)),-1===(i=e.indexOf("?"))?(r=e,e=""):(r=e.slice(0,i),e=e.slice(i+1));for(var h=e,s=r.split("/"),g=l.length+n.length+r.length,o=-1;s.length&&g>t-3;){(o=Math.floor(s.length/2-1))<0&&(o=0),g-=s.splice(o,1)[0].length+1}-1!==o&&s.splice(o,0,"…");var f=l+n+"/"+s.join("/");if(h){for(s=h.split("&"),i=0;i<s.length&&!(g+s[i].length>=t-3);i++)g+=s[i].length;f+="?"+s.slice(0,i).join("&"),i<s.length&&(i>0&&(f+="&"),f+="…")}return f.length>t&&(f=f.slice(0,t-1)+"…"),f};