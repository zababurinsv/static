import session from"/static/html/components/component_modules/speech/session.mjs";import indexedDB from"/static/html/components/component_modules/speech/indexedDB.mjs";export default{set:async(e,t,...i)=>new Promise(async(t,i)=>{switch(e.type){case"sessionStorage":(async(e,t,i)=>{await session.set({type:"item",key:`item_${e.key}`,value:e.value})})(e),(e=>{t(e)})(!0);break;default:(e=>{i(e)})(`новая функция ${e.type} `)}}),get:async(e,t,...i)=>new Promise(async(t,i)=>{let a=e=>{t(e)};switch(e.type){case"sessionStorage":(async(e,t,i)=>{let n=Object.keys(sessionStorage),s=[];if(s.city=!1,s.class=!1,s.dateExperiences=!1,s.description=!1,s.finish=!1,s.geo=!1,s.id=!1,s.metro=!1,s.name=!1,s.object=!1,s.plans=!1,s.price=!1,s.tags=!1,s.type=!1,0===n.length){for(let t in s)t===e.item?session.set({type:"item",key:`item_${t}`,value:-10}):session.set({type:"item",key:`item_${t}`,value:-9});a(!1)}else{let t=!1,i=!0,n={};for(let a in s)if(a===e.item)0===e.length?session.set({type:"item",key:`item_${a}`,value:-9}):session.set({type:"item",key:`item_${a}`,value:-10});else{let e=await session.get({type:"item",key:`item_${a}`});if(-10===parseInt(e,10)){if(i)switch(a){case"city":n=await indexedDB.get({type:"index",index:"city",filter:document.getElementById("search_input_City").value.toLowerCase()});break;case"class":n=await indexedDB.get({type:"index",index:"class",filter:document.getElementById("search_input_houseClass").value.toLowerCase()});break;case"dateExperiences":n=await indexedDB.get({type:"index",index:"dateExperiences",filter:document.getElementById("search_input_Deadline").value.toLowerCase()});break;case"description":n=await indexedDB.get({type:"index",index:"description",filter:document.getElementById("search_input_AdditionalInfo").value.toLowerCase()});break;case"finish":n=await indexedDB.get({type:"index",index:"finish",filter:document.getElementById("search_input_Finish").value.toLowerCase()});break;case"geo":n=await indexedDB.get({type:"index",index:"geo",filter:document.getElementById("search_input_geo").value.toLowerCase()});break;case"id":n=await indexedDB.get({type:"id",id:document.getElementById("search_input_id").value.toLowerCase()});break;case"metro":n=await indexedDB.get({type:"index",index:"metro",filter:document.getElementById("search_input_Metro").value.toLowerCase()});break;case"name":n=await indexedDB.get({type:"index",index:"name",filter:document.getElementById("search_input_Developer").value.toLowerCase()});break;case"object":n=await indexedDB.get({type:"index",index:"object",filter:document.getElementById("search_input_Object").value.toLowerCase()});break;case"plans":n=await indexedDB.get({type:"index",index:"plans",filter:document.getElementById("search_input_plan").value.toLowerCase()});break;case"price":n=await indexedDB.get({type:"index",index:"price",filter:document.getElementById("search_input_price").value.toLowerCase()});break;case"tags":break;case"type":n=await indexedDB.get({type:"index",index:"type",filter:document.getElementById("search_input_houseType").value.toLowerCase()});break;default:console.assert(!1,`необрабатываемый запрос ${a}`)}else switch(a){case"city":n=await indexedDB.get({type:"index",index:"city",filter:document.getElementById("search_input_City").value.toLowerCase()});break;case"class":n=await indexedDB.get({type:"index",index:"class",filter:document.getElementById("search_input_houseClass").value.toLowerCase()});break;case"dateExperiences":n=await indexedDB.get({type:"index",index:"dateExperiences",filter:document.getElementById("search_input_Deadline").value.toLowerCase()});break;case"description":n=await indexedDB.get({type:"index",index:"description",filter:document.getElementById("search_input_AdditionalInfo").value.toLowerCase()});break;case"finish":n=await indexedDB.get({type:"index",index:"finish",filter:document.getElementById("search_input_Finish").value.toLowerCase()});break;case"geo":n=await indexedDB.get({type:"index",index:"geo",filter:document.getElementById("search_input_geo").value.toLowerCase()});break;case"id":n=await indexedDB.get({type:"id",id:document.getElementById("search_input_id").value.toLowerCase()});break;case"metro":n=await indexedDB.get({type:"index",index:"metro",filter:document.getElementById("search_input_Metro").value.toLowerCase()});break;case"name":n=await indexedDB.get({type:"index",index:"name",filter:document.getElementById("search_input_Developer").value.toLowerCase()});break;case"object":n=await indexedDB.get({type:"index",index:"object",filter:document.getElementById("search_input_Object").value.toLowerCase()});break;case"plans":n=await indexedDB.get({type:"index",index:"plans",filter:document.getElementById("search_input_plan").value.toLowerCase()});break;case"price":n=await indexedDB.get({type:"index",index:"price",filter:document.getElementById("search_input_price").value.toLowerCase()});break;case"tags":break;case"type":n=await indexedDB.get({type:"index",index:"type",filter:document.getElementById("search_input_houseType").value.toLowerCase()});break;default:console.assert(!1,`необрабатываемый запрос ${a}`)}if(i)if(void 0===n)i=!1;else{for(let e=0;e<n.length;e++)session.set({type:"item",key:`${n[e].id}`,value:JSON.stringify(n[e])});i=!1}else if(void 0===n){let e=await session.get({type:"all"});for(let t=0;t<e.length;t++)session.delete({type:"item",key:e[t].id})}else{let e=await session.get({type:"all"});for(let t=0;t<e.length;t++){let i=!1;for(let a=0;a<n.length;a++)e[t].id===n[a].id&&(i=!0);i||session.delete({type:"item",key:e[t].id})}}t=!0}}a(!!t)}})(e);break;default:(e=>{i(e)})(`новая функция ${e.type} `)}}),put:async(e,t,...i)=>new Promise(async(t,i)=>{switch(e.type){case"getAll":break;default:(e=>{i(e)})(`новая функция ${e.type} `)}}),delete:async(e,t,...i)=>new Promise(async(t,i)=>{switch(e.type){case"getAll":((e,i,a)=>{(e=>{t(e)})(sessionStorage.removeItem(e.key))})(e);break;default:(e=>{i(e)})(`новая функция ${e.type} `)}}),clearn:async(e,t,...i)=>new Promise(async(t,i)=>{switch(e.type){case"sessionStorage":((e,i,a)=>{let n=Object.keys(sessionStorage);for(let e=0;e<n.length;e++)n[e].split("_").length>1||session.delete({type:"item",key:n[e]});(e=>{t(e)})(!0)})();break;default:(e=>{i(e)})(`новая функция ${e.type} `)}})};