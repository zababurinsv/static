import indexedDB from"/static/html/components/component_modules/speech/indexedDB.mjs";import templateItem from"/static/html/components/component_modules/speech/template.mjs";import session from"/static/html/components/component_modules/speech/session.mjs";import verify from"/static/html/components/component_modules/speech/verify.mjs";import listener from"/static/html/components/component_modules/speech/listener.mjs";export default(e,t,...l)=>{function i(e){$("#maxRows").on("change",function(){$(".pagination").html("");var t=0,l=parseInt($(this).val()),i=$(e+" tbody tr").length;if($(e+" tr:gt(0)").each(function(){++t>l&&$(this).hide(),t<=l&&$(this).show()}),i>l)for(var r=Math.ceil(i/l),s=1;s<=r;)$(".pagination").append('<li data-page="'+s+'">\t\t\t\t\t\t\t \t      <span>'+s+++'<span class="sr-only"></span></span>\t\t\t\t\t\t\t\t    </li>').show();$(".pagination li:first-child").addClass("active"),a(l,1,i),$(".pagination li").on("click",function(t){t.preventDefault();var r=$(this).attr("data-page"),s=0;$(".pagination li").removeClass("active"),$(this).addClass("active"),a(l,r,i),$(e+" tr:gt(0)").each(function(){++s>l*r||s<=l*r-l?$(this).hide():this.style.display=""})})})}function a(e,t,l){var i=e*t,a="Showing "+(e*t-e+parseFloat(1))+" to "+i+" of "+l+" entries";$(".rows_count").html(a)}switch(console.assert(!1,e),i("#table-id"),$("#maxRows").trigger("change"),$(function(){}),t.type){case"reset":(async(e,t,l)=>{let a=await indexedDB.get({type:"getAll",self:indexedDB}),r=await session.get({type:"all"});for(let e in r)session.delete({type:"item",key:r[e].id});for(let t=0;t<a.length;t++){let l=await templateItem(a[t]);session.set({type:"item",key:`${a[t].id}`,value:JSON.stringify(a[t])}),e.querySelector("tbody").insertAdjacentHTML("beforeend",l)}let s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]});$("#maxRows").trigger("change"),i("#table-id")})(e);break;case"search_input_id":(async(e,t,l)=>{let a,r,s;a=t.data,r=t.data.toLowerCase();let n=await indexedDB.get({type:"id",id:r}),o=await verify.get({type:"sessionStorage",item:"id",length:r.length});if(e.querySelector("tbody").innerHTML="",o){let t=await session.get({type:"all"});if(e.querySelector("tbody").innerHTML="",void 0===n){for(let e in t)session.delete({type:"item",key:t[e].id});$("#maxRows").trigger("change"),i("#table-id")}else for(let l in t){let i=!1;if(n.length>1){for(let i=0;i<n.length;i++)if(t[l].id===n[i].id){let t=await templateItem(n[i]);session.set({type:"item",key:`${n[i].id}`,value:JSON.stringify(n[i])}),e.querySelector("tbody").insertAdjacentHTML("beforeend",t)}}else{if(n.id===t[l].id){i=!0;let t=await templateItem(n);session.set({type:"item",key:`${n.id}`,value:JSON.stringify(n)}),e.querySelector("tbody").insertAdjacentHTML("beforeend",t)}!1===i&&session.delete({type:"item",key:t[l].id})}}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]});$("#maxRows").trigger("change"),i("#table-id")}else if(e.querySelector("tbody").innerHTML="",await verify.clearn({type:"sessionStorage"}),void 0===n){n=await indexedDB.get({type:"getAll",self:indexedDB});for(let e=0;e<n.length;e++){await templateItem(n[e])}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]});$("#maxRows").trigger("change"),i("#table-id")}else{if(await verify.clearn({type:"sessionStorage"}),n.length>1)for(let t=0;t<n.length;t++){let l=await templateItem(n[t]);session.set({type:"item",key:`${n[t].id}`,value:JSON.stringify(n[t])}),e.querySelector("tbody").insertAdjacentHTML("beforeend",l)}else{let t=await templateItem(n);session.set({type:"item",key:`${n.id}`,value:JSON.stringify(n)}),e.querySelector("tbody").insertAdjacentHTML("beforeend",t)}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]});$("#maxRows").trigger("change"),i("#table-id")}})(e,t);break;case"search_input_City":(async(e,t,l)=>{let a,r,s=await indexedDB.get({type:"index",index:"city",filter:t.data.toLowerCase()});a=t.data.toLowerCase();let n=await verify.get({type:"sessionStorage",item:"city",length:a.length});switch(a){case"1":a="москва",await verify.set({type:"sessionStorage",key:"city",value:-10});break;case"2":a="санкт-петербург",await verify.set({type:"sessionStorage",key:"city",value:-10});break;default:a="Все",await verify.set({type:"sessionStorage",key:"city",value:-9})}if(e.querySelector("tbody").innerHTML="",n){let t=Object.keys(sessionStorage);for(let l=0;l<t.length;l++)if(t[l].split("_").length>1);else{let i=!1;for(let a=0;a<s.length;a++)if(s[a].id===t[l]){i=!0;let t=await templateItem(s[a]);e.querySelector("tbody").insertAdjacentHTML("beforeend",t)}!1===i&&session.delete({type:"item",key:t[l]})}}else{await verify.clearn({type:"sessionStorage"});for(let t=0;t<s.length;t++){let l=await templateItem(s[t]);session.set({type:"item",key:`${s[t].id}`,value:JSON.stringify(s[t])}),e.querySelector("tbody").insertAdjacentHTML("beforeend",l),r=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<r.length;e++)await listener.set({type:"plan",this:r[e]})}}$("#maxRows").trigger("change"),i("#table-id")})(e,t);break;case"search_input_Developer":(async(e,t,l)=>{let a,r,s;a=t.data,r=t.data.toLowerCase();let n=await indexedDB.get({type:"index",index:"name",filter:r,self:indexedDB}),o=await verify.get({type:"sessionStorage",item:"name",length:r.length});if(e.querySelector("tbody").innerHTML="",o){let t=Object.keys(sessionStorage);for(let l=0;l<t.length;l++)if(t[l].split("_").length>1);else{let i=!1;for(let a=0;a<n.length;a++)if(n[a].id===t[l]){i=!0;let t=await templateItem(n[a]);e.querySelector("tbody").insertAdjacentHTML("beforeend",t)}!1===i&&session.delete({type:"item",key:t[l]})}}else{await verify.clearn({type:"sessionStorage"});for(let t=0;t<n.length;t++){let l=await templateItem(n[t]);session.set({type:"item",key:`${n[t].id}`,value:JSON.stringify(n[t])}),e.querySelector("tbody").insertAdjacentHTML("beforeend",l)}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}$("#maxRows").trigger("change"),i("#table-id")})(e,t);break;case"search_input_Object":(async(e,t,l)=>{let a,r,s;a=t.data,r=t.data.toLowerCase();let n=await indexedDB.get({type:"index",index:"object",filter:r,self:indexedDB}),o=await verify.get({type:"sessionStorage",item:"object",length:r.length});if(e.querySelector("tbody").innerHTML="",o){let t=Object.keys(sessionStorage);for(let l=0;l<t.length;l++)if(t[l].split("_").length>1);else{let i=!1;for(let a=0;a<n.length;a++)if(n[a].id===t[l]){i=!0;let t=await templateItem(n[a]);e.querySelector("tbody").insertAdjacentHTML("beforeend",t)}!1===i&&session.delete({type:"item",key:t[l]})}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}else{await verify.clearn({type:"sessionStorage"});for(let t=0;t<n.length;t++){let l=await templateItem(n[t]);session.set({type:"item",key:`${n[t].id}`,value:JSON.stringify(n[t])}),e.querySelector("tbody").insertAdjacentHTML("beforeend",l)}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}$("#maxRows").trigger("change"),i("#table-id")})(e,t);break;case"search_input_Deadline":(async(e,t,l)=>{let a,r,s;a=t.data,r=t.data.toLowerCase();let n=await indexedDB.get({type:"index",index:"dateExperiences",filter:r,self:indexedDB}),o=await verify.get({type:"sessionStorage",item:"dateExperiences",length:r.length});if(e.querySelector("tbody").innerHTML="",o){let t=Object.keys(sessionStorage);for(let l=0;l<t.length;l++)if(t[l].split("_").length>1);else{let i=!1;for(let a=0;a<n.length;a++)if(n[a].id===t[l]){i=!0;let t=await templateItem(n[a]);e.querySelector("tbody").insertAdjacentHTML("beforeend",t)}!1===i&&session.delete({type:"item",key:t[l]})}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}else{await verify.clearn({type:"sessionStorage"});for(let t=0;t<n.length;t++){let l=await templateItem(n[t]);session.set({type:"item",key:`${n[t].id}`,value:JSON.stringify(n[t])}),e.querySelector("tbody").insertAdjacentHTML("beforeend",l)}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}$("#maxRows").trigger("change"),i("#table-id")})(e,t);break;case"search_input_houseType":(async(e,t,l)=>{let a,r,s;a=t.data,r=t.data.toLowerCase(),console.assert(!1,r);let n=await indexedDB.get({type:"index",index:"type",filter:r,self:indexedDB}),o=await verify.get({type:"sessionStorage",item:"type",length:r.length});if(e.querySelector("tbody").innerHTML="",o){let t=Object.keys(sessionStorage);for(let l=0;l<t.length;l++)if(t[l].split("_").length>1);else{let i=!1;for(let a=0;a<n.length;a++)if(n[a].id===t[l]){i=!0;let t=await templateItem(n[a]);e.querySelector("tbody").insertAdjacentHTML("beforeend",t)}!1===i&&session.delete({type:"item",key:t[l]})}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}else{await verify.clearn({type:"sessionStorage"});for(let t=0;t<n.length;t++){let l=await templateItem(n[t]);session.set({type:"item",key:`${n[t].id}`,value:JSON.stringify(n[t])}),e.querySelector("tbody").insertAdjacentHTML("beforeend",l)}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}$("#maxRows").trigger("change"),i("#table-id")})(e,t);break;case"search_input_houseClass":(async(e,t,l)=>{let a,r,s;a=t.data,r=t.data.toLowerCase();let n=await indexedDB.get({type:"index",index:"class",filter:r}),o=await verify.get({type:"sessionStorage",item:"class",length:r.length});if(e.querySelector("tbody").innerHTML="",o){let t=Object.keys(sessionStorage);for(let l=0;l<t.length;l++)if(t[l].split("_").length>1);else{let i=!1;for(let a=0;a<n.length;a++)if(n[a].id===t[l]){i=!0;let t=await templateItem(n[a]);e.querySelector("tbody").insertAdjacentHTML("beforeend",t)}!1===i&&session.delete({type:"item",key:t[l]})}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}else{await verify.clearn({type:"sessionStorage"});for(let t=0;t<n.length;t++){let l=await templateItem(n[t]);session.set({type:"item",key:`${n[t].id}`,value:JSON.stringify(n[t])}),e.querySelector("tbody").insertAdjacentHTML("beforeend",l)}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}$("#maxRows").trigger("change"),i("#table-id")})(e,t);break;case"search_input_Metro":(async(e,t,l)=>{let a,r,s;a=t.data,r=t.data.toLowerCase();let n=await indexedDB.get({type:"index",index:"metro",filter:r,self:indexedDB}),o=await verify.get({type:"sessionStorage",item:"metro",length:r.length});if(e.querySelector("tbody").innerHTML="",o){let t=Object.keys(sessionStorage);for(let l=0;l<t.length;l++)if(t[l].split("_").length>1);else{let i=!1;for(let a=0;a<n.length;a++)if(n[a].id===t[l]){i=!0;let t=await templateItem(n[a]);e.querySelector("tbody").insertAdjacentHTML("beforeend",t)}!1===i&&session.delete({type:"item",key:t[l]})}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}else{await verify.clearn({type:"sessionStorage"});for(let t=0;t<n.length;t++){let l=await templateItem(n[t]);session.set({type:"item",key:`${n[t].id}`,value:JSON.stringify(n[t])}),e.querySelector("tbody").insertAdjacentHTML("beforeend",l)}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}$("#maxRows").trigger("change"),i("#table-id")})(e,t);break;case"search_input_geo":(async(e,t,l)=>{let a,r,s;a=t.data,r=t.data.toLowerCase();let n=await indexedDB.get({type:"index",index:"geo",filter:r,self:indexedDB}),o=await verify.get({type:"sessionStorage",item:"geo",length:r.length});if(e.querySelector("tbody").innerHTML="",o){let t=Object.keys(sessionStorage);for(let l=0;l<t.length;l++)if(t[l].split("_").length>1);else{let i=!1;for(let a=0;a<n.length;a++)if(n[a].id===t[l]){i=!0;let t=await templateItem(n[a]);e.querySelector("tbody").insertAdjacentHTML("beforeend",t)}!1===i&&session.delete({type:"item",key:t[l]})}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}else{await verify.clearn({type:"sessionStorage"});for(let t=0;t<n.length;t++){let l=await templateItem(n[t]);session.set({type:"item",key:`${n[t].id}`,value:JSON.stringify(n[t])}),e.querySelector("tbody").insertAdjacentHTML("beforeend",l)}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]});s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}$("#maxRows").trigger("change"),i("#table-id")})(e,t);break;case"search_input_plan":(async(e,t,l)=>{let a,r,s;a=t.data,r=t.data.toLowerCase();let n=await indexedDB.get({type:"index",index:"plans",filter:r}),o=await verify.get({type:"sessionStorage",item:"plans",length:r.length});if(e.querySelector("tbody").innerHTML="",o){let t=Object.keys(sessionStorage);for(let l=0;l<t.length;l++)if(t[l].split("_").length>1);else{let i=!1;for(let a=0;a<n.length;a++)if(n[a].id===t[l]){i=!0;let t=await templateItem(n[a]);e.querySelector("tbody").insertAdjacentHTML("beforeend",t)}!1===i&&session.delete({type:"item",key:t[l]})}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}else{await verify.clearn({type:"sessionStorage"});for(let t=0;t<n.length;t++){let l=await templateItem(n[t]);session.set({type:"item",key:`${n[t].id}`,value:JSON.stringify(n[t])}),e.querySelector("tbody").insertAdjacentHTML("beforeend",l)}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]});s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}$("#maxRows").trigger("change"),i("#table-id")})(e,t);break;case"search_input_price":(async(e,t,l)=>{let a,r,s;a=t.data,r=t.data.toLowerCase();let n=await indexedDB.get({type:"index",index:"price",filter:r,self:indexedDB}),o=await verify.get({type:"sessionStorage",item:"price",length:r.length});if(e.querySelector("tbody").innerHTML="",o){let t=Object.keys(sessionStorage);for(let l=0;l<t.length;l++)if(t[l].split("_").length>1);else{let i=!1;for(let a=0;a<n.length;a++)if(n[a].id===t[l]){i=!0;let t=await templateItem(n[a]);e.querySelector("tbody").insertAdjacentHTML("beforeend",t)}!1===i&&session.delete({type:"item",key:t[l]})}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}else{await verify.clearn({type:"sessionStorage"});for(let t=0;t<n.length;t++){let l=await templateItem(n[t]);session.set({type:"item",key:`${n[t].id}`,value:JSON.stringify(n[t])}),e.querySelector("tbody").insertAdjacentHTML("beforeend",l)}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}$("#maxRows").trigger("change"),i("#table-id")})(e,t);break;case"search_input_Finish":(async(e,t,l)=>{let a,r,s;a=t.data,r=t.data.toLowerCase();let n=await indexedDB.get({type:"index",index:"finish",filter:r,self:indexedDB}),o=await verify.get({type:"sessionStorage",item:"finish",length:r.length});if(e.querySelector("tbody").innerHTML="",o){let t=Object.keys(sessionStorage);for(let l=0;l<t.length;l++)if(t[l].split("_").length>1);else{let i=!1;for(let a=0;a<n.length;a++)if(n[a].id===t[l]){i=!0;let t=await templateItem(n[a]);e.querySelector("tbody").insertAdjacentHTML("beforeend",t)}!1===i&&session.delete({type:"item",key:t[l]})}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}else{await verify.clearn({type:"sessionStorage"});for(let t=0;t<n.length;t++){let l=await templateItem(n[t]);session.set({type:"item",key:`${n[t].id}`,value:JSON.stringify(n[t])}),e.querySelector("tbody").insertAdjacentHTML("beforeend",l)}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}$("#maxRows").trigger("change"),i("#table-id")})(e,t);break;case"search_input_AdditionalInfo":(async(e,t,l)=>{let a,r,s;a=t.data,r=t.data.toLowerCase();let n=await indexedDB.get({type:"index",index:"description",filter:r,self:indexedDB}),o=await verify.get({type:"sessionStorage",item:"description",length:r.length});if(e.querySelector("tbody").innerHTML="",o){let t=Object.keys(sessionStorage);for(let l=0;l<t.length;l++)if(t[l].split("_").length>1);else{let i=!1;for(let a=0;a<n.length;a++)if(n[a].id===t[l]){i=!0;let t=await templateItem(n[a]);e.querySelector("tbody").insertAdjacentHTML("beforeend",t)}!1===i&&session.delete({type:"item",key:t[l]})}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}else{await verify.clearn({type:"sessionStorage"});for(let t=0;t<n.length;t++){let l=await templateItem(n[t]);session.set({type:"item",key:`${n[t].id}`,value:JSON.stringify(n[t])}),e.querySelector("tbody").insertAdjacentHTML("beforeend",l)}s=e.querySelector("tbody").querySelectorAll(".search_input_plan");for(let e=0;e<s.length;e++)await listener.set({type:"plan",this:s[e]})}$("#maxRows").trigger("change"),i("#table-id")})(e,t)}};