export default(e,t,...a)=>new Promise(function(n,l){let r=e=>{n(e)},o=e=>{console.log("~~~ err utils ~~~",e),l(e)};switch(t){case"download":(async(e,t,a)=>{try{let t=document.createElement("a");t.download="my-image-name.jpeg",t.href=a,t.click(),r(e)}catch(e){o(e)}})(e,a[0],a[1],a[2],a[3]);break;case"getType":(async(e,t,a)=>{try{r(e.this.getAttribute("type").split("-"))}catch(e){o(e)}})(e,a[0],a[1],a[2]);break;case"createDocument":(async e=>{try{r(e)}catch(e){o(e)}})(e,a[0],a[1],a[2]);break;case"convert":(async(e,t,a)=>{try{switch(e[t]){case"blobToFile":var n=new FileReader;n.readAsDataURL(e.blob),n.onloadend=function(){return new Promise(function(e,t){e(n.result)})},r(base64);break;case"date":for(let t=0;t<e.data.length;t++){let a={},n=new Date(`${e.data[t].isoDate}`);a.date=`${n.getFullYear()}.${n.getDate()}.${n.getMonth()+1}`,a.min=`${n.getHours()}:${n.getMinutes()}:${n.getSeconds()}`,a.all=`${n.getFullYear()}.${n.getDate()}.${n.getMonth()+1} ${n.getHours()}:${n.getMinutes()}:${n.getSeconds()}`,e.data[t].date={},e.data[t].date=a}r(e);break;case"jsonDate":for(let t=0;t<e.data.length;t++){let a={},n=new Date(`${e.data[t].date_modified}`);a.date=`${n.getFullYear()}.${n.getDate()}.${n.getMonth()+1}`,a.min=`${n.getHours()}:${n.getMinutes()}:${n.getSeconds()}`,a.all=`${n.getFullYear()}.${n.getDate()}.${n.getMonth()+1} ${n.getHours()}:${n.getMinutes()}:${n.getSeconds()}`,e.data[t].date={},e.data[t].date=a}r(e);break;case"feedDate":let a={},c=new Date(`${e.data}`),g=c.getSeconds();1===g.toString().length&&(g=`0${g}`);let s=c.getMinutes();1===s.toString().length&&(s=`0${s}`);let $=c.getHours();1===$.toString().length&&($=`0${$}`);let d={};1===(d=(d=c.getDate()).toString()).length&&(d=`0${d}`),a.date=`${c.getFullYear()}.${d}.${c.getMonth()+1}`,a.min=`${$}:${s}:${g}`,a.all=`${c.getFullYear()}.${d}.${c.getMonth()+1} ${$}:${s}:${g}`,r(a);break;case"html2string":r(encodeURI(e.data));break;case"string2html":r(decodeURI(e.data));break;case"timestamp":let i=e.data.split(" "),u={},h={};var l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let e=0;e<l.length;e++)i[2]===l[e]&&(u=e+1);let b=i[4].split(":"),y=+b[0]+3;24===y?(i[1]=+i[1]+1,y="00"):25===y?(y="01",i[1]=+i[1]+1):26===y&&(y="02",i[1]=+i[1]+1),1===y.toString().length&&(y=`0${y}`);let m=+b[1];1===m.toString().length&&(m=`0${m}`);let f=+b[2];1===f.toString().length&&(f=`0${f}`),h.date=`${i[3]}.${i[1]}.${u}`,h.min=`${y}:${m}:${f}`,h.all=`${i[3]}.${i[1]}.${u} ${y}:${m}:${f}`,r(h);break;default:o(`необрабатываемый тип запроса ${e[t]}`)}}catch(e){o(e)}})(e,a[0],a[1],a[2],a[3]);break;case"get":(async(e,n,l)=>{try{switch(e[n]){case"object":(async(e,t,a)=>{try{let t=!1;for(let a=0;a<e.source.length;a++)switch(e.source[a].slot){case e.target:t=!0,e.get?r(e.source[a].this.shadowRoot.querySelector(e.get)):r(e.source[a])}t||r(void 0)}catch(e){o(e)}})(e,a[0],a[1],a[2],a[3]);break;default:o(`new type [(${t})${e[n]}]`)}}catch(e){o(e)}})(e,a[0],a[1],a[2],a[3]);break;default:o(`новая функция ${t}`)}});