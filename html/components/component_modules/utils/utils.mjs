export default(e,t,...a)=>new Promise(function(l,n){let o=e=>{l(e)},r=e=>{console.log("~~~ err utils ~~~",e),n(e)};switch(t){case"download":(async(e,t,a)=>{try{console.log(`${e.input}[(utils)${e[t]}]`);let l=document.createElement("a");l.download="my-image-name.jpeg",l.href=a,l.click(),o(e)}catch(e){r(e)}})(e,a[0],a[1],a[2],a[3]);break;case"getType":(async(e,t,a)=>{try{o(e.this.getAttribute("type").split("-"))}catch(e){r(e)}})(e,a[0],a[1],a[2]);break;case"createDocument":(async e=>{try{o(e)}catch(e){r(e)}})(e,a[0],a[1],a[2]);break;case"convert":(async(e,t,a)=>{try{switch(console.log(`${e.input}[(utils)${e[t]}]`),e[t]){case"blobToFile":var l=new FileReader;l.readAsDataURL(e.blob),l.onloadend=function(){return new Promise(function(e,t){e(l.result)})},o(base64);break;case"date":for(let t=0;t<e.data.length;t++){let a={},l=new Date(`${e.data[t].isoDate}`);a.date=`${l.getFullYear()}.${l.getDate()}.${l.getMonth()+1}`,a.min=`${l.getHours()}:${l.getMinutes()}:${l.getSeconds()}`,a.all=`${l.getFullYear()}.${l.getDate()}.${l.getMonth()+1} ${l.getHours()}:${l.getMinutes()}:${l.getSeconds()}`,e.data[t].date={},e.data[t].date=a}o(e);break;case"jsonDate":console.log(e.data);for(let t=0;t<e.data.length;t++){let a={},l=new Date(`${e.data[t].date_modified}`);a.date=`${l.getFullYear()}.${l.getDate()}.${l.getMonth()+1}`,a.min=`${l.getHours()}:${l.getMinutes()}:${l.getSeconds()}`,a.all=`${l.getFullYear()}.${l.getDate()}.${l.getMonth()+1} ${l.getHours()}:${l.getMinutes()}:${l.getSeconds()}`,e.data[t].date={},e.data[t].date=a}o(e);break;case"feedDate":let a={},$=new Date(`${e.data}`),s=$.getSeconds();1===s.toString().length&&(s=`0${s}`);let c=$.getMinutes();1===c.toString().length&&(c=`0${c}`);let g=$.getHours();1===g.toString().length&&(g=`0${g}`);let d={};1===(d=(d=$.getDate()).toString()).length&&(d=`0${d}`),a.date=`${$.getFullYear()}.${d}.${$.getMonth()+1}`,a.min=`${g}:${c}:${s}`,a.all=`${$.getFullYear()}.${d}.${$.getMonth()+1} ${g}:${c}:${s}`,o(a);break;case"html2string":o(encodeURI(e.data));break;case"string2html":o(decodeURI(e.data));break;case"timestamp":let i=e.data.split(" "),u={},h={};var n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];for(let e=0;e<n.length;e++)i[2]===n[e]&&(u=e+1);let b=i[4].split(":"),y=+b[0]+3;24===y?(i[1]=+i[1]+1,y="00"):25===y?(y="01",i[1]=+i[1]+1):26===y&&(y="02",i[1]=+i[1]+1),1===y.toString().length&&(y=`0${y}`);let p=+b[1];1===p.toString().length&&(p=`0${p}`);let m=+b[2];1===m.toString().length&&(m=`0${m}`),h.date=`${i[3]}.${i[1]}.${u}`,h.min=`${y}:${p}:${m}`,h.all=`${i[3]}.${i[1]}.${u} ${y}:${p}:${m}`,o(h);break;default:r(`необрабатываемый тип запроса ${e[t]}`)}}catch(e){r(e)}})(e,a[0],a[1],a[2],a[3]);break;case"get":(async(e,l,n)=>{try{switch(console.log(`app(${t}[(${e.input})${e[l]}]property)`),e[l]){case"object":(async(e,t,a)=>{try{let t=!1;for(let a=0;a<e.source.length;a++)switch(e.source[a].slot){case e.target:t=!0,e.get?o(e.source[a].this.shadowRoot.querySelector(e.get)):o(e.source[a])}t||o(void 0)}catch(e){r(e)}})(e,a[0],a[1],a[2],a[3]);break;default:r(`new type [(${t})${e[l]}]`)}}catch(e){r(e)}})(e,a[0],a[1],a[2],a[3]);break;default:r(`новая функция ${t}`)}});