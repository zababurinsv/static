let object={};function fetchVideoAndPlay(){return fetch("http://ice1.somafm.com/seventies-128-aac").then(t=>t.blob()).then(t=>(video.srcObject=t,video.play())).then(t=>{}).catch(t=>{})}object.this={},object.this.source={},object.func={},object.func.analyser={},object.func.drawOscilloscope={},object.func.updateWaveForm=(t=>{window.requestAnimationFrame(object.func.updateWaveForm),object.this.analyser.getFloatTimeDomainData(object.this.waveform)}),object.func.drawOscilloscope=(t=>{object.this.scopeContext=object.this.scopeCanvas.getContext("2d"),object.this.scopeCanvas.width=object.this.waveform.length,object.this.scopeCanvas.height=200,object.this.scopeContext.clearRect(0,0,object.this.scopeCanvas.width,object.this.scopeCanvas.height),object.this.scopeContext.beginPath();for(let t=0;t<object.this.waveform.length;t++){const e=t,o=(.5+object.this.waveform[t]/2)*object.this.scopeCanvas.height;0===t?object.this.scopeContext.moveTo(e,o):object.this.scopeContext.lineTo(e,o)}object.this.scopeContext.strokeStyle="#5661FA",object.this.scopeContext.lineWidth=2,object.this.scopeContext.stroke(),window.requestAnimationFrame(object.func.drawOscilloscope)});export default async t=>new Promise((t,e)=>{object.class=class{constructor(t){object.this.scopeCanvas=t.this.shadowRoot.querySelector("#oscilloscope"),object.this.start_button=t.this.shadowRoot.querySelector("#start"),object.this.radios=t.this.shadowRoot.querySelectorAll('input[name="radio-selection"]'),object.this.radios_length=object.this.radios.length,object.this.ctx=new(window.AudioContext||window.webkitAudioContext),object.this.analyser=object.this.ctx.createAnalyser(),object.this.waveform=new Float32Array(object.this.analyser.frequencyBinCount),object.this.analyser.getFloatTimeDomainData(object.this.waveform),object.this.masterGain=object.this.ctx.createGain(),object.this.masterGain.connect(object.this.ctx.destination),object.this.masterGain.connect(object.this.analyser);for(let t=0,e=object.this.radios_length;t<e;t++)!0===object.this.radios[t].checked&&(object.this.source=object.this.radios[t].value);object.this.song=new Audio(object.this.source),object.this.songSource=object.this.ctx.createMediaElementSource(object.this.song),object.this.songPlaying=!1,object.this.song.crossOrigin="anonymous",object.this.songSource.connect(object.this.masterGain);for(let t=0,e=object.this.radios_length;t<e;t++)object.this.radios[t].addEventListener("change",function(){object.this.songPlaying&&(object.this.song.pause(),object.this.start_button.innerHTML="Start Audio",object.this.songPlaying=!object.this.songPlaying),object.this.song=new Audio(object.this.source.value),object.this.songSource=object.this.ctx.createMediaElementSource(object.this.song),object.this.song.crossOrigin="anonymous",object.this.songSource.connect(object.this.masterGain)});object.this.start_button.addEventListener("click",async()=>{object.this.songPlaying?(await object.this.song.pause(),object.this.start_button.innerHTML="Start Audio"):(console.log("<<~~~~~~~~~~~~~~~~~>>"),object.func.drawOscilloscope(object),object.func.updateWaveForm(object),object.this.start_button.innerHTML="Stop Audio",await object.this.song.play()),object.this.songPlaying=!object.this.songPlaying})}get self(){return object}},t(object)});