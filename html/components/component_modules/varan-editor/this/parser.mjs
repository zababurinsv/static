import matcher from"/static/html/components/component_modules/matcher/module.js";import pagination from"/static/html/components/component_modules/varan-pagination/varan-pagination.js";import Slider from"/static/html/components/component_modules/varan-slider/varan-slider.js";import tick from"/static/html/components/component_modules/lacerta-tick/lacerta-tick.js";function colorLog(t,e,...s){switch(e=e||"black"){case"success":e="Green";break;case"info":e="DodgerBlue";break;case"error":e="Red";break;case"warning":e="Orange";break;default:e=e}console.log("%c"+t,"color:"+e,...s)}Object.keys||(Object.keys=function(t){if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,s=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&s.push(e);return s});let parser={this:{}};parser.this.tag=[],parser.this.tag.in=[],parser.this.tag.out=[],parser.this.tag.push("div"),parser.this.tag.push("section"),parser.this.tag.push("style"),parser.this.tag.push("script"),parser.this.tag.push("varan-editor"),parser.this.tag.in.push("&lt;div"),parser.this.tag.in.push("&lt;/div"),parser.this.tag.in.push("&lt;style"),parser.this.tag.in.push("&lt;/style"),parser.this.tag.in.push("&lt;section"),parser.this.tag.in.push("/section&gt;"),parser.this.tag.in.push("&lt;article"),parser.this.tag.in.push("/article&gt;"),parser.this.tag.in.push("&lt;time"),parser.this.tag.in.push("/time&gt;"),parser.this.tag.in.push("&lt;/script"),parser.this.tag.in.push("&lt;script"),parser.this.tag.out.push("&lt;p"),parser.this.tag.out.push("&lt;/p"),parser.this.tag.out.push("&lt;style"),parser.this.tag.out.push("&lt;/style"),parser.this.tag.out.push("&lt;section"),parser.this.tag.out.push("/section&gt;"),parser.this.tag.out.push("&lt;article"),parser.this.tag.out.push("/article&gt;"),parser.this.tag.out.push("&lt;time"),parser.this.tag.out.push("/time&gt;"),parser.func={},parser.func.parserIn=async function(t,e){t.tick||(t.tick=tick),t.tick.parserIn?console.assert(!0,"приходит второй раз"):t.tick.parserIn=0,t.tick(t,"parserIn","",-1).then(t=>{console.log("parserIn ->",t),console.assert(!1,t)}),t.tick.parserIn++;for(let s=0;s<t.type.length;s++)switch(t.type[s]){case"text":colorLog("~~~~~~~~~~~~~set (wall).innerHTML)~~~~~~~~~~~~","info",e),t.upload={},t.this.querySelector(".wall").innerHTML="",t.this.querySelector(".wall").innerHTML=e.content,matcher.database.request.functions.getObject(t).then(t=>{if(colorLog("~~~~~~~~~~~~~set (wall).innerHTML)~~~~~~~~~~~~","info",t),t.get){colorLog("~~~~~~~~~~~~~set (wall).innerHTML)~~~~~~get~~~~~~","info",t);let s={};s=t.slot?t.slot:t.parent;for(let r=0;r<t.get_n.length;r++)t.upload=t.get_n[r][s],t.upload.content=e.content,t.upload["edit-delta"]=e["edit-delta"],matcher.database.request.functions.updImage(t).then(t=>{})}else t.upload=e,t.upload.content=e.content,matcher.database.request.functions.setImages(t).then(t=>{})});break;case"slider-one-text":t.upload=null,matcher.database.request.functions.getObject(t).then(t=>{if(t.get){let s={};s=t.slot?t.slot:t.parent;let r=t.slider.getCurrentPos(),n=[];for(let e=0;e<t.get_n.length;e++)n.push(t.get_n[e][s]["view-slider-pos"]);n.sort(function(t,e){return t-e});for(let a=0;a<t.get_n.length;a++)t.get_n[a][s]["view-slider-pos"]===n[r]&&(t.get_n[a][s].content=e.content,t.get_n[a][s]["edit-delta"]=e["edit-delta"],t.upload=t.get_n[a]);t.get=null,t.get_n=null,matcher.database.request.functions.updImage(t).then(t=>{t.upload=null,t.update=null,null===t.this.querySelector(".peppermint-slides")?(colorLog(`~~~~~~['functions']['updImage']~~~~~  ${e.content}`,"info",e.content),t.this.querySelector(".ql-view").innerHTML=e.content):(colorLog(`~~~~~~['functions']['updImage']~~~slider~~  ${e.content}`,"info",e.content),t.this.querySelector(".peppermint-slides").children[t.slider.getCurrentPos()].innerHTML=e.content)})}else t.upload=e,t.upload.content=e["edit-content"],matcher.database.request.functions.setImages(t).then(t=>{null===t.this.querySelector(".peppermint-slides")?t.this.querySelector(".ql-view").innerHTML=e.content:t.this.querySelector(".peppermint-slides").children[t.slider.getCurrentPos()].innerHTML=e.content})})}},parser.func.parserOut=async function(t){};let init=async function(t){return parser};export default new Promise(async t=>{t({init:function(t){return init(t)}})});