import Helper from"/static/html/components/component_modules/json/module-helper.mjs";import TRANSFORM from"/static/html/components/component_modules/json/module-transform.mjs";import colorlog from"/static/html/components/component_modules/colorLog/colorLog.mjs";let Conditional={staticProperty:{}};Conditional.run=((e,o,t)=>new Promise(async(n,i)=>{try{Conditional.staticProperty.view=t,colorlog(t,"~~~ input Conditional.run input ~~~ ","6",{template:e,data:o},"Conditional.run");let l=null;for(let t=0;t<e.length;t++){let n=e[t],i=Object.keys(n)[0],r=await TRANSFORM.tokenize(i);if("#if"===r.name||"#elseif"===r.name){let t=r.expression,a=await TRANSFORM.fillout(o,"{{"+t+"}}");a==="{{"+t+"}}"?l=e:a&&(l=await TRANSFORM.run(n[i],o))}else l=await TRANSFORM.run(n[i],o,Conditional.staticProperty.view)}(e=>{colorlog(Conditional.staticProperty.view,{end:!0,property:"~~~ end Conditional.run end ~~~"},"6",e,"Conditional.run"),n(e)})(l)}catch(e){(e=>{console.log("~~~ err ~~~",e),i(e)})({_:"run",error:e})}})),Conditional.is=((e,o)=>new Promise(async(t,n)=>{let i=e=>{colorlog(Conditional.staticProperty.view,{end:!0,property:"~~~ end Conditional.is end ~~~"},"6",e,"Conditional.is"),t(e)};try{if(Conditional.staticProperty.view=o,colorlog(o,"~~~ input Conditional.is input ~~~ ","7",{template:e},"Conditional.is"),await Helper.is_array(e))if(0===e.length)i(!1);else{let o=!0;for(let t=0;t<e.length;t++){let t=e[0];if("object"!=typeof t){o=!1;break}if(1!==Object.keys(t).length){o=!1;break}}if(o){let o,t=e[0];for(let e in t)(o=await TRANSFORM.tokenize(e))&&o.name&&o.expression&&0!==o.expression.length?"#if"!==o.name.toLowerCase()&&i(!1):i(!1);if(1===e.length)i(!0);else{let t=!0;for(let n=1;n<e.length-1;n++){let i=e[n];for(let e in i)if("#elseif"!==(o=await TRANSFORM.tokenize(e)).name.toLowerCase()){t=!1;break}}if(t){let t=e[e.length-1],n=!0;for(let e in t)o=await TRANSFORM.tokenize(e),-1===["#else","#elseif"].indexOf(o.name.toLowerCase())&&(n=!1);i(n)}else i(!0)}}else i(!1)}else i(!1)}catch(e){(e=>{console.log("~~~ err ~~~",e),n(e)})({_:"is",error:e})}}));export default Conditional;