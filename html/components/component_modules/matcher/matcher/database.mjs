import localStorage from"/static/html/components/component_modules/matcher/matcher/this/database/localStorage/localStorage.mjs";import firebase from"/static/html/components/component_modules/matcher/matcher/this/database/firebase/firebase.mjs";import IndexedDB from"/static/html/components/component_modules/matcher/matcher/this/database/IndexedDB/IndexedDB.mjs";import mongodb from"/static/html/components/component_modules/matcher/matcher/this/database/mongoDb/mongodb.mjs";let name={},exception=[];exception.push("edit"),exception.push("varan-menu");let status=!0,status_n={};function colorLog(e,t,...l){switch(t=t||"black"){case"success":t="Green";break;case"info":t="DodgerBlue";break;case"error":t="Red";break;case"warning":t="Orange"}console.log("%c"+e,"color:"+t,...l)}status_n[0]=!1,status_n[1]=!0;let init={indexeddb:function(e){let t={DB_NAME:"varan",DB_VERSION:1,DB_STORE_NAME:"images",db:{},pubKey:{}};return e.indexeddb=t,e}},request={},database={},property={},func={};function pause(e){return new Promise(t=>{setTimeout(()=>{t(e)},900)})}function BlobToStringSet(e){return new Promise(function(t,l){let n={};if(n=e.slot?"edit"===e.slot?e.parent:e.slot:e.parent,e.set&&e.set[n].file)if("string"==typeof e.set[n].file)t(e);else if(e.set&&e.set[n].file){let l=new FileReader;l.readAsDataURL(e.set[n].file),l.onload=function(l){e.set[n].file=l.target.result,e.set[n].length=l.target.result.length,e.set[n].url=l.target.result,t(e)}}else t(e);else t(e)})}function BlobToString(e){return new Promise(function(t,l){if(e.upload&&e.upload.file)if("string"==typeof e.upload.file)t(e);else if(e.upload&&e.upload.file){let l=new FileReader;l.readAsDataURL(e.upload.file),l.onload=function(l){e.upload.file=l.target.result,e.upload.length=l.target.result.length,e.upload.url=l.target.result,t(e)}}else t(e);else t(e)})}database.mongoDB={},database.firebase={},database.indexedDB={},database.localStorage={},request.database=database,property.name={},property.key={},property.url={},property.taskUrl={},property.fullPath={},property.file={},property.data={},request.property=property,func.fileLoader=function(e){return new Promise(function(t,l){if(e.upload.file)if("string"==typeof e.upload.file);else{let l=new FileReader;l.readAsDataURL(e.upload.file),l.onload=function(l){e.upload.url=l.target.result,t(e)}}else t(e)})},func.getAll=function(e){return new Promise(function(t,l){null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),IndexedDB.getAll(e).then(e=>{t(e)})})},func.getImageById=function(e){return new Promise(function(t,l){let n=0;null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),0===n&&(t(IndexedDB.getImageById(e)),n++)})},func.verifyLocal=function(e){return new Promise(function(e,t){})},func.verifyMongo=function(e){return new Promise(function(e,t){})},func.crud=async function(e){colorLog("~~~~~~~~~~~~~~<varan-crud>~~~~~~~~~~~~~~","#808000",e.crud),name={},name=e.slot?"edit"===e.slot?e.parent:e.slot:e.parent;for(let t in e.crud.localDb){console.log("~~~~~~~~~~<crud>~~~~~~~~~~~~~",e.crud.localDb[t],t);let l=[];switch(t){case"delete":if(0===e.crud.localDb[t].length);else{for(let l in e.crud.localDb[t])console.log(l),console.assert(status,e.crud.localDb[t][l]);console.assert(status,e.crud.localDb[t])}break;case"update":if(0===e.crud.localDb[t].length);else for(let l in e.crud.localDb[t])e.get=null,e.get_n=null,e.upload=e.crud.localDb[t][l],(e=await func.updateuId(e)).upload=null,e.update=e.get_n[0],e=await mongodb.updateClientId(e);break;case"set":if(0===e.crud.localDb[t].length);else{for(let n in e.crud.localDb[t])e.upload=e.crud.localDb[t][n],(e=await func.setImagesLocal(e)).upload=null,e.upload=e.get_n[0],e.get=null,e.get_n=null,(e=await func.updateLocal(e)).update=e.get_n[0],e.get=null,e.get_n=null,e=await mongodb.updateClientId(e),l.push(e.get_n[0]),console.log("@@@@@@@@@@",l),e.get=null,e.get_n=null,e.update=null,e.upload=null;name={},name=e.slot?"edit"===e.slot?e.parent:e.slot:e.parent,e.get={},e.get_n={},e.get[name]={};for(let t=0;t<l.length;t++)e.get[name][`${l[t].id}`]=l[t][name];e.get_n=l,l=[],console.assert(status_n[1],e)}break;case"setLocal":if(0===e.crud.localDb[t].length);else{for(let n in e.crud.localDb[t])e.set=e.crud.localDb[t][n],(e=await func.setImagesLocalWithoutTimeStamp(e)).update=e.get_n[0],e.get=null,e.get_n=null,e=await mongodb.updateClientId(e),l.push(e.get_n[0]),e.get=null,e.get_n=null,e.update=null,e.upload=null;name={},name=e.slot?"edit"===e.slot?e.parent:e.slot:e.parent,e.get={},e.get_n={},e.get[name]={};for(let t=0;t<l.length;t++)e.get[name][`${l[t].id}`]=l[t][name];e.get_n=l,l=[],console.assert(status_n[1],e)}break;case"set&update":if(l=[],0===e.crud.localDb[t].length);else for(let l in e.crud.localDb[t])e["set&update"]=e.crud.localDb[t][l],e.get=null,e.get_n=null,e.upload=e.crud.localDb[t][l],e.update=null,(e=await func.setImagesLocal(e)).upload=e.get_n[0],e.get=null,e.get_n=null,console.assert(status,e),(e=await func.updateLocal(e)).update=e.get_n[0],e.get=null,e.get_n=null,(e=await mongodb.updateClientId(e)).get=null,e.get_n=null,e.update=null,e.upload=null;break;case"get":0===e.crud.localDb[t].length||console.log("----get----",e.crud.mongoDb[t]);break;default:console.assert(status,"пришло что то неизвестное",t)}}for(let t in e.crud.mongoDb)switch(t){case"delete":if(0===e.crud.mongoDb[t].length);else{console.log("mongo delete",e.crud.mongoDb[t]);for(let l in e.crud.mongoDb[t])e.delete=e.crud.mongoDb[t][l],e=await mongodb.delFile(e),console.log("----delete----",e.crud.mongoDb[t][l])}break;case"update":e.crud.mongoDb[t].length;break;case"set":case"set&update":if(0===e.crud.mongoDb[t].length);else for(let l in e.crud.mongoDb[t])e.set=e.crud.mongoDb[t][l],(e=await mongodb.setFile(e)).upload=e.mongo,e.update=null,console.assert(status,e),(e=await func.updateLocal(e)).upload=e.get_n[0],console.assert(status,e),e=await mongodb.updFile(e),e=await func.getImage(e);break;case"get":e.crud.mongoDb[t].length;break;default:console.assert(status,"пришло что то неизвестное")}return console.assert(status,e),e},func.verify=async function(e){if(null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),!(e=await IndexedDB.getObject(e)).get){if(0===(e=await mongodb.getFile(e)).mongo.length)return e.get=null,e;{let t={};t=e.slot?"edit"===e.slot?e.parent:e.slot:e.parent,e.get={},e.get[t]={};for(let l=0;l<e.mongo.length;l++)console.log(e.mongo[l]),e.get[t][`${e.mongo[l].id}`]=e.mongo[l][t];e.get_n=e.mongo}}return e},func.addMongo=function(e){return new Promise(function(t,l){console.assert(status,e)})},func.getObjectLocal=function(e){return new Promise(function(t,l){null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),IndexedDB.getObject(e).then(e=>{e.get||(e.get=null),t(e)})})},func.getObject=async function(e){null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),colorLog("======================================================================================================","#8B008B");let t={};if("varan-rss"!==(t=e.slot?"edit"===e.slot?e.parent:e.slot:e.parent)&&"varan-slider-news"!==t){if(e.crud={},e.crud.localDb={},e.crud.mongoDb={},e.crud.localDb.set=[],e.crud.localDb.delete=[],e.crud.mongoDb.set=[],e.crud.mongoDb.delete=[],e.get=null,e.get_n=null,e.mongo=null,(e=await IndexedDB.getObject(e)).get){if((e=await mongodb.getFile(e)).mongo&&0!==e.mongo.length){t=e.slot?"edit"===e.slot?e.parent:e.slot:e.parent;let l=e.get_n,n=e.mongo;for(;!l;)console.warn("Ждём локальный объект"),l=null,n=null,l=e.get_n,n=e.mongo,e=await pause(e);let o={},d=null,a=[],u=[],i=[],s=0;colorLog("~~~~~~~~~~~~~<сравнение-объектов>~~~~~~~~~~~~~","MediumSlateBlue"),console.log("local",Object.keys(l),l),console.log("mongo",Object.keys(n),n),colorLog("~~~~~~~~~~~~~<сравнение-объектов>~~~~~~~~~~~~~","MediumSlateBlue");for(let r in n){colorLog("~~~~~~~~~~~~~<проверяем-объект-mongo>~~~~~~~~~~~~~","red",n[r]);let c=!1,g=!1,p=!1,m=!1;for(let a in l){let f=!1;if(s>0)colorLog("~~~~~~~~~~~~~~~~~~~~~~объект уже проверен~~~~~~~~~~~~~~~~~~~~~~","red");else{for(let e in n)l[a][t].uId||console.assert(status,"должен быть uId",l[a][t]),n[e][t].uId||console.assert(status,"должен быть uId",n[e][t]),l[a][t].uId===n[e][t].uId&&(f=!0,d=a);if(colorLog("[<->]~~~~~~~~~~~verify~~~(keyVerifyLocaluId)~~~~~~~","#fe3d00",f),!1===f){i.push(a);let t=l[a];t.type=e.type,u.push(t),colorLog("[<-0->]~~~~~~~~~~~Новый~Объект~~~~~~~~~~","#fe9d00",u)}}n[r].id===l[a].id&&(c=!0,o=a),l[a][t].timeStamp||console.assert(status,"local - должен быть timeStamp",e),n[r][t].timeStamp||console.assert(status,"obj['mongo'] - должен быть timeStamp",n[r]),l[a][t].timeStamp===n[r][t].timeStamp&&(p=!0,o=a),l[a][t]._id?(n[r]._id||console.assert(status,"obj['mongo'] - должен быть _id",e),n[r]._id===l[a][t]._id&&(g=!0,o=a)):(colorLog("[<->]~~~~~~~~~~~~~~~~~_id~local~не~установлен","#fe3d00",l[a]),console.assert(status,"не установлен но по идее должен быть")),l[a][t].uId||console.assert(status,"должен быть uId",l[a][t]),n[r][t].uId||console.assert(status,"должен быть uId",n[r][t]),l[a][t].uId===n[r][t].uId&&(m=!0,o=a)}if(s++,!1===m){let t=n[r];t.type=e.type,a.push(t)}colorLog("[<->]~~~~~~~~~~~verify~~~( id)~~~~~~~","#fe3d00",c),colorLog("[<->]~~~~~~~~~~~verify~~~(_id)~~~~~~~","#fe3d00",g),colorLog("[<->]~~~~~~~~~~~verify~~~timeStamp~~~","#fe3d00",p),colorLog("[<->]~~~~~~~~~~~verify~~~(uId)~~~~~~~","#fe3d00",m),colorLog("[-()-]~~~~~~~~~~~NewObjectMongo~~~~~~~","#8904B1",a),colorLog("[-()-]~~~~~~~~~~~NewObjectLocal~~~~~~~~~~","#8904B1",u),e.crud={},e.crud.localDb={},e.crud.mongoDb={},e.crud.localDb.set=[],e.crud.localDb["set&update"]=[],e.crud.localDb.delete=[],e.crud.localDb.update=[],e.crud.mongoDb.set=[],e.crud.mongoDb["set&update"]=[],e.crud.mongoDb.delete=[];let f={};if(u.length>0){for(let l=0;l<u.length;l++)for(let n in u[l].type)switch(u[l].type[n]){case"text":f=u[l][t];break;case"slider-one-text":case"slider-one-gallery":case"gallery":e.crud.mongoDb["set&update"].push(u[l]);break;default:colorLog("неотслеживаемый тип",u[l].type[n])}e=await func.crud(e),u=[]}if(a.length>0){for(let l=0;l<a.length;l++)for(let n in a[l].type)switch(a[l].type[n]){case"text":let o=a[l][t];o.id=f.id,e.crud.localDb.update.push(o);break;case"slider-one-text":case"slider-one-gallery":case"gallery":e.crud.localDb["set&update"].push(a[l]);break;default:colorLog("неотслеживаемый тип",a[l].type[n])}e=await func.crud(e),a=[]}if(!0===m)if(!0===g)if(c&&p)l[o][t]["edit-delta"]=n[r][t]["edit-delta"],l[o][t].content=n[r][t].content,l[o][t].file=n[r][t].file,l[o][t]["file-url"]=n[r][t]["file-url"],l[o][t].length=n[r][t].length,e.get=null,e.get_n=null,e.update=l[o],(e=await func.updateLocalTimeStamp(e)).upload=null;else{let d=n[r][t].timeStamp,a=l[o][t].timeStamp,u=n[r][t].timeStamp-l[o][t].timeStamp;if(t=e.slot?"edit"===e.slot?e.parent:e.slot:e.parent,colorLog("~~~~~~~~~~~~~<update-timeStamp>~~~~~~ mongo - local ~~~~~~~","MediumSlateBlue",d," -",a,"=",u),u<0)c?(l[o][t]["edit-delta"]=n[r][t]["edit-delta"],l[o][t].content=n[r][t].content,e.update=l[o],(e=await func.updateLocalTimeStamp(e)).upload=null,e.update={},e.update.id=l[o].id,e.update.object=t,e.update._id=l[o]._id,e.update=l[o][t],console.assert(status,e),(e=await mongodb.updFile(e)).update=null,e.upload=null):(e.upload=null,e.get=null,e.get_n=null,e.update={},l[o][t]["edit-delta"]=n[r][t]["edit-delta"],l[o][t].content=n[r][t].content,e.update=l[o],e.update.id=l[o].id,e.update[t].id=l[o][t].id,(e=await func.updateLocalTimeStamp(e)).upload=null,e.update=e.get_n[0],e.update._id=n[r]._id,e.update.object=t,e.update[t]._id=n[r]._id,e.get=null,e.get_n=null,(e=await mongodb.updateClientId(e)).update=null,e.upload=null);else if(u>0)c?(colorLog("~~~~~~local~~~~~~~<update-timeStamp>~~~~~~local~~~~~~~","MediumSlateBlue"),e.upload=null,e.update={},e.update.id=n[r].id,e.update.object=t,e.update._id=n[r]._id,e.update[t]=n[r][t],e.get=null,e.get_n=null,(e=await func.updateLocalTimeStamp(e)).update=null,e.upload=null):(e.upload=null,e.get=null,e.get_n=null,e.update={},e.update=n[r],e.update.id=l[o].id,e.update[t].id=l[o][t].id,(e=await func.updateLocalTimeStamp(e)).upload=null,e.update=e.get_n[0],e.update._id=n[r]._id,e.update[t]._id=n[r]._id,e.get=null,e.get_n=null,(e=await mongodb.updateClientId(e)).update=null,e.upload=null);else for(let d=0;d<e.type.length;d++)switch(e.type[d]){case"text":l[o][t]["edit-delta"]=n[r][t]["edit-delta"],l[o][t].content=n[r][t].content,e.get=null,e.get_n=null,e.upload=l[o],console.assert(status,e),(e=await func.updateLocal(e)).upload=null;break;default:colorLog("default"),e.upload=null,e.update=l[o],e.update._id=n[r]._id,e=await mongodb.updateClientId(e)}}else if(!0===c)e.update=null,e.upload=n[r],colorLog("~~~~~~local~~~~~~~<update-id>~~~~~~local~~~~~~~","MediumSlateBlue"),console.assert(status,e),e=await func.updateLocal(e);else{let t={};t=e.slot?"edit"===e.slot?e.parent:e.slot:e.parent,e.update=null,e.upload=n[r],e.upload.id=l[o].id,e.upload[t].id=l[o][t].id,e.upload._id=n[r]._id,e.get_n=null,e.get=null,console.assert(status,e),(e=await func.updateLocal(e)).update=e.get_n[0],e.get_n=null,e.get=null,e=await mongodb.updateClientId(e)}}return e.get=null,e.get_n=null,e.upload=null,e.update=null,(e=await IndexedDB.getObject(e)).upload=null,e.update=null,e}{t=e.slot?"edit"===e.slot?e.parent:e.slot:e.parent,e.set={},e.set[t]={};let l={set:{}};l.set.id={},l.set.id={};for(let l in e.get_n){if(e.get_n[l][t].file){e.get_n[l][t]._id=null,"string"==typeof e.get_n[l][t].file||(e=await func.fileLoader(e,l,t));let n=e.get_n[l][t].file.length;e.get_n[l][t].length=n}else;e.crud.mongoDb.set.push(e.get_n[l])}return e=await func.crud(e)}}return 0===(e=await mongodb.getFile(e)).mongo.length?(e.get=null,e):(e.crud.localDb.setLocal=e.mongo,console.assert(status_n[1],e),e=await func.crud(e),console.assert(status_n[1],e),e)}if(e.crud={},e.crud.localDb={},e.crud.mongoDb={},e.crud.localDb.set=[],e.crud.localDb.delete=[],e.crud.mongoDb.set=[],e.crud.mongoDb.delete=[],"varan-rss"===t&&(t="varan-slider-news"),(e=await IndexedDB.getObject(e)).get){if(t=(e=await mongodb.getFile(e)).slot?"edit"===e.slot?e.parent:e.slot:e.parent,0!==e.mongo.length)return e.update=e.get_n[0],e.update||(e.update={}),e.update["varan-slider-news"]||(e.update["varan-slider-news"]={}),e.update["varan-slider-news"].feed=e.mongo[0]["varan-slider-news"],e=await func.updateFeed(e);if(1===e.get_n.length)return e.set=e.get_n[0],e.crud.mongoDb.set.push(e.set),e=await func.crud(e);console.assert(status,e.get_n)}else{if(0===(e=await mongodb.getFile(e)).mongo.length)return e.get=null,e;if(1===e.mongo.length)return t=e.slot?"edit"===e.slot?e.parent:e.slot:e.parent,e.set={},e.set.id=e.mongo[0].id,e.set.object=t,e.set[t]={},e.set[t].feed=e.mongo[0][t],colorLog("~~~~~~~~~~~<database>~!obj['get']~~~~~~~~~~","#808000",e=await func.setImagesLocal(e)),e;colorLog("~~~~~~~~~~~~~~~<database>~obj['get']~~~~~~~~~~~~~~","#808000",e)}},func.getImages=function(e){return new Promise(function(t,l){null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),IndexedDB.getFiles(e).then(e=>{t(e)})})},func.setImages=function(e){return new Promise(function(t,l){let n=0;null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),0===n&&(BlobToString(e).then(e=>{colorLog("~~~~~~~~~~~~<set-images-local>~~~~~~~~~","#95b8da",e),IndexedDB.setFiles(e).then(l=>{e.set=l.get_n[0],colorLog("~~~~~~~~~~~~<set-images-mongo>~~~~~~~~~","#95b8da",e.set),mongodb.setFile(e).then(e=>{e.get=null,e.get_n=null,e.upload=e.mongo,colorLog("~~~~~~~~~~~~<update-images-local>~~~~~~~~~","#95b8da",e.upload),IndexedDB.updFile(e).then(e=>{e.get_n?(e.update=e.get_n[0][`${e.get_n[0].object}`],e.set=null,console.log("@@@@@@@@@@@@@@11@@@@@@@@@@@@@@@@@@@@@@",e.update),mongodb.updFile(e).then(e=>{}),t(e)):(console.log("нет get объекта, возможно нужно создать для отображения"),t(e))})})})}),n++)})},func.updateLocal=function(e){return new Promise(function(t,l){let n=0;null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),0===n&&(IndexedDB.updFile(e).then(e=>{t(e)}),n++)})},func.updateLocalTimeStamp=function(e){return new Promise(function(t,l){let n=0;null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),0===n&&(IndexedDB.updateLocalTimeStamp(e).then(e=>{t(e)}),n++)})},func.updateuId=function(e){return new Promise(function(t,l){let n=0;null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),0===n&&(t(IndexedDB.updateuId(e)),n++)})},func.setImagesLocalWithoutTimeStamp=function(e){return new Promise(function(t,l){let n=0;null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),0===n&&(BlobToStringSet(e).then(e=>{IndexedDB.setImagesWithoutTimeStamp(e).then(e=>{e.update=e.get_n[0],e.set=null,e.get=null,e.get_n=null,IndexedDB.updateLocalTimeStamp(e).then(e=>{t(e)})})}),n++)})},func.setImagesLocal=function(e){return new Promise(function(t,l){let n=0;null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),0===n&&(IndexedDB.setFiles(e).then(e=>{t(e)}),n++)})},func.updImage=function(e){return new Promise(function(t,l){let n=0;null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),0===n&&(colorLog("~~~~~~~~~~~~<update-images-local>~~~~~~~~~","#95b8da",e),BlobToString(e).then(e=>{colorLog("~~~~~~localHost~~~~~~~<update-local>~~~~~~localHost~~~~~~~","MediumSlateBlue",e),e.get=null,e.get_n=null,IndexedDB.updFile(e).then(e=>{colorLog("~~~~~~localHost~~~~~~~<update-local>~~~~~~localHost~~~out~~~~","MediumSlateBlue",e),e.update=e.get_n[0],"varan-rss"===(name=e.slot?"edit"===e.slot?e.parent:e.slot:e.parent)&&(name="varan-slider-news"),colorLog("~~~~~~~~~~<update-mongo>~~~~~~~~~~","MediumSlateBlue",e),mongodb.updFile(e),t(e)})}),n++)})},func.updateFeed=function(e){return new Promise(function(t,l){let n=0;null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),0===n&&(IndexedDB.updateFeed(e).then(e=>{t(e)}),n++)})},func.updImageMongo=function(e){return new Promise(function(t,l){let n=0;null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),0===n&&(console.assert(status,e),IndexedDB.updFile(e).then(e=>{t(e)}),n++)})},func.getImage=function(e){return new Promise(function(t,l){let n=0;null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),0===n&&(IndexedDB.getObject(e).then(e=>{t(e)}),n++)})},func.delImages=function(e){return new Promise(function(t,l){null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),colorLog("~~~~~~~~~~<delete-local>~~~~~~~~~~","MediumSlateBlue",e),IndexedDB.delFiles(e).then(e=>{mongodb.delFile(e).then(e=>{}),t(e)})})},func.updateStatusItem=function(e){return new Promise(function(t,l){let n=0;null!==e.indexeddb&&void 0!==e.indexeddb||(e=init.indexeddb(e)),0===n&&(colorLog("~~~~~~localHost~~~~~~~<update-local>~~~~~~localHost~~~~~~~","MediumSlateBlue",e),e.get=null,e.get_n=null,IndexedDB.updateStatus(e).then(e=>{colorLog("~~~~~~localHost~~~~~~~<update-local>~~~~~~localHost~~~out~~~~","MediumSlateBlue",e),e.update=e.get_n[0],"varan-rss"===(name=e.slot?"edit"===e.slot?e.parent:e.slot:e.parent)&&(name="varan-slider-news"),colorLog("~~~~~~~~~~<update-mongo>~~~~~~~~~~","MediumSlateBlue",e),mongodb.updFile(e),t(e)}),n++)})},request.functions=func;export default{request:request};