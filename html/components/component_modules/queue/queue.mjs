import isEmpty from"/static/html/components/component_modules/isEmpty/isEmpty_t.mjs";import description from"/static/html/components/component_modules/description/description.mjs";import colorlog from"/static/html/components/component_modules/colorLog/colorLog.mjs";import actions from"/static/html/components/component_modules/action/actions-monopoly.mjs";import postoffice from"/static/html/components/component_modules/action/actions-postOffice.mjs";let object={staticProperty:[]},output={};object.setEventsAction=(async(t,o,e,s,r)=>new Promise(async function(n,c){switch(r){case"button":case"player":n(await actions(t,o,e,s,r));break;case"authtorization":n(await postoffice(t,o,e,s,r));break;default:console.warn(`queue.mjs ---\x3e нет акшена на это отношение ---\x3e ${r}`),n(await colorlog(t,{end:!0,error:`queue.mjs ---\x3e нет акшена на это отношение ---\x3e ${r}`},e,{property:o,substrate:s},r))}}));let handler={get:(t,o)=>t[o],set:(t,o,e)=>{switch(t[o]=e,o){case"length":if(1===t.length){let o=setTimeout(async function e(){0===t.length?(console.log("~~~~~~~~~~~ End ~~~~~~~~~~~"),clearTimeout(o)):(t[0].end?(await object.setEventsAction(t[0].console,{end:!0,property:t[0].property},t[0].color,t[0].substrate,t[0].relation),colorlog(t[0].console,{end:!0,property:t[0].property},t[0].color,t[0].substrate,t[0].relation),delete t[0].substrate.queue,document.dispatchEvent(new CustomEvent("typeScript-end",{detail:{_:t[0].substrate._,console:t[0].console,property:t[0].property,color:t[0].color,substrate:t[0].substrate,relation:t[0].relation}}))):(await object.setEventsAction(t[0].console,t[0].property,t[0].color,t[0].substrate,t[0].relation),colorlog(t[0].console,t[0].property,t[0].color,t[0].substrate,t[0].relation)),t.shift(),o=setTimeout(e,10))},0)}}return!0}};export default(t,o="default",e="default",...s)=>new Promise(async(r,n)=>{try{"string"==typeof s[s.length-1]?"~end"===o?(delete object.staticProperty[`${s[s.length-1]}`],output={_:`${s[s.length-1]}`,destruct:!0,queue:object.staticProperty}):(isEmpty(object.staticProperty[`${s[s.length-1]}`])&&(object.staticProperty[`${s[s.length-1]}`]=[],object.staticProperty[`${s[s.length-1]}`].task=[],object.staticProperty[`${s[s.length-1]}`].task=new Proxy(object.staticProperty[`${s[s.length-1]}`].task,handler)),s.unshift(object.staticProperty[`${s[s.length-1]}`]),output=description(t,"%c%O"+s[s.length-1],"color:"+e,"[(",s.slice(0,s.length-1),"*)",o,"]")):console.assert(!1,"не выбранно отношение"),function(t){r(t)}(output)}catch(t){!function(t){n(t)}({_:"object",error:t})}});