import menu from"/static/html/components/component_modules/menu/menu.mjs";import matcher from"/static/html/components/component_modules/matcher/matcher.mjs";import Store from"/static/html/components/component_modules/varan-store/varan-store.mjs";import custom from"/static/html/components/component_modules/customEvent/customEvent.mjs";import utils from"/static/html/components/component_modules/utils/utils.mjs";import staticProperty from"/static/html/components/component_modules/staticProperty/staticProperty.mjs";import addEventListener from"/static/html/components/component_modules/addEventListener/addEventListener.mjs";let timeStamp={staticProperty:0},store={};customElements.define("varan-menu",class extends HTMLElement{static get observedAttributes(){return["mode"]}constructor(){super();let e=[],t=[],r=[],a=[];function n(e,t,r){return new Promise(function(t,r){e["template-shadow"]=[],e["template-light"]=[];let a=[];a.swap=!1,a.external=!1,a.light=!1,a.slider=!1,a.one=!1,a.addBtn=!1;for(let t=0;t<e.type.length;t++){if(-1!==e.type[t].indexOf("slider")&&e.type[t].split("-").length>1){a.slider=!0;for(let r in e.type[t].split("-"))switch(e.type[t].split("-")[r]){case"one":a.one=!0}}if(e.type[t].length)switch(e.type[t]){case"swap":a.swap=!0;break;case"external":a.external=!0;break;case"light":a.light=!0;break;case"slider":a.slider=!0;break;case"addBtn":a.addBtn=!0}}if(!0===a.swap){for(let t=0;t<e.this.children.length;t++)1===e.this.children[t].tagName.split("-").length?("view"===e.this.children[t].slot&&(e.this.children[t].className="wall"),e["template-light"].push(e.this.children[t])):!0===e.getAttribute(e.this.children[t],"light","template")?(e.this.children[t].setAttribute("type",`${e.this.children[t].getAttribute("type")}-external`),i(e.this.children[t]),e["template-light"].push(e.this.children[t])):(e.this.children[t].setAttribute("type",`${e.this.children[t].getAttribute("type")}-external`),i(e.this.children[t]),e["template-shadow"].push(e.this.children[t]));for(let t=0;t<e.template.children.length;t++)1===e.template.children[t].tagName.split("-").length?("view"===e.template.children[t].slot&&(e.template.children[t].className="wall"),e["template-light"].push(e.template.children[t])):!0===e.getAttribute(e.template.children[t],"light","template")?(e.template.children[t].setAttribute("type",`${e.template.children[t].getAttribute("type")}-external`),i(e.template.children[t]),e["template-light"].push(e.template.children[t])):(e.template.children[t].setAttribute("type",`${e.template.children[t].getAttribute("type")}-external`),i(e.template.children[t]),e["template-shadow"].push(e.template.children[t]))}else{for(let t=0;t<e.this.children.length;t++)1===e.this.children[t].tagName.split("-").length?("view"===e.this.children[t].slot&&(e.this.children[t].className="wall"),e["template-shadow"].push(e.this.children[t])):!0===e.getAttribute(e.this.children[t],"light","template")?(i(e.this.children[t]),e["template-shadow"].push(e.this.children[t])):(i(e.this.children[t]),e["template-light"].push(e.this.children[t]));for(let t=0;t<e.template.children.length;t++)1===e.template.children[t].tagName.split("-").length?("view"===e.template.children[t].slot&&(e.template.children[t].className="wall"),e["template-shadow"].push(e.template.children[t])):!0===e.getAttribute(e.template.children[t],"light","template")?(i(e.template.children[t]),e["template-shadow"].push(e.template.children[t])):(i(e.template.children[t]),e["template-light"].push(e.template.children[t]))}e.verify=a,!0===e.verify.slider?function(e){return new Promise(function(t,r){fetch(`/static/html/components/varan-slider/template/${e.slot}.html`).then(function(e){if(e.ok)return e.text()}).then(function(r){let a=new DOMParser,n=a.parseFromString(r,"text/html");e.slider=n.getElementsByTagName("template")[0].content.cloneNode(!0);let o=document.createElement("section");o.className="slider",o.slot="view",o.appendChild(e.slider),e.slider=o,t(e)}).catch(e=>e)})}(e).then(e=>{console.assert(!1,e),e["template-light"].push(e.slider),e.this.appendChild(e.slider),function(e,t,r){return new Promise(function(r,a){if(t){switch(t){case"slider":(function(e,t){return new Promise(function(r,a){for(let a=0;a<e.state.length;a++)for(let n=0;n<e[`template-${e.state[a]}`].length;n++)0===e[`template-${e.state[a]}`][n].getElementsByClassName(t).length||(e.slider=e[`template-${e.state[a]}`][n].getElementsByClassName(t)[0],r(e[`template-${e.state[a]}`][n].getElementsByClassName(t)[0]))})})(e,"peppermint").then(t=>{(function(e){return new Promise(function(t,r){t(Peppermint(e,{dots:!1,slideshow:!1,speed:500,slideshowInterval:5e3,stopSlideshowAfterInteraction:!0,onSetup:function(e){}}))})})(t).then(t=>{e.slider=t,r(e)})})}r(e)}else r(e)})}(e,"slider").then(e=>{if(!0===e.verify.one)for(let r=0;r<e.state.length;r++)for(let a=0;a<e[`template-${e.state[r]}`].length;a++)"wall"===e[`template-${e.state[r]}`][a].className&&(e[`template-${e.state[r]}`].splice(a,1),t(e));else t(e)})}):t(e)})}function o(t,r){return new Promise(function(r,a){t.verify=[],t.this.hasAttribute("preset")&&(t.parent=t.this.getAttribute("parent")),t.this.hasAttribute("preset")?0===t.this.getAttribute("preset").length?(t["path-template"]=`/static/html/components/${t.component}/template/${t.parent}.html`,t.preset="default",t.verify.preset=!0):(t["path-template"]=`/static/html/components/${t.component}/template/${t.this.getAttribute("preset")}/${t.component}-${t.this.getAttribute("preset")}.html`,t.preset=`${t.this.getAttribute("preset")}`,t.verify.preset=!0):(t["path-template"]=`/static/html/components/${t.component}/${t.component}.html`,t.verify.preset=!1),fetch(t["path-template"]).then(function(e){if(e.ok)return e.text()}).then(function(a){let o=(new DOMParser).parseFromString(a,"text/html");t.template=o.getElementsByTagName("template")[0].content.cloneNode(!0),function(t){return new Promise(function(r,a){t["path-external"]=`/static/html/components/${t.component}/external/${t.component}-external.html`,fetch(t["path-external"]).then(function(e){return!1===e.ok?e.ok:e.text()}).then(function(a){if(!1===a);else{let n=new DOMParser,o=n.parseFromString(a,"text/html");t.external=o.querySelectorAll("section"),function(t){return new Promise(function(r,a){t["external-property"]=e["external-property"];let n=[],o=[],i=[];for(let e=0;e<t.external.length;e++){for(let r=0;r<t.external[e].children.length;r++)switch(t.external[e].children[r].tagName){case"SCRIPT":t.external[e].getAttribute("id")&&(o.script=t.external[e].children[r]);break;case"COMPONENT-ID":o.id=t.external[e].children[r].innerText;break;case"COMPONENT-ACTION":for(let a=0;a<t.external[e].children[r].children.length;a++)i.push(t.external[e].children[r].children[a].innerText);o.actions=i}n.push(o),o=[]}t["external-property"]=n,r(t)}).catch(e=>{})}(t).then(e=>{0===e["external-property"].length?r(e):function(e){return new Promise(function(t,r){e["words-action"]=[];let a=[];for(let r=0;r<e["external-property"].length;r++){for(let t=0;t<e["external-property"][r].actions.length;t++)for(let n=0;n<e.words.length;n++)-1!==e["external-property"][r].actions[t].indexOf(e.words[n])&&("shadowRoot"!==e.words[n]&&"shadow"!==e.words[t]||(a.shadow=!0),"light"!==e.words[n]&&"лайт"!==e.words[t]||(a.light=!0),"editor"===e.words[n]&&(a.editor=!0),"слайдер"===e.words[n]&&(a["editor-slider"]=!0),"swap"===e.words[n]&&(a.swap=!0));e["words-action"]=a;for(let t in e["external-property"])for(let r in e["external-property"][t])switch(r){case"id":let a=document.createElement(e["external-property"][t][r]);a.setAttribute("type","external"),e.this.appendChild(a)}t(e)}})}(e).then(e=>{r(e)})})}}).catch(e=>{throw e})})}(t).then(e=>{n(e,e["type-swap"],e["type-external"]).then(e=>{if(!0===e.verify.swap){if(0!==e["template-shadow"].length){e.this.attachShadow({mode:"open"}),e.shadowRoot=!0;for(let t=0;t<e["template-shadow"].length;t++)e.this.shadowRoot.appendChild(e["template-shadow"][t])}if(0!==e["template-light"].length)for(let t=0;t<e["template-light"].length;t++)e.this.appendChild(e["template-light"][t])}else{if(0!==e["template-shadow"].length){e.this.attachShadow({mode:"open"}),e.shadowRoot=!0;for(let t in e["template-shadow"])e.this.shadowRoot.appendChild(e["template-shadow"][t])}if(0!==e["template-light"].length)for(let t in e["template-light"])e.this.appendChild(e["template-light"][t])}r(e)})})}).catch(e=>e)})}function i(e){return new Promise(function(t,r){e.getAttribute("import");const a=document.createElement("script");let n=!1;for(let t in document.head.getElementsByTagName("script"))"object"==typeof document.head.getElementsByTagName("script")[t]&&-1!==document.head.getElementsByTagName("script")[t].outerHTML.indexOf(e.tagName.toLowerCase())&&(n=!0);!0===n||(null===e.getAttribute("import")||(a.type="module"),a.src=`/static/html/components/${e.tagName.toLowerCase()}/${e.tagName.toLowerCase()}.js`,a.onload=t,a.onerror=r,document.head.appendChild(a))})}var l;function s(e){timeStamp.staticProperty=e,s=function(e){return e}}t.push("component-id"),t.push("script"),t.push("component-action"),r.push("h1"),r.push("innerText"),a.push("shadowRoot"),a.push("head"),a.push("shadow"),a.push("light"),a.push("lightDom"),a.push("editor"),a.push("слайдер"),a.push("swap"),e.this=this,e["type-supported"]=r,(l=this,new Promise(function(e,t){let r=[];r.indexeddb=null,r.firebase=null,r.localStorage=null,r.mongo=null,r.mySql=null,r.state=[],r.state.push("shadow"),r.state.push("light"),r.words=a,r["type-swap"]=!1,r["type-external"]=!1,r["document-offsetWidth"]=document.body.offsetWidth;let n=!1;if(r.getAttribute=((e,t,r)=>{if("template"===r){if(!e.getAttribute("type"))return e.setAttribute("type","default"),!1;for(let r=0;r<e.getAttribute("type").split("-").length;r++)e.getAttribute("type").split("-")[r]===t&&(n=!0);return n}if(e[`verify-${t}`]=!1,0===e.this.getAttribute("type").split("-").length)return!1;for(let r=0;r<e.this.getAttribute("type").split("-").length;r++)e.this.getAttribute("type").split("-")[r]===t?e[`verify-${t}`]=!0:e[`verify-${t}`]=!1;return e[`verify-${t}`]}),l.tagName.toLowerCase()&&(r.component=l.tagName.toLowerCase()),"object"!=typeof l);else{if(l.getAttribute("type")){r.type=l.getAttribute("type").split("-");for(let e=0;e<r.type.length;e++)r.type[e]=r.type[e].replace(/:/g,"-");for(let e in r.type)switch(r.type[e]){case"swap":r["type-swap"]=!0;break;case"external":r["type-external"]=!0}}else r.type=["default"],l.setAttribute("type","default");if(l.slot?r.slot=l.slot:(l.slot=l.tagName.toLowerCase(),r.slot=l.slot),l.getAttribute("type")){let e=!1;for(let t in l.getAttribute("type").split("-"))-1!==l.getAttribute("type").split("-")[t].indexOf("style:")&&(e=!0);r["style-custom"]=!0===e?"not-default":"default"}}r.shadowRoot=!1,r.this=l,e(r)})).then(e=>(o(e).then(e=>(function(e){return new Promise(function(t,r){let a=document.createElement("style"),n=document.createElement("style");for(let t=0;t<e.type.length;t++)"swap"===e.type[t]?"scoped"===e.type[t]&&a.setAttribute("scoped",""):"scoped"===e.type[t]&&n.setAttribute("scoped","");for(let r=0;r<e.state.length;r++){switch(e[`path-style-${e.state[r]}`]=`@import '/static/html/components/${e.component}/${e.state[r]}/${e.component}.css'; @import '/static/html/components/${e.component}/${e.state[r]}/${e.component}-custom.css';`,e.state[r]){case"shadow":a.innerText=e[`path-style-${e.state[r]}`];break;case"light":n.innerText=e[`path-style-${e.state[r]}`]}"swap"===e.state[r]?!0===e.shadowRoot?(e.this.shadowRoot.appendChild(n),e.this.appendChild(a),t(e)):e.this.appendChild(a):!0===e.shadowRoot?(e.this.shadowRoot.appendChild(a),e.this.appendChild(n),t(e)):e.this.appendChild(n)}t(e)})}(e).then(e=>(async function(e){bundle.default(e,null,async function(t,r){let a=(e,t)=>"VARAN-EDITOR"===e.tagName,n=(e,t)=>e.slot===t,o=function(e){s(e.timeStamp);let t=e.timeStamp-timeStamp.staticProperty;if(t>140||0===t){e.target.disable="true",e.target.style.backgroundColor="#62bcd7";let t=e.target,r=!1;for(;!r;)void 0!==(t=t.parentNode).tagName&&"undefined"!==t.tagName||(t=t.getRootNode().host),r=a(t,"varan-editor");let n=new CustomEvent("saveEditor",{detail:{id:t.slot}});document.dispatchEvent(n),setTimeout(function(){e.target.disable="false",e.target.style.backgroundColor="#ccc"},3e3)}timeStamp.staticProperty=e.timeStamp},i=async function(e){s(e.timeStamp);let t=e.timeStamp-timeStamp.staticProperty;if(t>140||0===t){e.target.disable="true",e.target.style.backgroundColor="#62bcd7";let t=e.target,o=!1;for(;!o;)void 0!==(t=t.parentNode).tagName&&"undefined"!==t.tagName||(t=t.getRootNode().host),o=a(t,"varan-editor");let i=await staticProperty({input:"action",type:"all"},"get","type"),l={moderator:{},news:{},card:{}},s={},c={},d={},p={};for(let e=0;e<i["varan-editor"].length;e++)switch(i["varan-editor"][e].slot){case"description":l.news.description=await utils({input:"varan-menu",data:i["varan-editor"][e].editor.quill.root.innerHTML,type:"html2string"},"convert","type"),d.description=i["varan-editor"][e].editor.quill.root.innerHTML,i["varan-editor"][e].obj.this.querySelector(".wall").innerHTML="",i["varan-editor"][e].editor.quill.root.innerHTML="";break;case"content":l.news.content=await utils({input:"varan-menu",data:i["varan-editor"][e].editor.quill.root.innerHTML,type:"html2string"},"convert","type"),d.content=i["varan-editor"][e].editor.quill.root.innerHTML,i["varan-editor"][e].obj.this.querySelector(".wall").innerHTML="",i["varan-editor"][e].editor.quill.root.innerHTML="";break;case"about":l.about=await utils({input:"varan-menu",data:i["varan-editor"][e].editor.quill.root.innerHTML,type:"html2string"},"convert","type"),s=i["varan-editor"][e].editor.quill.root.innerHTML;break;case"moderator":l.moderator.description=await utils({input:"varan-menu",data:i["varan-editor"][e].editor.quill.root.innerHTML,type:"html2string"},"convert","type"),c.description=i["varan-editor"][e].editor.quill.root.innerHTML;break;case"moderatorContent":l.moderator.content=await utils({input:"varan-menu",data:i["varan-editor"][e].editor.quill.root.innerHTML,type:"html2string"},"convert","type"),c.content=i["varan-editor"][e].editor.quill.root.innerHTML;break;case"cardDescription":l.card.description=await utils({input:"varan-menu",data:i["varan-editor"][e].editor.quill.root.innerHTML,type:"html2string"},"convert","type"),p.description=i["varan-editor"][e].editor.quill.root.innerHTML;break;case"cardContent":l.card.content=await utils({input:"varan-menu",data:i["varan-editor"][e].editor.quill.root.innerHTML,type:"html2string"},"convert","type"),p.content=i["varan-editor"][e].editor.quill.root.innerHTML;break;default:console.warn("~~~~~~~~~","На этот объект нет действия ",i["varan-editor"][e].slot)}let h={},u={},m={},y={},g={},w={},v={},f={},b={};switch(t.slot){case"about":b="about";break;case"moderator":case"moderatorContent":b="moderator";break;case"content":case"description":b="news";break;case"cardContent":case"cardDescription":b="card";break;default:b=t.slot,console.warn("необрабатываемый тип",t.slot)}switch(b){case"card":for(let e=0;e<i["varan-card-news"].length;e++)switch(i["varan-card-news"][e].slot){case"card-admin":let t=i["varan-card-news"][e].this.shadowRoot.querySelector(".nameBid").value,r=i["varan-card-news"][e].this.shadowRoot.querySelector(".imgBidAdmin").src,a=i["varan-card-news"][e].this.shadowRoot.querySelector(".timerValue").value;a=+a;let n=i["varan-card-news"][e].this.shadowRoot.querySelector(".priceValue").value;n=+n,a<1&&(alert("минимальное время аукциона 1 минут"),a=1),0===n&&(alert("минимальная стоимость 1 waves"),n=1),0===t.length&&(t="Наименование товара");let o={};y=Date.now(),o.description={time:a,price:n,description:l.card.description},o.image={},o.content=l.card.content,o.timestamp=y,o.title=t,o.image.data=r,o.image.name=t,o.short_content=l.card.description,o.url="https://universitykids.ru",o.rss="https://universitykids.ru/rss",o.rss="bid",i["varan-card-news"][e].this.shadowRoot.querySelector(".nameBid").value="Наименование товара",i["varan-card-news"][e].this.shadowRoot.querySelector(".imgBidAdmin").src="./static/html/components/varan-card-news/icons/no_image.jpg",i["varan-card-news"][e].this.shadowRoot.querySelector(".timerValue").value=10,i["varan-card-news"][e].this.shadowRoot.querySelector(".priceValue").value=1;let s=i["varan-card-news"][e].this.querySelectorAll("varan-menu"),c={},d={},p={},h={};for(let e=0;e<s.length;e++)c=void 0===s[e].shadowRoot||null===s[e].shadowRoot?s[e]:s[e].shadowRoot,d=c.querySelector(".menu-convert"),p=c.querySelector(".menu-save"),null===(h=c.querySelector(".update"))||"null"===h||h.remove(),d.innerText="Создаётся новость. Страница сама перезагрузится",d.style.backgroundColor="red",d.disabled=!0,p.disabled=!0;staticProperty({type:"task",task:{type:"create",data:o}},"task","type")}break;case"about":let e=await utils({input:"varan-menu",data:s,type:"html2string"},"convert","type");for(let t=0;t<i["varan-about"].length;t++)switch(i["varan-about"][t].slot){case"about-admin":let r={};if(null===i["varan-about"][t].obj.this.querySelector(".menu-convert")){let e=i["varan-about"][t].obj.this.querySelector("varan-menu");r=e.shadowRoot.querySelector(".menu-convert")}else r=i["varan-about"][t].obj.this.querySelector(".menu-convert");r.innerText="Идёт сохранение данных.",r.disabled=!0,r.style.backgroundColor="red";let a=await matcher.webdav({input:"varan-menu",data:{txt:e},type:"about",path:"/about"},"set","type"),n=await utils({input:"varan-menu",target:"varan-about",type:"object",source:i["varan-about"],get:".main"},"get","type");n.innerHTML="",n.insertAdjacentHTML("beforeend",a),r.innerText="Данные сохранены",setTimeout(()=>{r.innerText="сохранить",r.disabled=!1,r.style.backgroundColor="#ccc"},2e3)}break;case"moderator":for(o=!1,h={};!o;)h=t.parentNode,o=n(h,t.getAttribute("parent"));u={},m=h.shadowRoot.querySelector("#titleItem").value;let a={};r.isEmpty(m)?"введите Имя и Фамилию  автора"===(a=prompt("введите Имя и Фамилию  автора","введите Имя и Фамилию  автора"))?(alert("вы не ввели имя автора поле остаётся пустым"),u="модератор"):u=a:u=m,Date.now||(Date.now=function(){return(new Date).getTime()}),y=Date.now(),(g={}).timestamp=y,g.title=u,g.img=h.shadowRoot.querySelector(".moderator").src,g.description=l.moderator.description,g.content=l.moderator.content,g.dir="moderator",g.positionImg=confirm("Фотографию разположить слева ?");let c={},d={},p={},S={};for(let e=0;e<i["varan-editor"].length;e++)switch(i["varan-editor"][e].slot){case"moderator":case"moderatorContent":S=i["varan-editor"][e].obj.this.querySelector("varan-menu").shadowRoot&&void 0!==i["varan-editor"][e].obj.this.querySelector("varan-menu").shadowRoot&&null!==i["varan-editor"][e].obj.this.querySelector("varan-menu").shadowRoot?i["varan-editor"][e].obj.this.querySelector("varan-menu").shadowRoot:i["varan-editor"][e].obj.this.querySelector("varan-menu"),c=S.querySelector(".menu-convert"),d=S.querySelectorAll(".menu-save")[0],null===(p=S.querySelector(".update"))||"null"===p||p.remove(),c.innerHTML="создаётся модератор",c.style.backgroundColor="#e1e1e1",c.disabled=!0,d.disabled=!0}f=await utils({input:"varan-menu",target:"lacerta-moderator",type:"object",source:i["lacerta-moderator"],get:".main"},"get","type"),w=await matcher.webdav({input:"varan-menu",data:g,type:"components",name:"moderator",path:"/components"},"set","type",f.querySelectorAll(".adminMenu").length);let q=f.querySelectorAll(".adminMenu").length;v=await utils({input:"varan-menu",target:"moderator-admin",type:"object",source:i["lacerta-moderator"],get:".adminContent"},"get","type");for(let e=0;e<w.length;e++){f.insertAdjacentHTML("beforeend",w[e]),f.querySelector(`.item_${f.querySelectorAll(".adminMenu").length}`),console.log(q);let t=f.querySelector(`.item_${q}`);await addEventListener({input:"varan-menu",delete:t.querySelector(".delete"),change:t.querySelector(".change"),type:"lacerta-moderator"},"add","type")}for(let e=0;e<i["varan-editor"].length;e++)switch(i["varan-editor"][e].slot){case"moderator":S=i["varan-editor"][e].obj.this.querySelector("varan-menu").shadowRoot&&void 0!==i["varan-editor"][e].obj.this.querySelector("varan-menu").shadowRoot&&null!==i["varan-editor"][e].obj.this.querySelector("varan-menu").shadowRoot?i["varan-editor"][e].obj.this.querySelector("varan-menu").shadowRoot:i["varan-editor"][e].obj.this.querySelector("varan-menu"),c=S.querySelector(".menu-convert"),d=S.querySelectorAll(".menu-save")[0],null===(p=S.querySelector(".update"))||"null"===p||p.remove(),c.innerHTML="модератор создан",location.reload();break;case"moderatorContent":S=i["varan-editor"][e].obj.this.querySelector("varan-menu").shadowRoot&&void 0!==i["varan-editor"][e].obj.this.querySelector("varan-menu").shadowRoot&&null!==i["varan-editor"][e].obj.this.querySelector("varan-menu").shadowRoot?i["varan-editor"][e].obj.this.querySelector("varan-menu").shadowRoot:i["varan-editor"][e].obj.this.querySelector("varan-menu"),c=S.querySelector(".menu-convert"),d=S.querySelectorAll(".menu-save")[0],null===(p=S.querySelector(".update"))||"null"===p||p.remove(),c.innerHTML="модератор создан",c.style.backgroundColor="red",c.disabled=!1,d.disabled=!1}break;case"news":let A=i["varan-editor-admin"][0].this.querySelector("lacerta-news"),x=A.shadowRoot.querySelector("#titleItem").value,k=A.shadowRoot.querySelector(".gallery").src,R="image";0===x.length&&(x="Новость"),Date.now||(Date.now=function(){return(new Date).getTime()});let T={image:{}};T.image.data=k,T.image.name=R,T.title=x,T.content=l.news.content,T.short_content=l.news.description,T.url="https://universitykids.ru",T.rss="https://universitykids.ru/rss",T.timestamp=Date.now();for(let e=0;e<i["lacerta-news"].length;e++)switch(i["lacerta-news"][e].slot){case"news-admin":i["lacerta-news"][e].obj.this.shadowRoot.querySelector("#titleItem").value="",i["lacerta-news"][e].obj.this.shadowRoot.querySelector(".date").innerHTML="",i["lacerta-news"][e].obj.this.shadowRoot.querySelector(".gallery").src="/static/html/components/lacerta-news/icons/no_image.jpg",r.isEmpty(i.action)&&(i.action={}),r.isEmpty(i.action.create)&&(i.action.create={}),i.action.create=!0;let t=i["lacerta-news"][e].obj.this.querySelectorAll("varan-menu"),a={},n={},o={},l={};for(let e=0;e<t.length;e++)a=void 0===t[e].shadowRoot||null===t[e].shadowRoot?t[e]:t[e].shadowRoot,n=a.querySelector(".menu-convert"),o=a.querySelector(".menu-save"),null===(l=a.querySelector(".update"))||"null"===l||l.remove(),n.innerText="Создаётся новость. Страница сама перезагрузится",n.style.backgroundColor="red",n.disabled=!0,o.disabled=!0;break;default:console.warn("~~~~~~~~~","На этот объект нет действия ",i["lacerta-news"][e].slot)}staticProperty({type:"task",task:{type:"create",data:T}},"task","type");break;default:console.assert(!1,b)}setTimeout(function(){e.target.disable="false",e.target.style.backgroundColor="#ccc"},3e3)}timeStamp.staticProperty=e.timeStamp};e.this.querySelector(".menu-save")?(e.this.querySelector(".menu-save").addEventListener("click",o,!1),e.this.querySelector(".menu-convert").addEventListener("click",i,!1)):(e.this.shadowRoot.querySelector(".menu-save").addEventListener("click",o,!1),e.this.shadowRoot.querySelector(".menu-convert").addEventListener("click",i,!1))})}(e),e)),e)),e))}attributeChangedCallback(e,t,r){let a={};if(a=this.hasAttribute("parent")?{id:e,slot:this.getAttribute("parent"),state:0}:{id:e,slot:"default",state:0},this.hasAttribute("parent")){let n={name:e,oldValue:t,newValue:r,state:0,parent:this.getAttribute("parent")};store.dispatch(a,n).then(e=>{})}else alert("не установлен parent родительский элемент")}});