import menu from"/static/html/components/component_modules/menu/menu.mjs";import matcher from"/static/html/components/component_modules/matcher/matcher.mjs";import Store from"/static/html/components/component_modules/varan-store/varan-store.mjs";import custom from"/static/html/components/component_modules/customEvent/customEvent.mjs";import utils from"/static/html/components/component_modules/utils/utils.mjs";import staticProperty from"/static/html/components/component_modules/staticProperty/staticProperty.mjs";import addEventListener from"/static/html/components/component_modules/addEventListener/addEventListener.mjs";import isEmpty from"/static/html/components/component_modules/isEmpty/isEmpty.mjs";let timeStamp={staticProperty:0},store={};customElements.define("varan-menu",class extends HTMLElement{static get observedAttributes(){return["mode"]}constructor(){super();let t=[],e=[],r=[],a=[];function n(t,e,r){return new Promise(function(e,r){t["template-shadow"]=[],t["template-light"]=[];let a=[];a.swap=!1,a.external=!1,a.light=!1,a.slider=!1,a.one=!1,a.addBtn=!1;for(let e=0;e<t.type.length;e++){if(-1!==t.type[e].indexOf("slider")&&t.type[e].split("-").length>1){a.slider=!0;for(let r in t.type[e].split("-"))switch(t.type[e].split("-")[r]){case"one":a.one=!0}}if(t.type[e].length)switch(t.type[e]){case"swap":a.swap=!0;break;case"external":a.external=!0;break;case"light":a.light=!0;break;case"slider":a.slider=!0;break;case"addBtn":a.addBtn=!0}}if(!0===a.swap){for(let e=0;e<t.this.children.length;e++)1===t.this.children[e].tagName.split("-").length?("view"===t.this.children[e].slot&&(t.this.children[e].className="wall"),t["template-light"].push(t.this.children[e])):!0===t.getAttribute(t.this.children[e],"light","template")?(t.this.children[e].setAttribute("type",`${t.this.children[e].getAttribute("type")}-external`),i(t.this.children[e]),t["template-light"].push(t.this.children[e])):(t.this.children[e].setAttribute("type",`${t.this.children[e].getAttribute("type")}-external`),i(t.this.children[e]),t["template-shadow"].push(t.this.children[e]));for(let e=0;e<t.template.children.length;e++)1===t.template.children[e].tagName.split("-").length?("view"===t.template.children[e].slot&&(t.template.children[e].className="wall"),t["template-light"].push(t.template.children[e])):!0===t.getAttribute(t.template.children[e],"light","template")?(t.template.children[e].setAttribute("type",`${t.template.children[e].getAttribute("type")}-external`),i(t.template.children[e]),t["template-light"].push(t.template.children[e])):(t.template.children[e].setAttribute("type",`${t.template.children[e].getAttribute("type")}-external`),i(t.template.children[e]),t["template-shadow"].push(t.template.children[e]))}else{for(let e=0;e<t.this.children.length;e++)1===t.this.children[e].tagName.split("-").length?("view"===t.this.children[e].slot&&(t.this.children[e].className="wall"),t["template-shadow"].push(t.this.children[e])):!0===t.getAttribute(t.this.children[e],"light","template")?(i(t.this.children[e]),t["template-shadow"].push(t.this.children[e])):(i(t.this.children[e]),t["template-light"].push(t.this.children[e]));for(let e=0;e<t.template.children.length;e++)1===t.template.children[e].tagName.split("-").length?("view"===t.template.children[e].slot&&(t.template.children[e].className="wall"),t["template-shadow"].push(t.template.children[e])):!0===t.getAttribute(t.template.children[e],"light","template")?(i(t.template.children[e]),t["template-shadow"].push(t.template.children[e])):(i(t.template.children[e]),t["template-light"].push(t.template.children[e]))}t.verify=a,!0===t.verify.slider?function(t){return new Promise(function(e,r){fetch(`/static/html/components/varan-slider/template/${t.slot}.html`).then(function(t){if(t.ok)return t.text()}).then(function(r){let a=new DOMParser,n=a.parseFromString(r,"text/html");t.slider=n.getElementsByTagName("template")[0].content.cloneNode(!0);let o=document.createElement("section");o.className="slider",o.slot="view",o.appendChild(t.slider),t.slider=o,e(t)}).catch(t=>t)})}(t).then(t=>{console.assert(!1,t),t["template-light"].push(t.slider),t.this.appendChild(t.slider),function(t,e,r){return new Promise(function(r,a){if(e){switch(e){case"slider":(function(t,e){return new Promise(function(r,a){for(let a=0;a<t.state.length;a++)for(let n=0;n<t[`template-${t.state[a]}`].length;n++)0===t[`template-${t.state[a]}`][n].getElementsByClassName(e).length||(t.slider=t[`template-${t.state[a]}`][n].getElementsByClassName(e)[0],r(t[`template-${t.state[a]}`][n].getElementsByClassName(e)[0]))})})(t,"peppermint").then(e=>{(function(t){return new Promise(function(e,r){e(Peppermint(t,{dots:!1,slideshow:!1,speed:500,slideshowInterval:5e3,stopSlideshowAfterInteraction:!0,onSetup:function(t){}}))})})(e).then(e=>{t.slider=e,r(t)})})}r(t)}else r(t)})}(t,"slider").then(t=>{if(!0===t.verify.one)for(let r=0;r<t.state.length;r++)for(let a=0;a<t[`template-${t.state[r]}`].length;a++)"wall"===t[`template-${t.state[r]}`][a].className&&(t[`template-${t.state[r]}`].splice(a,1),e(t));else e(t)})}):e(t)})}function o(e,r){return new Promise(function(r,a){e.verify=[],e.this.hasAttribute("preset")&&(e.parent=e.this.getAttribute("parent")),e.this.hasAttribute("preset")?0===e.this.getAttribute("preset").length?(e["path-template"]=`/static/html/components/${e.component}/template/${e.parent}.html`,e.preset="default",e.verify.preset=!0):(e["path-template"]=`/static/html/components/${e.component}/template/${e.this.getAttribute("preset")}/${e.component}-${e.this.getAttribute("preset")}.html`,e.preset=`${e.this.getAttribute("preset")}`,e.verify.preset=!0):(e["path-template"]=`/static/html/components/${e.component}/${e.component}.html`,e.verify.preset=!1),fetch(e["path-template"]).then(function(t){if(t.ok)return t.text()}).then(function(a){let o=(new DOMParser).parseFromString(a,"text/html");e.template=o.getElementsByTagName("template")[0].content.cloneNode(!0),function(e){return new Promise(function(r,a){e["path-external"]=`/static/html/components/${e.component}/external/${e.component}-external.html`,fetch(e["path-external"]).then(function(t){return!1===t.ok?t.ok:t.text()}).then(function(a){if(!1===a);else{let n=new DOMParser,o=n.parseFromString(a,"text/html");e.external=o.querySelectorAll("section"),function(e){return new Promise(function(r,a){e["external-property"]=t["external-property"];let n=[],o=[],i=[];for(let t=0;t<e.external.length;t++){for(let r=0;r<e.external[t].children.length;r++)switch(e.external[t].children[r].tagName){case"SCRIPT":e.external[t].getAttribute("id")&&(o.script=e.external[t].children[r]);break;case"COMPONENT-ID":o.id=e.external[t].children[r].innerText;break;case"COMPONENT-ACTION":for(let a=0;a<e.external[t].children[r].children.length;a++)i.push(e.external[t].children[r].children[a].innerText);o.actions=i}n.push(o),o=[]}e["external-property"]=n,r(e)}).catch(t=>{})}(e).then(t=>{0===t["external-property"].length?r(t):function(t){return new Promise(function(e,r){t["words-action"]=[];let a=[];for(let r=0;r<t["external-property"].length;r++){for(let e=0;e<t["external-property"][r].actions.length;e++)for(let n=0;n<t.words.length;n++)-1!==t["external-property"][r].actions[e].indexOf(t.words[n])&&("shadowRoot"!==t.words[n]&&"shadow"!==t.words[e]||(a.shadow=!0),"light"!==t.words[n]&&"лайт"!==t.words[e]||(a.light=!0),"editor"===t.words[n]&&(a.editor=!0),"слайдер"===t.words[n]&&(a["editor-slider"]=!0),"swap"===t.words[n]&&(a.swap=!0));t["words-action"]=a;for(let e in t["external-property"])for(let r in t["external-property"][e])switch(r){case"id":let a=document.createElement(t["external-property"][e][r]);a.setAttribute("type","external"),t.this.appendChild(a)}e(t)}})}(t).then(t=>{r(t)})})}}).catch(t=>{throw t})})}(e).then(t=>{n(t,t["type-swap"],t["type-external"]).then(t=>{if(!0===t.verify.swap){if(0!==t["template-shadow"].length){t.this.attachShadow({mode:"open"}),t.shadowRoot=!0;for(let e=0;e<t["template-shadow"].length;e++)t.this.shadowRoot.appendChild(t["template-shadow"][e])}if(0!==t["template-light"].length)for(let e=0;e<t["template-light"].length;e++)t.this.appendChild(t["template-light"][e])}else{if(0!==t["template-shadow"].length){t.this.attachShadow({mode:"open"}),t.shadowRoot=!0;for(let e in t["template-shadow"])t.this.shadowRoot.appendChild(t["template-shadow"][e])}if(0!==t["template-light"].length)for(let e in t["template-light"])t.this.appendChild(t["template-light"][e])}r(t)})})}).catch(t=>t)})}function i(t){return new Promise(function(e,r){t.getAttribute("import");const a=document.createElement("script");let n=!1;for(let e in document.head.getElementsByTagName("script"))"object"==typeof document.head.getElementsByTagName("script")[e]&&-1!==document.head.getElementsByTagName("script")[e].outerHTML.indexOf(t.tagName.toLowerCase())&&(n=!0);!0===n||(null===t.getAttribute("import")||(a.type="module"),a.src=`/static/html/components/${t.tagName.toLowerCase()}/${t.tagName.toLowerCase()}.js`,a.onload=e,a.onerror=r,document.head.appendChild(a))})}var l;function s(t){timeStamp.staticProperty=t,s=function(t){return t}}e.push("component-id"),e.push("script"),e.push("component-action"),r.push("h1"),r.push("innerText"),a.push("shadowRoot"),a.push("head"),a.push("shadow"),a.push("light"),a.push("lightDom"),a.push("editor"),a.push("слайдер"),a.push("swap"),t.this=this,t["type-supported"]=r,(l=this,new Promise(function(t,e){let r=[];r.indexeddb=null,r.firebase=null,r.localStorage=null,r.mongo=null,r.mySql=null,r.state=[],r.state.push("shadow"),r.state.push("light"),r.words=a,r["type-swap"]=!1,r["type-external"]=!1,r["document-offsetWidth"]=document.body.offsetWidth;let n=!1;if(r.getAttribute=((t,e,r)=>{if("template"===r){if(!t.getAttribute("type"))return t.setAttribute("type","default"),!1;for(let r=0;r<t.getAttribute("type").split("-").length;r++)t.getAttribute("type").split("-")[r]===e&&(n=!0);return n}if(t[`verify-${e}`]=!1,0===t.this.getAttribute("type").split("-").length)return!1;for(let r=0;r<t.this.getAttribute("type").split("-").length;r++)t.this.getAttribute("type").split("-")[r]===e?t[`verify-${e}`]=!0:t[`verify-${e}`]=!1;return t[`verify-${e}`]}),l.tagName.toLowerCase()&&(r.component=l.tagName.toLowerCase()),"object"!=typeof l);else{if(l.getAttribute("type")){r.type=l.getAttribute("type").split("-");for(let t=0;t<r.type.length;t++)r.type[t]=r.type[t].replace(/:/g,"-");for(let t in r.type)switch(r.type[t]){case"swap":r["type-swap"]=!0;break;case"external":r["type-external"]=!0}}else r.type=["default"],l.setAttribute("type","default");if(l.slot?r.slot=l.slot:(l.slot=l.tagName.toLowerCase(),r.slot=l.slot),l.getAttribute("type")){let t=!1;for(let e in l.getAttribute("type").split("-"))-1!==l.getAttribute("type").split("-")[e].indexOf("style:")&&(t=!0);r["style-custom"]=!0===t?"not-default":"default"}}r.shadowRoot=!1,r.this=l,t(r)})).then(t=>(o(t).then(t=>(function(t){return new Promise(function(e,r){let a=document.createElement("style"),n=document.createElement("style");for(let e=0;e<t.type.length;e++)"swap"===t.type[e]?"scoped"===t.type[e]&&a.setAttribute("scoped",""):"scoped"===t.type[e]&&n.setAttribute("scoped","");for(let r=0;r<t.state.length;r++){switch(t[`path-style-${t.state[r]}`]=`@import '/static/html/components/${t.component}/${t.state[r]}/${t.component}.css'; @import '/static/html/components/${t.component}/${t.state[r]}/${t.component}-custom.css';`,t.state[r]){case"shadow":a.innerText=t[`path-style-${t.state[r]}`];break;case"light":n.innerText=t[`path-style-${t.state[r]}`]}"swap"===t.state[r]?!0===t.shadowRoot?(t.this.shadowRoot.appendChild(n),t.this.appendChild(a),e(t)):t.this.appendChild(a):!0===t.shadowRoot?(t.this.shadowRoot.appendChild(a),t.this.appendChild(n),e(t)):t.this.appendChild(n)}e(t)})}(t).then(t=>(async function(t){let e=(t,e)=>"VARAN-EDITOR"===t.tagName,r=(t,e)=>t.slot===e,a=function(t){s(t.timeStamp);let r=t.timeStamp-timeStamp.staticProperty;if(r>140||0===r){t.target.disable="true",t.target.style.backgroundColor="#62bcd7";let r=t.target,a=!1;for(;!a;)void 0!==(r=r.parentNode).tagName&&"undefined"!==r.tagName||(r=r.getRootNode().host),a=e(r,"varan-editor");let n=new CustomEvent("saveEditor",{detail:{id:r.slot}});document.dispatchEvent(n),setTimeout(function(){t.target.disable="false",t.target.style.backgroundColor="#ccc"},3e3)}timeStamp.staticProperty=t.timeStamp},n=async function(t){s(t.timeStamp);let a=t.timeStamp-timeStamp.staticProperty;if(a>140||0===a){t.target.disable="true",t.target.style.backgroundColor="#62bcd7";let a=t.target,n=!1;for(;!n;)void 0!==(a=a.parentNode).tagName&&"undefined"!==a.tagName||(a=a.getRootNode().host),n=e(a,"varan-editor");let o=await staticProperty({input:"action",type:"all"},"get","type"),i={moderator:{},news:{},card:{}},l={},s={},c={},d={};for(let t=0;t<o["varan-editor"].length;t++)switch(o["varan-editor"][t].slot){case"description":i.news.description=await utils({input:"varan-menu",data:o["varan-editor"][t].editor.quill.root.innerHTML,type:"html2string"},"convert","type"),c.description=o["varan-editor"][t].editor.quill.root.innerHTML,o["varan-editor"][t].obj.this.querySelector(".wall").innerHTML="",o["varan-editor"][t].editor.quill.root.innerHTML="";break;case"content":i.news.content=await utils({input:"varan-menu",data:o["varan-editor"][t].editor.quill.root.innerHTML,type:"html2string"},"convert","type"),c.content=o["varan-editor"][t].editor.quill.root.innerHTML,o["varan-editor"][t].obj.this.querySelector(".wall").innerHTML="",o["varan-editor"][t].editor.quill.root.innerHTML="";break;case"about":i.about=await utils({input:"varan-menu",data:o["varan-editor"][t].editor.quill.root.innerHTML,type:"html2string"},"convert","type"),l=o["varan-editor"][t].editor.quill.root.innerHTML;break;case"moderator":i.moderator.description=await utils({input:"varan-menu",data:o["varan-editor"][t].editor.quill.root.innerHTML,type:"html2string"},"convert","type"),s.description=o["varan-editor"][t].editor.quill.root.innerHTML;break;case"moderatorContent":i.moderator.content=await utils({input:"varan-menu",data:o["varan-editor"][t].editor.quill.root.innerHTML,type:"html2string"},"convert","type"),s.content=o["varan-editor"][t].editor.quill.root.innerHTML;break;case"cardDescription":i.card.description=await utils({input:"varan-menu",data:o["varan-editor"][t].editor.quill.root.innerHTML,type:"html2string"},"convert","type"),d.description=o["varan-editor"][t].editor.quill.root.innerHTML;break;case"cardContent":i.card.content=await utils({input:"varan-menu",data:o["varan-editor"][t].editor.quill.root.innerHTML,type:"html2string"},"convert","type"),d.content=o["varan-editor"][t].editor.quill.root.innerHTML;break;default:console.warn("~~~~~~~~~","На этот объект нет действия ",o["varan-editor"][t].slot)}let p={},h={},m={},u={},y={},w={},g={},v={},f={};switch(a.slot){case"about":f="about";break;case"moderator":case"moderatorContent":f="moderator";break;case"content":case"description":f="news";break;case"cardContent":case"cardDescription":f="card";break;default:f=a.slot,console.warn("необрабатываемый тип",a.slot)}switch(T){case"card":for(let t=0;t<o["varan-card-news"].length;t++)switch(o["varan-card-news"][t].slot){case"card-admin":let e=o["varan-card-news"][t].this.shadowRoot.querySelector(".nameBid").value,r=o["varan-card-news"][t].this.shadowRoot.querySelector(".imgBidAdmin").src,a=o["varan-card-news"][t].this.shadowRoot.querySelector(".timerValue").value;a=+a;let n=o["varan-card-news"][t].this.shadowRoot.querySelector(".priceValue").value;n=+n,a<1&&(alert("минимальное время аукциона 1 минут"),a=1),0===n&&(alert("минимальная стоимость 1 waves"),n=1),0===e.length&&(e="Наименование товара");let l={};u=Date.now(),l.description={time:a,price:n,description:i.card.description},l.image={},l.content=i.card.content,l.timestamp=u,l.title=e,l.image.data=r,l.image.name=e,l.short_content=i.card.description,l.url="https://universitykids.ru",l.rss="https://universitykids.ru/rss",l.rss="bid",o["varan-card-news"][t].this.shadowRoot.querySelector(".nameBid").value="Наименование товара",o["varan-card-news"][t].this.shadowRoot.querySelector(".imgBidAdmin").src="./static/html/components/varan-card-news/icons/no_image.jpg",o["varan-card-news"][t].this.shadowRoot.querySelector(".timerValue").value=10,o["varan-card-news"][t].this.shadowRoot.querySelector(".priceValue").value=1;let s=o["varan-card-news"][t].this.querySelectorAll("varan-menu"),c={},d={},p={},h={};for(let t=0;t<s.length;t++)c=void 0===s[t].shadowRoot||null===s[t].shadowRoot?s[t]:s[t].shadowRoot,d=c.querySelector(".menu-convert"),p=c.querySelector(".menu-save"),null===(h=c.querySelector(".update"))||"null"===h||h.remove(),d.innerText="Создаётся новость. Страница сама перезагрузится",d.style.backgroundColor="red",d.disabled=!0,p.disabled=!0;staticProperty({type:"task",task:{type:"create",data:l}},"task","type")}break;case"about":let t=await utils({input:"varan-menu",data:l,type:"html2string"},"convert","type");for(let e=0;e<o["varan-about"].length;e++)switch(o["varan-about"][e].slot){case"about-admin":let r={};if(null===o["varan-about"][e].obj.this.querySelector(".menu-convert")){let t=o["varan-about"][e].obj.this.querySelector("varan-menu");r=t.shadowRoot.querySelector(".menu-convert")}else r=o["varan-about"][e].obj.this.querySelector(".menu-convert");r.innerText="Идёт сохранение данных.",r.disabled=!0,r.style.backgroundColor="red";let a=await matcher.webdav({input:"varan-menu",data:{txt:t},type:"about",path:"/about"},"set","type"),n=await utils({input:"varan-menu",target:"varan-about",type:"object",source:o["varan-about"],get:".main"},"get","type");n.innerHTML="",n.insertAdjacentHTML("beforeend",a),r.innerText="Данные сохранены",setTimeout(()=>{r.innerText="сохранить",r.disabled=!1,r.style.backgroundColor="#ccc"},2e3)}break;case"moderator":for(n=!1,p={};!n;)p=a.parentNode,n=r(p,a.getAttribute("parent"));h={},m=p.shadowRoot.querySelector("#titleItem").value;let e={};isEmpty(m)?"введите Имя и Фамилию  автора"===(e=prompt("введите Имя и Фамилию  автора","введите Имя и Фамилию  автора"))?(alert("вы не ввели имя автора поле остаётся пустым"),h="модератор"):h=e:h=m,Date.now||(Date.now=function(){return(new Date).getTime()}),u=Date.now(),(y={}).timestamp=u,y.title=h,y.img=p.shadowRoot.querySelector(".moderator").src,y.description=i.moderator.description,y.content=i.moderator.content,y.dir="moderator",y.positionImg=confirm("Фотографию разположить слева ?");let s={},c={},d={},f={};for(let t=0;t<o["varan-editor"].length;t++)switch(o["varan-editor"][t].slot){case"moderator":case"moderatorContent":f=o["varan-editor"][t].obj.this.querySelector("varan-menu").shadowRoot&&void 0!==o["varan-editor"][t].obj.this.querySelector("varan-menu").shadowRoot&&null!==o["varan-editor"][t].obj.this.querySelector("varan-menu").shadowRoot?o["varan-editor"][t].obj.this.querySelector("varan-menu").shadowRoot:o["varan-editor"][t].obj.this.querySelector("varan-menu"),s=f.querySelector(".menu-convert"),c=f.querySelectorAll(".menu-save")[0],null===(d=f.querySelector(".update"))||"null"===d||d.remove(),s.innerHTML="создаётся модератор",s.style.backgroundColor="#e1e1e1",s.disabled=!0,c.disabled=!0}v=await utils({input:"varan-menu",target:"lacerta-moderator",type:"object",source:o["lacerta-moderator"],get:".main"},"get","type"),w=await matcher.webdav({input:"varan-menu",data:y,type:"components",name:"moderator",path:"/components"},"set","type",v.querySelectorAll(".adminMenu").length);let b=v.querySelectorAll(".adminMenu").length;g=await utils({input:"varan-menu",target:"moderator-admin",type:"object",source:o["lacerta-moderator"],get:".adminContent"},"get","type");for(let t=0;t<w.length;t++){v.insertAdjacentHTML("beforeend",w[t]),v.querySelector(`.item_${v.querySelectorAll(".adminMenu").length}`),console.log(b);let e=v.querySelector(`.item_${b}`);await addEventListener({input:"varan-menu",delete:e.querySelector(".delete"),change:e.querySelector(".change"),type:"lacerta-moderator"},"add","type")}for(let t=0;t<o["varan-editor"].length;t++)switch(o["varan-editor"][t].slot){case"moderator":f=o["varan-editor"][t].obj.this.querySelector("varan-menu").shadowRoot&&void 0!==o["varan-editor"][t].obj.this.querySelector("varan-menu").shadowRoot&&null!==o["varan-editor"][t].obj.this.querySelector("varan-menu").shadowRoot?o["varan-editor"][t].obj.this.querySelector("varan-menu").shadowRoot:o["varan-editor"][t].obj.this.querySelector("varan-menu"),s=f.querySelector(".menu-convert"),c=f.querySelectorAll(".menu-save")[0],null===(d=f.querySelector(".update"))||"null"===d||d.remove(),s.innerHTML="модератор создан",location.reload();break;case"moderatorContent":f=o["varan-editor"][t].obj.this.querySelector("varan-menu").shadowRoot&&void 0!==o["varan-editor"][t].obj.this.querySelector("varan-menu").shadowRoot&&null!==o["varan-editor"][t].obj.this.querySelector("varan-menu").shadowRoot?o["varan-editor"][t].obj.this.querySelector("varan-menu").shadowRoot:o["varan-editor"][t].obj.this.querySelector("varan-menu"),s=f.querySelector(".menu-convert"),c=f.querySelectorAll(".menu-save")[0],null===(d=f.querySelector(".update"))||"null"===d||d.remove(),s.innerHTML="модератор создан",s.style.backgroundColor="red",s.disabled=!1,c.disabled=!1}break;case"news":let S=o["varan-editor-admin"][0].this.querySelector("lacerta-news"),q=S.shadowRoot.querySelector("#titleItem").value,A=S.shadowRoot.querySelector(".gallery").src,x="image";0===q.length&&(q="Новость"),Date.now||(Date.now=function(){return(new Date).getTime()});let k={image:{}};k.image.data=A,k.image.name=x,k.title=q,k.content=i.news.content,k.short_content=i.news.description,k.url="https://universitykids.ru",k.rss="https://universitykids.ru/rss",k.timestamp=Date.now();for(let t=0;t<o["lacerta-news"].length;t++)switch(o["lacerta-news"][t].slot){case"news-admin":o["lacerta-news"][t].obj.this.shadowRoot.querySelector("#titleItem").value="",o["lacerta-news"][t].obj.this.shadowRoot.querySelector(".date").innerHTML="",o["lacerta-news"][t].obj.this.shadowRoot.querySelector(".gallery").src="/static/html/components/lacerta-news/icons/no_image.jpg",isEmpty(o.action)&&(o.action={}),isEmpty(o.action.create)&&(o.action.create={}),o.action.create=!0;let e=o["lacerta-news"][t].obj.this.querySelectorAll("varan-menu"),r={},a={},n={},i={};for(let t=0;t<e.length;t++)r=void 0===e[t].shadowRoot||null===e[t].shadowRoot?e[t]:e[t].shadowRoot,a=r.querySelector(".menu-convert"),n=r.querySelector(".menu-save"),null===(i=r.querySelector(".update"))||"null"===i||i.remove(),a.innerText="Создаётся новость. Страница сама перезагрузится",a.style.backgroundColor="red",a.disabled=!0,n.disabled=!0;break;default:console.warn("~~~~~~~~~","На этот объект нет действия ",o["lacerta-news"][t].slot)}staticProperty({type:"task",task:{type:"create",data:k}},"task","type");break;case"varan-editor":let T=await utils({input:"varan-menu",data:o["varan-editor"][0].editor.quill.root.innerHTML,type:"html2string"},"convert","type");document.dispatchEvent(new CustomEvent("textToGitHub",{detail:{content:o["varan-editor"][0].editor.this.contentView.innerText,html:T}}));break;default:console.assert(!1,T)}setTimeout(function(){t.target.disable="false",t.target.style.backgroundColor="#ccc"},3e3)}timeStamp.staticProperty=t.timeStamp};t.this.querySelector(".menu-save")?(t.this.querySelector(".menu-save").addEventListener("click",a,!1),t.this.querySelector(".menu-convert").addEventListener("click",n,!1)):(t.this.shadowRoot.querySelector(".menu-save").addEventListener("click",a,!1),t.this.shadowRoot.querySelector(".menu-convert").addEventListener("click",n,!1))}(t),t)),t)),t))}attributeChangedCallback(t,e,r){let a={};if(a=this.hasAttribute("parent")?{id:t,slot:this.getAttribute("parent"),state:0}:{id:t,slot:"default",state:0},this.hasAttribute("parent")){let n={name:t,oldValue:e,newValue:r,state:0,parent:this.getAttribute("parent")};store.dispatch(a,n).then(t=>{})}else alert("не установлен parent родительский элемент")}});