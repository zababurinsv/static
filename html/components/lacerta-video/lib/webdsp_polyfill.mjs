function js_grayScale(s){for(let t=0;t<s.length;t+=4){let r=s[t],e=(s[t+1],s[t+2],s[t+3]);s[t]=r,s[t+1]=r,s[t+2]=r,s[t+3]=e}return s}function js_brighten(s,t=25){for(let r=0;r<s.length;r+=4)s[r]+t>255||(s[r]+=t),s[r+1]+t>255||(s[r+1]+=t),s[r+2]+t>255||(s[r+2]+=t);return s}function js_invert(s){for(let t=0;t<s.length;t+=4)s[t]=255-s[t],s[t+1]=255-s[t+1],s[t+2]=255-s[t+2];return s}function js_noise(s){let t;for(let r=0;r<s.length;r+=4)t=70*(Math.random()-.5),s[r]=s[r]+t,s[r+1]=s[r+1]+t,s[r+2]=s[r+2]+t;return s}function js_multiFilter(s,t,r,e,i,n){for(let l=0;l<s.length;l+=r)l%4!=3&&(s[l]=e+i*s[l]-s[l+n]-s[l+4*t]);return s}jsFallback=function(){const s={};return s.grayScale=js_grayScale,s.brighten=js_brighten,s.invert=js_invert,s.noise=js_noise,s.multiFilter=js_multiFilter,s.sunset=js_sunset,s.analogTV=js_analog,s.emboss=js_emboss,s.sobelFilter=js_sobelFilter,s.convFilter=js_convFilter,s.blur=js_blur,s.sharpen=js_sharpen,s.strongSharpen=js_strongSharpen,s.urple=js_urple,s.forest=js_forest,s.romance=js_romance,s.hippo=js_hippo,s.longhorn=js_longhorn,s.underground=js_underground,s.rooster=js_rooster,s.mist=js_mist,s.moss=js_mist,s.tingle=js_tingle,s.kaleidoscope=js_tingle,s.bacteria=js_bacteria,s.clarity=js_clarity,s.goodMorning=js_goodMorning,s.acid=js_acid,s.dewdrops=js_dewdrops,s.destruction=js_destruction,s.hulk=js_hulk,s.ghost=js_ghost,s.twisted=js_twisted,s.swamp=js_twisted,s.security=js_security,s.robbery=js_security,s};const js_sunset=bindLastArgs(js_multiFilter,4,127,2,4),js_analog=bindLastArgs(js_multiFilter,7,127,2,4),js_emboss=bindLastArgs(js_multiFilter,1,127,2,4),js_urple=bindLastArgs(js_multiFilter,2,127,2,4),js_forest=bindLastArgs(js_multiFilter,5,127,3,1),js_romance=bindLastArgs(js_multiFilter,8,127,3,2),js_hippo=bindLastArgs(js_multiFilter,2,80,3,2),js_longhorn=bindLastArgs(js_multiFilter,2,27,3,2),js_underground=bindLastArgs(js_multiFilter,8,127,1,4),js_rooster=bindLastArgs(js_multiFilter,8,60,1,4),js_mist=bindLastArgs(js_multiFilter,1,127,1,1),js_tingle=bindLastArgs(js_multiFilter,1,124,4,3),js_bacteria=bindLastArgs(js_multiFilter,4,0,2,4),js_hulk=bindLastArgs(js_multiFilter,2,10,2,4),js_ghost=bindLastArgs(js_multiFilter,1,5,2,4),js_twisted=bindLastArgs(js_multiFilter,1,40,2,3),js_security=bindLastArgs(js_multiFilter,1,120,1,0);function js_convFilter(s,t,r,e,i,n=0,l=1){const o=e[0].length,j=e.length,_=Math.floor(j/2);for(let a=0;a<l;a+=1)for(let l=1;l<r-1;l+=1)for(let r=1;r<t-1;r+=1){const a=4*(l*t+r);let g=0,u=0,d=0;for(let i=0;i<j;++i)for(let n=0;n<o;++n){const o=4*((l+(i-_))*t+(r+(n-_)));g+=s[o+0]*e[i][n],u+=s[o+1]*e[i][n],d+=s[o+2]*e[i][n]}s[a+0]=1/i*g+n,s[a+1]=1/i*u+n,s[a+2]=1/i*d+n}return s}const js_blur=bindLastArgs(js_convFilter,[[1,1,1],[1,1,1],[1,1,1]],9,0,3),js_sharpen=bindLastArgs(js_convFilter,[[0,-1,0],[-1,5,-1],[0,-1,0]],2),js_strongSharpen=bindLastArgs(js_convFilter,[[-1,-1,-1],[-1,8,-1],[-1,-1,-1]],1),js_clarity=bindLastArgs(js_convFilter,[[1,-1,-1],[-1,8,-1],[-1,-1,1]],3),js_goodMorning=bindLastArgs(js_convFilter,[[-1,-1,1],[-1,14,-1],[1,-1,-1]],3),js_acid=bindLastArgs(js_convFilter,[[4,-1,-1],[-1,4,-1],[0,-1,4]],3),js_dewdrops=bindLastArgs(js_convFilter,[[0,0,-1],[-1,12,-1],[0,-1,-1]],2),js_destruction=bindLastArgs(js_convFilter,[[-1,-1,4],[-1,9,-1],[0,-1,0]],2);function js_sobelFilter(s,t,r,e=!1){let i=t,n=r;var l=new Int32Array(i*n);function o(s,t){return s<0||t<0?0:s>=i||t>=n?0:l[i*t+s]}for(var j=0;j<r;j++)for(var _=0;_<t;_++){var a=i*j+_<<2,g=(s[a]>>2)+(s[a+1]>>1)+(s[a+2]>>3);l[i*j+_]=g;var u=i*j+_<<2;s[u]=g,s[u+1]=g,s[u+2]=g,s[u+3]=255}for(j=0;j<r;j++)for(_=0;_<t;_++){var d,c;if(_>=t-1||j>=r-1)d=0,c=0;else{d=-1*o(_-1,j-1)+o(_+1,j-1)+-1*(o(_-1,j)<<1)+(o(_+1,j)<<1)+-1*o(_-1,j+1)+o(_+1,j+1),c=-1*o(_-1,j-1)+-1*(o(_,j-1)<<1)+-1*o(_+1,j-1)+o(_-1,j+1)+(o(_,j+1)<<1)+o(_+1,j+1);var b=Math.floor(Math.sqrt(d*d+c*c)>>>0);b>255&&(b=255),e&&(b=255-b),s[4*(i*j+_)]=b,s[4*(i*j+_)+1]=b,s[4*(i*j+_)+2]=b,s[4*(i*j+_)+3]=255}}return s}