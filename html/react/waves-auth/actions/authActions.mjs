import axios from"axios";import setAuthToken from"../utils/setAuthToken";import jwt_decode from"jwt-decode";import{GET_ERRORS,SET_CURRENT_USER}from"./types";export const registerUser=(e,t)=>t=>{axios.post("http://localhost:3000/api/users/register",e).then(e=>{t({type:GET_ERRORS,payload:e.data})}).catch(e=>t({type:GET_ERRORS,payload:e.response.data}))};export const loginUser=e=>t=>{console.assert(!1,"~~~~~~~~~~~~~~~~~~~~~~~~~~"),axios.post("http://localhost:3000/api/users/login",e).then(e=>{const{token:o}=e.data;localStorage.setItem("jwtToken",o),setAuthToken(o);const s=jwt_decode(o);t(setCurrentUser(s))}).catch(e=>t({type:GET_ERRORS,payload:e.response.data}))};export const setCurrentUser=e=>({type:SET_CURRENT_USER,payload:e});export const logoutUser=()=>e=>{localStorage.removeItem("jwtToken"),setAuthToken(!1),e(setCurrentUser({}))};export default{logoutUser:logoutUser,setCurrentUser:setCurrentUser,loginUser:loginUser,registerUser:registerUser};