import axios from"axios";import{ADD_POST,GET_ERRORS,CLEAR_ERRORS,GET_POSTS,GET_POST,POST_LOADING,DELETE_POST}from"./types";export const addPost=t=>e=>{e(clearErrors()),axios.post("/api/posts",t).then(t=>e({type:ADD_POST,payload:t.data})).catch(t=>e({type:GET_ERRORS,payload:t.response.data}))};export const getPosts=()=>t=>{t(setPostLoading()),axios.get("/api/posts").then(e=>t({type:GET_POSTS,payload:e.data})).catch(e=>t({type:GET_POSTS,payload:null}))};export const getPost=t=>e=>{e(setPostLoading()),axios.get(`/api/posts/${t}`).then(t=>e({type:GET_POST,payload:t.data})).catch(t=>e({type:GET_POST,payload:null}))};export const deletePost=t=>e=>{axios.delete(`/api/posts/${t}`).then(o=>e({type:DELETE_POST,payload:t})).catch(t=>e({type:GET_ERRORS,payload:t.response.data}))};export const addLike=t=>e=>{axios.post(`/api/posts/like/${t}`).then(t=>e(getPosts())).catch(t=>e({type:GET_ERRORS,payload:t.response.data}))};export const removeLike=t=>e=>{axios.post(`/api/posts/unlike/${t}`).then(t=>e(getPosts())).catch(t=>e({type:GET_ERRORS,payload:t.response.data}))};export const addComment=(t,e)=>o=>{o(clearErrors()),axios.post(`/api/posts/comment/${t}`,e).then(t=>o({type:GET_POST,payload:t.data})).catch(t=>o({type:GET_ERRORS,payload:t.response.data}))};export const deleteComment=(t,e)=>o=>{axios.delete(`/api/posts/comment/${t}/${e}`).then(t=>o({type:GET_POST,payload:t.data})).catch(t=>o({type:GET_ERRORS,payload:t.response.data}))};export const setPostLoading=()=>({type:POST_LOADING});export const clearErrors=()=>({type:CLEAR_ERRORS});export default{addPost:addPost,clearErrors:clearErrors,setPostLoading:setPostLoading,deleteComment:deleteComment,addComment:addComment,removeLike:removeLike,addLike:addLike,deletePost:deletePost,getPost:getPost,getPosts:getPosts};