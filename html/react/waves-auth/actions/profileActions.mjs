import axios from"axios";import{GET_PROFILE,GET_PROFILES,PROFILE_LOADING,CLEAR_CURRENT_PROFILE,GET_ERRORS,SET_CURRENT_USER}from"./types";export const getCurrentProfile=()=>e=>{e(setProfileLoading()),axios.get("/api/profile").then(t=>e({type:GET_PROFILE,payload:t.data})).catch(t=>e({type:GET_PROFILE,payload:{}}))};export const getProfileByHandle=e=>t=>{t(setProfileLoading()),axios.get(`/api/profile/handle/${e}`).then(e=>t({type:GET_PROFILE,payload:e.data})).catch(e=>t({type:GET_PROFILE,payload:null}))};export const createProfile=(e,t)=>a=>{axios.post("/api/profile",e).then(e=>t.push("/dashboard")).catch(e=>a({type:GET_ERRORS,payload:e.response.data}))};export const addExperience=(e,t)=>a=>{axios.post("/api/profile/experience",e).then(e=>t.push("/dashboard")).catch(e=>a({type:GET_ERRORS,payload:e.response.data}))};export const addEducation=(e,t)=>a=>{axios.post("/api/profile/education",e).then(e=>t.push("/dashboard")).catch(e=>a({type:GET_ERRORS,payload:e.response.data}))};export const deleteExperience=e=>t=>{axios.delete(`/api/profile/experience/${e}`).then(e=>t({type:GET_PROFILE,payload:e.data})).catch(e=>t({type:GET_ERRORS,payload:e.response.data}))};export const deleteEducation=e=>t=>{axios.delete(`/api/profile/education/${e}`).then(e=>t({type:GET_PROFILE,payload:e.data})).catch(e=>t({type:GET_ERRORS,payload:e.response.data}))};export const getProfiles=()=>e=>{e(setProfileLoading()),axios.get("/api/profile/all").then(t=>e({type:GET_PROFILES,payload:t.data})).catch(t=>e({type:GET_PROFILES,payload:null}))};export const deleteAccount=()=>e=>{window.confirm("Are you sure? This can NOT be undone!")&&axios.delete("/api/profile").then(t=>e({type:SET_CURRENT_USER,payload:{}})).catch(t=>e({type:GET_ERRORS,payload:t.response.data}))};export const setProfileLoading=()=>({type:PROFILE_LOADING});export const clearCurrentProfile=()=>({type:CLEAR_CURRENT_PROFILE});export default{clearCurrentProfile:clearCurrentProfile,setProfileLoading:setProfileLoading,deleteAccount:deleteAccount,getProfiles:getProfiles,deleteEducation:deleteEducation,deleteExperience:deleteExperience,addEducation:addEducation,addExperience:addExperience,createProfile:createProfile,getProfileByHandle:getProfileByHandle,getCurrentProfile:getCurrentProfile};